{"version":3,"file":"vuechessground.esm.js","sources":["../src/authstore.js","../src/stockfish.js","../src/utils.js","../src/lichess.js","../node_modules/@adamdehaven/vue-custom-tooltip/dist/vue-custom-tooltip.esm.js","../node_modules/vue-runtime-helpers/dist/normalize-component.mjs","../src/index.vue","../src/index.js"],"sourcesContent":["export class StoreCache{\n  constructor(){\n    this.clear()\n  }\n\n  get empty(){    \n    return !this.size\n  }\n\n  get now(){\n    return new Date().getTime()\n  }\n\n  setItem(key, value){\n    this.cache[key] = value\n    this.lastWrite = this.now\n  }\n\n  getItem(key){\n    return this.cache[key]\n  }\n\n  clear(){\n    this.cache = {}\n    this.lastWrite = this.now\n  }\n\n  get size(){\n    return Object.keys(this.cache).length\n  }\n}\n\nexport class AuthStore{  \n  constructor(props){\n    // prodHost is the host of the production server\n    // if the host of the page source is different\n    // we are in development\n    this.prodHost = props.prodHost || \"\"\n    // writeDelay is the delay in ms after elapsing of which \n    // without write the buffer has to be written to remote\n    this.writeDelay = props.writeDelay || 5000\n    // maxWriteDelay is the maximum delay after which the buffer\n    // must be written to remote\n    this.maxWriteDelay = props.maxWriteDelay || 30000\n    // watchInterval is the interval at which the state\n    // has to be monitored\n    this.watchInterval = props.watchInterval || 1000\n    // isRemoteKey is a boolean function of store key\n    // which should return true if the key has to be stored\n    // permanently only at the remote\n    this.isRemoteKey = props.isRemoteKey || ( key => false )\n    // mockDelay is the simulated remote read delay in dev in ms\n    this.mockDelay = props.mockDelay || 1500\n    // authstoreFuncProt is the Netlify authstore function protocol\n    this.authstoreFuncProt = props.authstoreFuncProt || `https:`\n    // authstoreFuncPath is the Netlify authstore function path\n    this.authstoreFuncPath = props.authstoreFuncPath || `.netlify/functions/authstore`\n    // vm is the virtual machine using the auth store\n    this.vm = props.vm || null\n\n    this.authstoreFuncUrl = `${this.authstoreFuncProt}//${this.prodHost}/${this.authstoreFuncPath}`\n\n    this.cache = new StoreCache()\n    this.writeBuffer = new StoreCache()\n\n    this.lastWrite = this.cache.now\n\n    setInterval(this.watch.bind(this), this.watchInterval)\n\n    this.setInfo(`authstore ready ${this.authstoreFuncUrl}`)\n  }\n\n  get isDev(){\n    return document.location.host !== this.prodHost\n  }\n\n  setItem(key, value){\n    this.cache.setItem(key, value)\n    this.writeBuffer.setItem(key, value)    \n  }\n\n  getItem(key){\n    return new Promise(resolve => {\n      const cached = this.cache.getItem(key)\n\n      if(typeof cached !== \"undefined\"){\n        resolve(cached)\n        return\n      }\n\n      const stored = JSON.parse(localStorage.getItem(key))\n\n      if(stored !== null){\n        this.cache.setItem(key, stored)\n        this.writeBuffer.setItem(key, stored)\n\n        if(this.isDev && this.isRemoteKey(key)){\n          setTimeout(_ => {\n            resolve(stored)\n          }, this.mockDelay * (0.5 + Math.random()))\n        }else{\n          resolve(stored)\n        }\n\n        return\n      }\n\n      if(this.isDev) return\n\n      fetch(this.authstoreFuncUrl, {\n        method: \"POST\",\n        body: JSON.stringify({\n          ACTION: \"get\",\n          DOCUMENT_ID: key,\n          LICHESS_TOKEN: localStorage.getItem(\"LICHESS_TOKEN\"),\n        })\n      }).then(response => response.json().then(result => {\n        console.log(\"authstore fetched\", result)\n        if(result){          \n          const json = JSON.parse(result.content)\n          this.cache.setItem(key, json)\n          resolve(json)\n        }else{\n          this.cache.setItem(key, null)\n          resolve(null)\n        }\n      }))\n    })\n  }\n\n  shouldWrite(){\n    if(this.writeBuffer.empty) return false\n\n    if( ( this.writeBuffer.now - this.writeBuffer.lastWrite ) > this.writeDelay ) return true\n\n    if( ( this.writeBuffer.now - this.lastWrite ) > this.maxWriteDelay ) return true\n\n    return false\n  }\n\n  setInfo(info){\n    console.log(info)\n\n    if(this.vm){\n      this.vm[\"authstoreInfo\"] = info\n    }\n  }\n\n  watch(){    \n    if(this.shouldWrite()){      \n      this.lastWrite = this.cache.now\n\n      const size = this.writeBuffer.size\n      \n      if(this.isDev){\n        for(let key in this.writeBuffer.cache){\n          localStorage.setItem(key, JSON.stringify(this.writeBuffer.cache[key]))\n        }\n\n        this.setInfo(`written ${size} item(s) at ${this.writeBuffer.now}`)\n\n        this.writeBuffer.clear()\n\n        return\n      }\n\n      const bulk = Object.entries(this.writeBuffer.cache).map(entry => ({\n        updateOne: {\n          filter: {\n            _id : entry[0]\n          },\n          update: {\n            $set: {\n              content: JSON.stringify(entry[1]),\n            }\n          },\n          upsert: true\n        }\n      }))\n\n      console.log(\"bulk\", bulk)\n\n      this.setInfo(`writing ${size} item(s) at ${this.writeBuffer.now}`)\n\n      fetch(this.authstoreFuncUrl, {\n          method: \"POST\",\n          body: JSON.stringify({\n            ACTION: \"bulkwrite\",\n            DOCUMENT: JSON.stringify(bulk),\n            LICHESS_TOKEN: localStorage.getItem(\"LICHESS_TOKEN\"),\n          })\n        }).then(_ => {          \n          this.setInfo(`written ${size} item(s) at ${this.writeBuffer.now}`)\n      })\n\n      this.writeBuffer.clear()\n    }\n  }\n}","const NON_CHESS960 = true\n\nconst MAX_PLMS_GEN_DEPTH = 1\n\nconst SUPPORTED_VARIANTS = [\n    [\"standard\", \"Standard\"],\n    [\"atomic\", \"Atomic\"],\n    [\"seirawan\", \"S-Chess\"],\n    [\"eightpiece\", \"8-Piece\"]\n]\n\nconst VARIANT_TO_ENGINE = {\n    standard: \"stockfish\",\n    atomic: \"stockfish\",\n    seirawan: \"fairy\",\n    eightpiece: \"gochess\"\n}\n\nconst VARIANT_TO_LOCAL_ENGINE = {\n    standard: \"stockfish\",\n    atomic: \"stockfish\",\n    seirawan: null,\n    eightpiece: null\n}\n\nconst SUPPORTED_PERFS = [\n    [\"bullet\", \"Bullet\"],\n    [\"blitz\", \"Blitz\"],\n    [\"atomic\", \"Atomic\"]\n]\n\nconst DISPLAY_FOR_PIECE_LETTER = {    \n    p: \"Pawn\",\n    n: \"Knight\",\n    b: \"Bishop\",\n    r: \"Rook\",\n    q: \"Queen\",\n    k: \"King\",\n    e: \"Elephant\",\n    h: \"Hawk\",\n}\n\nfunction displayNameForVariant(variant){\n    let fv = SUPPORTED_VARIANTS.find(sv => sv[0] == variant)\n    if(!fv) return \"?\"\n    return fv[1]\n}\n\nconst DEFAULT_VARIANT = \"standard\"\n\nconst DEFAULT_PERF = \"bullet\"\n\nconst STANDARD_PROMOTION_KINDS = [\"q\", \"r\", \"b\", \"n\"]\n\nconst DO_COMMENTS = true\nconst DO_MULTI = true\n\nconst DEFAULT_MOVE_OVERHEAD = 1000\n\nfunction strippedfen(fen){\n    return fen.split(\" \").slice(0, 4).join(\" \")\n}\n\nfunction stripsan(san){\n    let strippedsan = san.replace(new RegExp(`[\\+#]*`, \"g\"), \"\")\n    return strippedsan\n}\n\nconst PIECE_DIRECTION_STRINGS = [\"w\", \"nw\", \"n\", \"ne\", \"e\", \"se\", \"s\", \"sw\"]\n\nfunction pieceDirectionStringToSquareDelta(pieceDirectionString){\n    let squareDelta = SquareDelta(0, 0)\n    if(pieceDirectionString.includes(\"n\")) squareDelta.y = -1\n    if(pieceDirectionString.includes(\"s\")) squareDelta.y = 1\n    if(pieceDirectionString.includes(\"e\")) squareDelta.x = 1\n    if(pieceDirectionString.includes(\"w\")) squareDelta.x = -1\n    return squareDelta\n}\n\nclass SquareDelta_{\n    constructor(x, y){\n        this.x = x\n        this.y = y\n    }\n\n    equalto(sd){\n        return ( \n            ( this.x == sd.x ) &&\n            ( this.y == sd.y )\n        )\n    }\n\n    inverse(){\n        return SquareDelta(-this.x, -this.y)\n    }\n\n    angle(){\n        let pds = this.toPieceDirectionString()\n        return Math.PI / 4 * PIECE_DIRECTION_STRINGS.indexOf(pds)\n    }\n\n    toPieceDirectionString(){\n        let buff = \"\"\n        if(this.y){\n            buff += this.y < 0 ? \"n\" : \"s\"\n        }\n        if(this.x){\n            buff += this.x > 0 ? \"e\" : \"w\"\n        }\n        return buff\n    }\n\n    normalized(){\n        if((this.x == 0) && (this.y == 0)) return null\n        if((this.x * this.y) == 0){\n            return SquareDelta(Math.sign(this.x), Math.sign(this.y))\n        }else{\n            if(Math.abs(this.x) != Math.abs(this.y)) return null\n            return SquareDelta(Math.sign(this.x), Math.sign(this.y))\n        }\n    }\n}\nfunction SquareDelta(x, y){return new SquareDelta_(x, y)}\n\nconst NUM_SQUARES = 8\nconst LAST_SQUARE = NUM_SQUARES - 1\nconst BOARD_AREA = NUM_SQUARES * NUM_SQUARES\n\nconst STANDARD_START_FEN = \"rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1\"\nconst ANTICHESS_START_FEN = \"rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w - - 0 1\"\nconst RACING_KINGS_START_FEN = \"8/8/8/8/8/8/krbnNBRK/qrbnNBRQ w - - 0 1\"\nconst HORDE_START_FEN = \"rnbqkbnr/pppppppp/8/1PP2PP1/PPPPPPPP/PPPPPPPP/PPPPPPPP/PPPPPPPP w kq - 0 1\"\nconst THREE_CHECK_START_FEN = \"rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 3+3 0 1\"\nconst CRAZYHOUSE_START_FEN = \"rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR[] w KQkq - 0 1\"\nconst SCHESS_START_FEN = \"rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR[HEhe] w KQBCDFGkqbcdfg - 0 1\"\nconst EIGHTPIECE_START_FEN = \"jlsesqkbnr/pppppppp/8/8/8/8/PPPPPPPP/JLneSQKBNR w KQkq - 0 1 -\"\n\nconst WHITE = true\nconst BLACK = false\n\nfunction ROOK_DIRECTIONS(){return [\n    SquareDelta(1,0),\n    SquareDelta(-1,0),\n    SquareDelta(0,1),\n    SquareDelta(0,-1)\n]}\n\nfunction BISHOP_DIRECTIONS(){return [\n    SquareDelta(1,1),\n    SquareDelta(-1,-1),\n    SquareDelta(1,-1),\n    SquareDelta(-1,1)\n]}\n\nfunction QUEEN_DIRECTIONS(){return [\n    SquareDelta(1,0),\n    SquareDelta(-1,0),\n    SquareDelta(0,1),\n    SquareDelta(0,-1),\n    SquareDelta(1,1),\n    SquareDelta(-1,-1),\n    SquareDelta(1,-1),\n    SquareDelta(-1,1)\n]}\n\nfunction KING_DIRECTIONS(){return [\n    SquareDelta(1,0),\n    SquareDelta(-1,0),\n    SquareDelta(0,1),\n    SquareDelta(0,-1),\n    SquareDelta(1,1),\n    SquareDelta(-1,-1),\n    SquareDelta(1,-1),\n    SquareDelta(-1,1)\n]}\n\nfunction KNIGHT_DIRECTIONS(){return [\n    SquareDelta(2,1),\n    SquareDelta(2,-1),\n    SquareDelta(-2,1),\n    SquareDelta(-2,-1),\n    SquareDelta(1,2),\n    SquareDelta(1,-2),\n    SquareDelta(-1,2),\n    SquareDelta(-1,-2)\n]}\n\nfunction JAILER_DIRECTIONS(){return [\n    SquareDelta(1,0),\n    SquareDelta(-1,0),\n    SquareDelta(0,1),\n    SquareDelta(0,-1)\n]}\n\nfunction SENTRY_DIRECTIONS(){return [\n    SquareDelta(1,1),\n    SquareDelta(-1,-1),\n    SquareDelta(1,-1),\n    SquareDelta(-1,1)\n]}\n\nfunction PIECE_DIRECTIONS(kind){\n    if(kind == \"r\") return [ROOK_DIRECTIONS(), true]    \n    if(kind == \"b\") return [BISHOP_DIRECTIONS(), true]\n    if(kind == \"q\") return [QUEEN_DIRECTIONS(), true]\n    if(kind == \"k\") return [KING_DIRECTIONS(), false]\n    if(kind == \"n\") return [KNIGHT_DIRECTIONS(), false]    \n    if(kind == \"j\") return [JAILER_DIRECTIONS(), true]    \n    if(kind == \"s\") return [SENTRY_DIRECTIONS(), true]    \n}\n\nfunction getPieceDirection(piece){\n    if(piece.kind == \"l\") return [ [ piece.direction ] , true ]\n    return PIECE_DIRECTIONS(piece.kind)\n}\n\nfunction ADJACENT_DIRECTIONS(){\n    let adjDirs = []\n    for(let i=-1;i<=1;i++)for(let j=-1;j<=1;j++)if((i!=0)||(j!=0)) adjDirs.push(SquareDelta(i,j))\n    return adjDirs\n}\n\nconst PAWNDIRS_WHITE = {\n    baserank: 6,\n    promrank: 0,\n    pushtwo: SquareDelta(0, -2),\n    pushone: SquareDelta(0, -1),\n    captures: [SquareDelta(-1, -1), SquareDelta(1, -1)]\n}\n\nconst PAWNDIRS_BLACK = {\n    baserank: 1,\n    promrank: 7,\n    pushtwo: SquareDelta(0, 2),\n    pushone: SquareDelta(0, 1),\n    captures: [SquareDelta(-1, 1), SquareDelta(1, 1)]\n}\n\nfunction PAWNDIRS(color){\n    return color ? PAWNDIRS_WHITE : PAWNDIRS_BLACK\n}\n\nconst VARIANT_KEYS = [    \n    [ \"standard\", \"Standard\", STANDARD_START_FEN ],\n    [ \"chess960\", \"Chess960\", STANDARD_START_FEN ],\n    [ \"crazyhouse\", \"Crazyhouse\", CRAZYHOUSE_START_FEN ],\n    [ \"antichess\", \"Giveaway\", ANTICHESS_START_FEN ],\n    [ \"atomic\", \"Atomic\", STANDARD_START_FEN ],\n    [ \"horde\", \"Horde\", HORDE_START_FEN ],\n    [ \"kingOfTheHill\", \"King of the Hill\", STANDARD_START_FEN ],\n    [ \"racingKings\", \"Racing Kings\", RACING_KINGS_START_FEN ],\n    [ \"threeCheck\", \"Three-check\", THREE_CHECK_START_FEN ],\n    [ \"seirawan\", \"S-Chess\", SCHESS_START_FEN ],\n    [ \"eightpiece\", \"8-Piece\", EIGHTPIECE_START_FEN ],\n]\n\nconst INCLUDE_LIMITS = true\n\nfunction baseRank(color){\n    if(color == BLACK) return 0\n    return LAST_SQUARE\n}\n\nfunction getvariantstartfen(variant){\n    let key = VARIANT_KEYS.find((value)=>value[0]==variant)\n    if(key) return key[2]\n    return STANDARD_START_FEN\n}\n\nclass Square_{\n    constructor(file, rank){\n        this.file = file\n        this.rank = rank\n    }\n\n    adddelta(v){\n        return Square(this.file + v.x, this.rank + v.y)\n    }\n\n    equalto(sq){\n        if(!sq) return false\n        return ( this.file == sq.file ) && ( this.rank == sq.rank )\n    }\n\n    clone(){\n        return Square(this.file, this.rank)\n    }\n}\nfunction Square(file, rank){return new Square_(file, rank)}\n\nlet ALL_SQUARES = []\nfor(let rank=0;rank<NUM_SQUARES;rank++) for(let file=0;file<NUM_SQUARES;file++) ALL_SQUARES.push(Square(file, rank))\n\nclass Piece_{\n    constructor(kind, color, direction){\n        this.kind = kind\n        this.color = color\n        this.direction = direction\n    }\n\n    isempty(){\n        return !this.kind\n    }\n\n    toString(){\n        if(this.isempty()) return \"-\"\n        let buff = (!this.color) ? this.kind: this.kind.toUpperCase()\n        if(this.direction) buff += this.direction.toPieceDirectionString()\n        return buff\n    }\n\n    tocolor(color){\n        return Piece(this.kind, color, this.direction)\n    }\n\n    colorInverse(){\n        return this.tocolor(!this.color)\n    }\n\n    inverse(){\n        let colorInverse = this.colorInverse()\n\n        if(this.kind == \"l\"){\n            colorInverse.direction = colorInverse.direction.inverse()\n        }\n\n        return colorInverse\n    }\n\n    equalto(p){\n        if(this.direction && p.direction){\n            if(!this.direction.equalto(p.direction)) return false\n        }else if(this.direction || p.direction) return false\n\n        return ( \n            ( this.kind == p.kind ) &&\n            ( this.color == p.color )\n        )\n    }\n\n    clone(){\n        return Piece(this.kind, this.color, this.direction)\n    }\n\n    letter(){\n        if(!this.color) return this.kind\n        return this.kind.toUpperCase()\n    }\n}\nfunction Piece(kind, color, direction){return new Piece_(kind, color, direction)}\nfunction PieceL(letter){\n    if(letter == letter.toLowerCase()) return new Piece_(letter, BLACK)\n    return new Piece_(letter.toLowerCase(), WHITE)\n}\n\nclass Move_{\n    constructor(fromsq, tosq, prompiece, epclsq, epsq, promsq){\n        this.fromsq = fromsq\n        this.tosq = tosq\n        this.prompiece = prompiece\n        this.epclsq = epclsq\n        this.epsq = epsq\n        this.promsq = promsq\n    }\n\n    effpromsq(){\n        return this.promsq || this.tosq\n    }\n\n    roughlyequalto(move){\n        return this.fromsq.equalto(move.fromsq) && this.tosq.equalto(move.tosq)\n    }\n\n    strictlyEqualTo(move){\n        if(this.promsq){\n            if(!move.promsq) return false\n            if(!this.promsq.equalto(move.promsq)) return false\n        }\n        if(this.prompiece){\n            if(!move.prompiece) return false\n            if(!this.prompiece.equalto(move.prompiece)) return false\n        }\n        return this.fromsq.equalto(move.fromsq) && this.tosq.equalto(move.tosq)\n    }\n}\nfunction Move(fromsq, tosq, prompiece, epclsq, epsq, promsq){return new Move_(fromsq, tosq, prompiece, epclsq, epsq, promsq)}\n\nconst ADD_CANCEL = true\n\nfunction LANCER_PROMOTION_PIECES(color, addCancel){\n    let lpp = QUEEN_DIRECTIONS().map(qd => Piece(\"l\", color, qd))\n    if(addCancel) lpp = lpp.concat([\n        Piece(\"x\", BLACK, SquareDelta(0, 0))\n    ])\n    return lpp\n}\n\nconst FIFTY_MOVE_RULE_LIMIT     = 100\n\nclass ChessBoard_{\n    constructor(props){        \n        this.props = props || {}\n\n        this.variant = this.props.variant || DEFAULT_VARIANT\n        \n        this.rep = Array(BOARD_AREA).fill(null)    \n\n        this.stack = []\n\n        this.setfromfen()\n    }\n\n    PROMOTION_PIECES(color, addCancel){\n        let basicPieces = [\n            Piece(\"q\", color, SquareDelta(0, 0)),\n            Piece(\"r\", color, SquareDelta(1, 0)),\n            Piece(\"b\", color, SquareDelta(0, 1)),\n            Piece(\"n\", color, SquareDelta(1, 1)),\n        ]\n\n        if(this.IS_SCHESS()){\n            basicPieces = basicPieces.concat([\n                Piece(\"e\", color, SquareDelta(0, 2)),\n                Piece(\"h\", color, SquareDelta(1, 2)),                \n            ])\n            if(addCancel){\n                basicPieces = basicPieces.concat([                  \n                    Piece(\"x\", BLACK, SquareDelta(0, 3)),\n                ])\n            }\n        }else if(this.IS_EIGHTPIECE()){\n            basicPieces = LANCER_PROMOTION_PIECES(color, addCancel).concat([\n                Piece(\"j\", color, SquareDelta(-1, 2)),\n                Piece(\"q\", color, SquareDelta(0, 2)),\n                Piece(\"r\", color, SquareDelta(1, 2)),\n                Piece(\"s\", color, SquareDelta(-1, 3)),\n                Piece(\"b\", color, SquareDelta(0, 3)),\n                Piece(\"n\", color, SquareDelta(1, 3)),\n            ])\n        }else{\n            if(addCancel) basicPieces = basicPieces.concat([\n                Piece(\"x\", BLACK, SquareDelta(0, 2)),\n            ])\n        }\n\n        let maxy = basicPieces.map(p => p.direction).reduce((prev, curr) => curr.rank > prev ? curr.rank : prev, 0)\n\n        if(!color){\n            basicPieces.forEach(p => p.direction.y = maxy - p.direction.y)\n        }\n\n        return basicPieces\n    }\n\n    status(){\n        let lms = this.legalmovesforallpieces()\n\n        if(lms.length){\n            if(this.halfmoveclock >= FIFTY_MOVE_RULE_LIMIT){\n                return {\n                    terminated: true,\n                    result: 0.5,\n                    resultReason: \"fifty move rule\"\n                }\n            }\n            return {\n                terminated: false,\n                result: null,\n                resultReason: \"in progress\"\n            }\n        }\n\n        if(this.iskingincheck(this.turn)){\n            return {\n                terminated: true,\n                result: ( this.turn == WHITE ) ? 0 : 1,\n                resultReason: \"mate\"\n            }\n        }\n\n        return {\n            terminated: true,\n            result: 0.5,\n            resultReason: \"stalemate\"\n        }\n    }\n\n    IS_ATOMIC(){\n        return this.variant == \"atomic\"\n    }\n\n    IS_ANTICHESS(){\n        return this.variant == \"antichess\"\n    }\n\n    IS_SCHESS(){\n        return this.variant == \"seirawan\"\n    }\n\n    IS_EIGHTPIECE(){\n        return this.variant == \"eightpiece\"\n    }\n\n    pieceStore(){\n        if(!this.piecestorefen) return []\n        return this.piecestorefen.split(\"\").map(letter => PieceL(letter))\n    }\n\n    squareStore(){\n        if(!this.castlefen == \"-\") return []\n\n        return this.castlefen.split(\"\").map(letter => {\n            switch(letter){\n                case \"K\":                    \n                    return this.rookorigsq(\"k\", WHITE)\n                case \"Q\":\n                    return this.rookorigsq(\"q\", WHITE)\n                case \"k\":\n                    return this.rookorigsq(\"k\", BLACK)\n                case \"q\":\n                    return this.rookorigsq(\"q\", BLACK)\n                default:\n                    let lower = letter.toLowerCase()\n                    let color = letter == lower ? BLACK : WHITE\n                    let file = lower.charCodeAt(0) - \"a\".charCodeAt(0)\n                    let rank = baseRank(color)                \n                    return Square(file, rank)\n            }            \n        })\n    }\n\n    pieceStoreColor(color){\n        return this.pieceStore().filter(p => p.color == color)\n    }\n\n    adjacentsquares(sq){\n        return ADJACENT_DIRECTIONS().map((dir)=>sq.adddelta(dir)).filter((sq)=>this.squareok(sq))\n    }\n\n    jailerAdjacentSquares(sq){\n        return JAILER_DIRECTIONS().map(dir => sq.adddelta(dir)).filter(sq => this.squareok(sq))\n    }\n\n    isSquareJailedBy(sq, color){\n        return this.jailerAdjacentSquares(sq).filter(testsq => this.pieceatsquare(testsq).equalto(Piece(\"j\", color))).length > 0\n    }\n\n    kingsadjacent(){\n        let wkw = this.whereisking(WHITE)\n        if(!wkw) return false\n        let wkb = this.whereisking(BLACK)\n        if(!wkb) return false\n        return this.adjacentsquares(wkw).find((sq)=>sq.equalto(wkb))\n    }\n\n    algebtosquare(algeb){                \n        if(algeb == \"-\") return null\n        let file = algeb.charCodeAt(0) - \"a\".charCodeAt(0)\n        let rank = NUM_SQUARES - 1 - ( algeb.charCodeAt(1) - \"1\".charCodeAt(0) )\n        return Square(file, rank)\n    }\n\n    algebtomovesimple(algeb){\n        if(typeof algeb == \"undefined\") return null\n        if(algeb === null) return null\n        if((algeb == \"-\") || (algeb == \"\")) return null\n\n        return Move(\n            this.algebtosquare(algeb.substring(0,2)),\n            this.algebtosquare(algeb.substring(2,4))\n        )\n    }\n\n    get turnVerbal(){\n        return this.turn ? \"white\" : \"black\"\n    }\n\n    get reverseTurnVerbal(){\n        return this.turn ? \"black\" : \"white\"\n    }\n\n    setfromfen(fenopt, variantopt){        \n        this.variant = variantopt || this.variant\n        this.fen = fenopt || getvariantstartfen(this.variant)\n\n        this.fenparts = this.fen.split(\" \")\n        this.rawfen = this.fenparts[0]\n        this.rankfens = this.rawfen.split(\"/\")\n        this.turnfen = this.fenparts[1]           \n        this.castlefen = this.fenparts[2]\n        this.epfen = this.fenparts[3]  \n        this.halfmovefen = this.fenparts[4]          \n        this.fullmovefen = this.fenparts[5]          \n        this.disablefen = null\n        if(this.fenparts.length > 6) this.disablefen = this.fenparts[6]\n\n        // schess piece store\n        let rawfenparts = this.rawfen.split(/\\[|\\]/)\n        this.piecestorefen = rawfenparts.length > 1 ? rawfenparts[1] : \"\"        \n\n        this.turn = this.turnfen == \"w\" ? WHITE : BLACK\n\n        this.epsq = this.algebtosquare(this.epfen)\n\n        this.halfmoveclock = parseInt(this.halfmovefen)\n        this.fullmovenumber = parseInt(this.fullmovefen)\n\n        for(let i=0;i<BOARD_AREA;i++) this.rep[i] = Piece()\n\n        let i = 0        \n        for(let rankfen of this.rankfens){            \n            let rfa = Array.from(rankfen)\n            let rfai = 0\n            do{\n                let c = rfa[rfai++]\n                if((c>='0')&&(c<='9')){\n                    let repcnt = c.charCodeAt(0) - '0'.charCodeAt(0)\n                    for(let j=0;j<repcnt;j++){\n                        this.rep[i++] = Piece()\n                    }\n                }else{\n                    let kind = c\n                    let color = BLACK\n                    if((c>='A')&&(c<=\"Z\")){\n                        kind = c.toLowerCase()\n                        color = WHITE\n                    }   \n                    \n                    if(kind == \"l\"){\n                        // lancer\n                        let buff = rfa[rfai++]                                                \n                        if([\"n\", \"s\"].includes(buff)){\n                            let test = rfa[rfai]\n                            if([\"e\", \"w\"].includes(test)){\n                                buff += test\n                                rfai++\n                            }\n                        }                        \n                        this.rep[i++] = Piece(kind, color, pieceDirectionStringToSquareDelta(buff))\n                    }else{\n                        this.rep[i++] = Piece(kind, color)\n                    }                    \n                }\n            }while(rfai < rfa.length)\n        }                \n\n        return this\n    }\n\n    pieceatsquare(sq){\n        return this.rep[sq.file + sq.rank * NUM_SQUARES]\n    }\n\n    toString(){\n        let buff = \"\"\n        for(let sq of ALL_SQUARES){\n            buff += this.pieceatsquare(sq).toString()\n            if(sq.file == LAST_SQUARE) buff += \"\\n\"\n        }\n        return buff\n    }\n\n    squaretoalgeb(sq){return `${String.fromCharCode(sq.file + 'a'.charCodeAt(0))}${String.fromCharCode(NUM_SQUARES - 1 - sq.rank + '1'.charCodeAt(0))}`}\n\n    movetoalgeb(move, nochess960){\n        if(!move) return \"-\"\n\n        if(this.IS_SCHESS()){            \n            if(move.castling){                \n                let from = move.fromsq\n                let to = move.delrooksq\n                if(move.placeCastlingPiece){\n                    if(move.placeCastlingSquare.equalto(to)){\n                        [from, to] = [to, from]\n                    }                    \n                }\n                return `${this.squaretoalgeb(from)}${this.squaretoalgeb(to)}${move.placeCastlingPiece ? move.placeCastlingPiece.kind : ''}`\n            }\n            if(move.placePiece){\n                return `${this.squaretoalgeb(move.fromsq)}${this.squaretoalgeb(move.tosq)}${move.placePiece.kind}`\n            }\n        }\n\n        let fromp = this.pieceatsquare(move.fromsq)\n        let top = this.pieceatsquare(move.tosq)\n\n        let prom = move.prompiece ? move.prompiece.kind : \"\"\n\n        if((fromp.kind == \"l\") || ((fromp.kind == \"s\")) && (top.kind == \"l\")){\n            if(move.prompiece){\n                prom += move.prompiece.direction.toPieceDirectionString()\n            }else{\n                // lancer prompiece may be missing when lancer is pushed\n                prom += fromp.direction.toPieceDirectionString()\n            }            \n        }\n\n        if(move.promsq) prom += \"@\" + this.squaretoalgeb(move.promsq)\n\n        if((!nochess960) && move.castling){\n            return `${this.squaretoalgeb(move.fromsq)}${this.squaretoalgeb(move.delrooksq)}`\n        }\n\n        return `${this.squaretoalgeb(move.fromsq)}${this.squaretoalgeb(move.tosq)}${prom}`\n    }\n\n    squaretorepindex(sq){\n        return sq.file + sq.rank * NUM_SQUARES\n    }\n\n    setpieaceatsquare(sq, p){\n        this.rep[this.squaretorepindex(sq)] = p\n    }\n\n    squaresForPieceKind(kind, color){\n        return ALL_SQUARES.filter(sq => {\n            let p = this.pieceatsquare(sq)\n            return (p.kind == kind) && (p.color == color)\n        })\n    }\n\n    attacksonsquarebylancer(sq, color){\n        let attacks = []\n        for(let testsq of this.squaresForPieceKind(\"l\", color)){\n            let plms = this.pseudolegalmovesforpieceatsquare(this.pieceatsquare(testsq), testsq)\n            attacks = attacks.concat(plms.filter(plm => plm.tosq.equalto(sq)))\n        }\n        return attacks.map(attack => Move(attack.tosq, attack.fromsq))\n    }\n\n    attacksonsquarebysentry(sq, color){\n        let attacks = []\n        for(let testsq of this.squaresForPieceKind(\"s\", color)){\n            let plms = this.pseudolegalmovesforpieceatsquare(this.pieceatsquare(testsq), testsq)            \n            attacks = attacks.concat(plms.filter(plm => plm.promsq))\n                .filter(plm => plm.promsq.equalto(sq))\n        }        \n        return attacks.map(attack => Move(attack.promsq, attack.fromsq))\n    }\n\n    attacksonsquarebypieceInner(sq, p){                        \n        if(p.kind == \"l\") return this.attacksonsquarebylancer(sq, p.color)\n\n        if(p.kind == \"s\") return this.attacksonsquarebysentry(sq, p.color)\n\n        let plms = this.pseudolegalmovesforpieceatsquare(p.inverse(), sq)        \n\n        return plms.filter(move => this.pieceatsquare(move.tosq).equalto(p))\n    }\n\n    attacksonsquarebypiece(sq, p){\n        let attacks = this.attacksonsquarebypieceInner(sq, p)\n\n        return attacks.filter(attack => !this.isSquareJailedBy(attack.tosq, !p.color))\n    }\n\n    issquareattackedbycolor(sq, color){\n        let pieceLetters = ['q', 'r', 'b', 'n', 'k']\n        if(this.IS_SCHESS()) pieceLetters = pieceLetters.concat([\"e\", \"h\"])\n        if(this.IS_EIGHTPIECE()) pieceLetters = pieceLetters.concat([\"s\"])\n        for(let pl of pieceLetters){\n            if(this.attacksonsquarebypiece(sq, Piece(pl, color)).length > 0) return true\n        }\n        if(this.IS_EIGHTPIECE()){\n            for(let lancer of LANCER_PROMOTION_PIECES(color)){\n                if(this.attacksonsquarebypiece(sq, lancer).length > 0) return true\n            }\n        }\n        let pd = PAWNDIRS(!color)\n        for(let capt of pd.captures){\n            let testsq = sq.adddelta(capt)\n            if(this.squareok(testsq)){\n                if(this.pieceatsquare(testsq).equalto(Piece('p', color))) return true\n            }\n        }\n        return false\n    }\n\n    whereisking(color){\n        let searchking = Piece('k', color)\n        for(let sq of ALL_SQUARES){            \n            if(this.pieceatsquare(sq).equalto(searchking)) return sq\n        }\n        return null\n    }\n\n    iskingincheckAfterMove(move, color){\n        this.push(move)\n        let ischeck = this.iskingincheck(color)\n        this.pop()\n        return ischeck\n    }\n\n    iskingincheck(color){\n        let wk = this.whereisking(color)        \n        if(this.IS_EIGHTPIECE()){\n            if(!wk) return true\n        }\n        if(this.IS_ATOMIC()){\n            if(!wk) return true\n            let wkopp = this.whereisking(!color)        \n            if(!wkopp) return false\n            if(this.kingsadjacent()) return false\n        }else{\n            if(!wk) return false\n        }        \n        return this.issquareattackedbycolor(wk, !color)\n    }\n\n    deletecastlingrights(deleterightsstr, color){\n        if(this.castlefen == \"-\") return\n        if(color) deleterightsstr = deleterightsstr.toUpperCase()\n        let deleterights = deleterightsstr.split(\"\")        \n        let rights = this.castlefen.split(\"\")\n        for(let deleteright of deleterights) rights = rights.filter((right)=>right != deleteright)\n        this.castlefen = rights.length > 0 ? rights.join(\"\") : \"-\"\n    }\n\n    rookorigsq(side, color){\n        if(color){\n            if(side == \"k\") return Square(7, 7)\n            else return Square(0, 7)\n        }else{\n            if(side == \"k\") return Square(7, 0)\n            else return Square(0, 0)\n        }\n    }\n\n    rookorigpiece(side, color){\n        if(this.IS_EIGHTPIECE()){\n            if(side == \"q\") return Piece(\"j\", color)\n        }\n        return Piece(\"r\", color)\n    }\n\n    castletargetsq(side, color){\n        if(color){\n            if(side == \"k\") return Square(6, 7)\n            else return Square(2, 7)\n        }else{\n            if(side == \"k\") return Square(6, 0)\n            else return Square(2, 0)\n        }\n    }\n\n    rooktargetsq(side, color){\n        if(color){\n            if(side == \"k\") return Square(5, 7)\n            else return Square(3, 7)\n        }else{\n            if(side == \"k\") return Square(5, 0)\n            else return Square(3, 0)\n        }\n    }\n\n    squaresbetween(sq1orig, sq2orig, includelimits){        \n        let sq1 = sq1orig.clone()\n        let sq2 = sq2orig.clone()\n        let rev = sq2.file < sq1.file\n        if(rev){\n            let temp = sq1\n            sq1 = sq2\n            sq2 = temp\n        }\n        let sqs = []\n        if(includelimits) sqs.push(sq1.clone())\n        let currentsq = sq1\n        let ok = true\n        do{\n            currentsq.file++\n            if(currentsq.file < sq2.file) sqs.push(currentsq.clone())\n            else if(currentsq.file == sq2.file){\n                if(includelimits) sqs.push(currentsq.clone())\n                ok = false\n            }else{\n                console.log(\"warning, squaresbetween received equal files\")\n                ok = false\n            }\n        }while(ok)\n        return sqs\n    }\n\n    cancastle(side, color){        \n        if(!this.castlefen.includes(color ? side.toUpperCase() : side)) return false\n        let wk = this.whereisking(color)        \n        if(!wk) return false\n        let ro = this.rookorigsq(side, color)                        \n        let betweensqs = this.squaresbetween(wk, ro)              \n        if(betweensqs.length != betweensqs.filter((sq)=>this.pieceatsquare(sq).isempty()).length) return false        \n        let ct = this.castletargetsq(side, color)        \n        let passingsqs = this.squaresbetween(wk, ct, INCLUDE_LIMITS)        \n        for(let sq of passingsqs){\n            if(this.issquareattackedbycolor(sq, !color)) return false\n        }\n        if(this.IS_EIGHTPIECE()){\n            if(this.isSquareJailedBy(this.rookorigsq(side, color), !color)) return false\n            if(this.isKingJailed(color)) return false\n        }\n        return true\n    }\n\n    isKingJailed(color){\n        let wk = this.whereisking(color)\n\n        if(!wk) return false\n\n        return this.isSquareJailedBy(wk, !color)\n    }\n\n    getstate(){\n        return {\n            rep: this.rep.map((p)=>p.clone()),\n            turn: this.turn,            \n            epsq: this.epsq ? this.epsq.clone() : null,\n            halfmoveclock: this.halfmoveclock,\n            fullmovenumber: this.fullmovenumber,\n\n            rawfen: this.rawfen,\n            turnfen: this.turnfen,\n            castlefen: this.castlefen,\n            epfen: this.epfen,\n            halfmovefen: this.halfmovefen,\n            fullmovefen: this.fullmovefen,\n            disablefen: this.disablefen,\n            piecestorefen: this.piecestorefen,            \n\n            fen: this.fen\n        }\n    }\n\n    pushstate(){\n        this.stack.push(this.getstate())\n    }\n\n    setstate(state){\n        this.rep = state.rep\n        this.turn = state.turn        \n        this.epsq = state.epsq\n        this.halfmoveclock = state.halfmoveclock\n        this.fullmovenumber = state.fullmovenumber\n\n        this.rawfen = state.rawfen\n        this.turnfen = state.turnfen\n        this.castlefen = state.castlefen\n        this.epfen = state.epfen\n        this.halfmovefen = state.halfmovefen\n        this.fullmovefen = state.fullmovefen\n        this.disablefen = state.disablefen\n        this.piecestorefen = state.piecestorefen        \n\n        this.fen = state.fen\n    }\n\n    pop(){\n        this.setstate(this.stack.pop())\n    }\n\n    algebtomove(algeb){\n        if(!algeb) return null\n        if(algeb == \"-\") return null\n\n        let lms = this.legalmovesforallpieces()\n\n        let move = lms.find(testmove => this.movetoalgeb(testmove) == algeb)\n\n        if(move) return move\n\n        // try non chess960\n        return lms.find(testmove => this.movetoalgeb(testmove, NON_CHESS960) == algeb)\n    }\n\n    pushalgeb(algeb){\n        let move = this.algebtomove(algeb)\n\n        if(!move) return false\n\n        this.push(move)\n\n        return true\n    }\n\n    removePlacePieceFromStore(p){\n        let pstore = this.piecestorefen.split(\"\")\n        pstore = pstore.filter(pl => p.toString() != pl)\n        this.piecestorefen = pstore.join(\"\")\n    }\n\n    removeSquareFromStore(sq){\n        let algeb = this.squaretoalgeb(sq)\n        let fileLetter = algeb.substring(0, 1)\n\n        if(sq.rank == baseRank(WHITE)){\n            this.deletecastlingrights(fileLetter, WHITE)\n            return\n        }\n\n        if(sq.rank == baseRank(BLACK)){\n            this.deletecastlingrights(fileLetter, BLACK)\n            return\n        }\n    }\n\n    push(move){                \n        this.pushstate()\n\n        let fromp = this.pieceatsquare(move.fromsq)\n\n        // set squares\n\n        let top = this.pieceatsquare(move.tosq)        \n        this.setpieaceatsquare(move.fromsq, Piece())\n\n        if(move.placePiece){\n            this.setpieaceatsquare(move.fromsq, move.placePiece)\n\n            this.removePlacePieceFromStore(move.placePiece)            \n        }\n\n        if(move.placeMove){\n            this.removeSquareFromStore(move.fromsq)\n        }\n\n        // move from piece in any case, overwrite this with normal promotion if needed\n        this.setpieaceatsquare(move.tosq, fromp)\n\n        if(move.prompiece){                                    \n            this.setpieaceatsquare(move.effpromsq(), move.promsq ? move.prompiece : this.turn ? move.prompiece.tocolor(WHITE) : move.prompiece)\n        }   \n\n        if(move.promsq){\n            if(fromp.kind == \"s\"){\n                if(move.prompiece.kind != \"p\"){\n                    this.disablefen = this.movetoalgeb(Move(move.promsq, move.tosq))\n                }                \n            }\n        }else{\n            if(this.IS_EIGHTPIECE()){\n                this.disablefen = \"-\"\n            }            \n        }\n\n        if(move.epclsq){            \n            this.setpieaceatsquare(move.epclsq, Piece())\n        }\n\n        if(move.castling){\n            this.setpieaceatsquare(move.delrooksq, Piece())\n            this.setpieaceatsquare(move.putrooksq, move.putrookpiece)\n        }\n\n        // set castling rights\n\n        if(move.castling) this.deletecastlingrights(\"kq\", this.turn)\n\n        if(this.IS_SCHESS()){\n            if(fromp.kind == \"k\"){            \n                for(let side of [\"k\", \"q\"]){\n                    if(this.cancastle(side, this.turn)){\n                        let letter = side\n                        let newLetter = this.squaretoalgeb(this.rookorigsq(side, this.turn))[0]\n                        if(this.turn == WHITE){\n                            letter = letter.toUpperCase()\n                            newLetter = newLetter.toUpperCase()\n                        }\n                        this.castlefen = this.castlefen.replace(letter, newLetter)\n                    }\n                }\n            }\n        }\n\n        for(let side of [\"k\", \"q\"]){\n            let rosq = this.rookorigsq(side, this.turn)\n            let rop = this.pieceatsquare(rosq)\n            if(!rop.equalto(this.rookorigpiece(side, this.turn))) this.deletecastlingrights(side, this.turn)\n        }\n\n        if(fromp.kind == \"k\"){            \n            this.deletecastlingrights(\"kq\", this.turn)\n        }\n\n        // calculate new state\n\n        this.turn = !this.turn        \n        this.epsq = null\n        if(move.epsq) this.epsq = move.epsq\n\n        this.turnfen = this.turn ? \"w\" : \"b\"\n        if(this.turn){\n            this.fullmovenumber++\n            this.fullmovefen = `${this.fullmovenumber}`\n        }\n        let capture = false\n        if(!top.isempty()) capture = true\n        if(move.epclsq) capture = true\n        let pawnmove = fromp.kind == \"p\"\n        if(capture || pawnmove){\n            this.halfmoveclock = 0\n        }else{\n            this.halfmoveclock++\n        }\n\n        // atomic explosions\n        if(this.IS_ATOMIC()){\n            if(capture){                \n                this.setpieaceatsquare(move.tosq, Piece())\n                for(let sq of this.adjacentsquares(move.tosq)){                                        \n                    let ispawn = this.pieceatsquare(sq).kind == \"p\"                    \n                    if(!ispawn){                                 \n                        this.setpieaceatsquare(sq, Piece())\n                    }\n                }\n            }\n        }\n\n        // place castling\n        if(move.castling && this.IS_SCHESS()){            \n            if(move.placeCastlingPiece){\n                this.setpieaceatsquare(move.placeCastlingSquare, move.placeCastlingPiece)\n\n                this.removePlacePieceFromStore(move.placeCastlingPiece)\n            }\n        }\n\n        this.halfmovefen = `${this.halfmoveclock}`\n        this.epfen = this.epsq ? this.squaretoalgeb(this.epsq) : \"-\"\n\n        let rawfenbuff = \"\"\n        let cumul = 0\n\n        for(let sq of ALL_SQUARES){\n            let p = this.pieceatsquare(sq)\n            if(p.isempty()){\n                cumul++\n            }else{\n                if(cumul > 0){\n                    rawfenbuff += `${cumul}`\n                    cumul = 0\n                }\n                rawfenbuff += p.toString()\n            }\n            if( (cumul > 0) && ( sq.file == LAST_SQUARE ) ){\n                rawfenbuff += `${cumul}`\n                cumul = 0\n            }\n            if( (sq.file == LAST_SQUARE) && (sq.rank < LAST_SQUARE) ){\n                rawfenbuff += \"/\"\n            }\n        }\n\n        this.rawfen = rawfenbuff\n\n        let psb = this.IS_SCHESS() ? `[${this.piecestorefen}]` : \"\"\n\n        this.fen = this.rawfen + psb + \" \" + this.turnfen + \" \" + this.castlefen + \" \" + this.epfen + \" \" + this.halfmovefen + \" \" + this.fullmovefen\n\n        if(this.disablefen) this.fen += \" \" + this.disablefen\n    }\n\n    reportRawFen(){\n        let rawfenbuff = \"\"\n        let cumul = 0\n\n        for(let sq of ALL_SQUARES){\n            let p = this.pieceatsquare(sq)\n            if(p.isempty()){\n                cumul++\n            }else{\n                if(cumul > 0){\n                    rawfenbuff += `${cumul}`\n                    cumul = 0\n                }\n                rawfenbuff += p.toString()\n            }\n            if( (cumul > 0) && ( sq.file == LAST_SQUARE ) ){\n                rawfenbuff += `${cumul}`\n                cumul = 0\n            }\n            if( (sq.file == LAST_SQUARE) && (sq.rank < LAST_SQUARE) ){\n                rawfenbuff += \"/\"\n            }\n        }\n\n        return rawfenbuff\n    }\n\n    squareok(sq){\n        return ( sq.file >= 0 ) && ( sq.rank >= 0 ) && ( sq.file < NUM_SQUARES ) && ( sq.rank < NUM_SQUARES)\n    }\n\n    assertMaxPlmsGenDepth(depth){        \n        if(depth <= MAX_PLMS_GEN_DEPTH) return true\n        console.log(`max plms gen depth ${MAX_PLMS_GEN_DEPTH} exceeded at depth ${depth}`)\n        return false\n    }\n\n    pseudolegalmovesforpieceatsquare(p, sq, depthOpt){                        \n        let depth = depthOpt || 0\n        if(!this.assertMaxPlmsGenDepth(depth)) return []\n\n        let origPiece = this.pieceatsquare(sq)\n\n        if(this.IS_EIGHTPIECE()){\n            if(p.kind == \"s\"){\n                // remove sentry for move generation                \n                this.setpieaceatsquare(sq, Piece())\n            }\n        }\n\n        let acc = this.pseudolegalmovesforpieceatsquareinner(p, sq, depth)\n\n        let pstore = this.pieceStoreColor(p.color)\n        \n        if(this.IS_SCHESS()){\n            if(sq.rank == baseRank(p.color)){\n                if(this.squareStore().find(tsq => tsq.equalto(sq))) for(let psp of pstore){\n                    acc = acc.concat(this.pseudolegalmovesforpieceatsquareinner(p, sq, depth).map(psm => {                        \n                        psm.placePiece = psp\n                        return psm\n                    }))\n                }\n                acc = acc.map(psm => {\n                    psm.placeMove = true\n                    return psm\n                })\n            }            \n        }\n\n        // restore original piece in any case\n        this.setpieaceatsquare(sq, origPiece)\n\n        return acc\n    }\n\n    pseudolegalmovesforpieceatsquareinner(p, sq, depthOpt){\n        let depth = depthOpt || 0\n        if(!this.assertMaxPlmsGenDepth(depth)) return []\n\n        if(p.kind == \"e\"){\n            let acc = this.pseudolegalmovesforpieceatsquareinnerpartial(Piece(\"r\", p.color), sq, depth)\n            acc = acc.concat(this.pseudolegalmovesforpieceatsquareinnerpartial(Piece(\"n\", p.color), sq, depth))\n            return acc\n        }\n\n        if(p.kind == \"h\"){\n            let acc = this.pseudolegalmovesforpieceatsquareinnerpartial(Piece(\"b\", p.color), sq, depth)\n            acc = acc.concat(this.pseudolegalmovesforpieceatsquareinnerpartial(Piece(\"n\", p.color), sq, depth))\n            return acc\n        }\n\n        return this.pseudolegalmovesforpieceatsquareinnerpartial(p, sq, depth)\n    }\n\n    pushLancerMoves(plms, color, move){\n        for(let ds of PIECE_DIRECTION_STRINGS){\n            plms.push(Move(move.fromsq, move.tosq, Piece(\"l\", color, pieceDirectionStringToSquareDelta(ds))))\n        }\n    }\n\n    pseudolegalmovesforpieceatsquareinnerpartial(p, sq, depthOpt){                        \n        let depth = depthOpt || 0\n        if(!this.assertMaxPlmsGenDepth(depth)) return []\n\n        let dirobj = getPieceDirection(p)        \n        let plms = []                \n\n        let sentryCaptureAllowed = true\n        let pushTwoAllowed = true\n        let moveJailedProhibited = true\n\n        if(this.IS_EIGHTPIECE() && (depth > 0)){\n            // impose restrictions on sentry push\n            sentryCaptureAllowed = false            \n            pushTwoAllowed = false\n            // allow sentry to push jailed piece\n            // TODO: clarify this rule\n            moveJailedProhibited = false\n        }\n\n        if((p.kind == \"k\") && this.isSquareJailedBy(sq, !p.color)){\n            // jailed king can pass\n            plms.push(Move(sq, sq.clone()))\n        }\n\n        if(this.isSquareJailedBy(sq, !p.color) && moveJailedProhibited) return plms\n\n        if(dirobj){\n            for(let dir of dirobj[0]){                \n                var ok\n                var currentsq = sq                \n                do{                    \n                    currentsq = currentsq.adddelta(dir)                    \n                    ok = this.squareok(currentsq)                    \n                    if(ok){\n                        let tp = this.pieceatsquare(currentsq)                                                \n                        if(p.kind == \"l\"){\n                            if(tp.isempty()){                            \n                                this.pushLancerMoves(plms, p.color, Move(sq, currentsq))\n                            }else if(tp.color != p.color){\n                                this.pushLancerMoves(plms, p.color, Move(sq, currentsq))\n                                ok = false\n                            }else{\n                                // lancer can jump over own piece, but not capture it\n                            }\n                        }else{\n                            if(tp.isempty()){                            \n                                plms.push(Move(sq, currentsq))\n                            }else if(tp.color != p.color){\n                                if(p.kind == \"s\"){\n                                    // sentry push                                    \n                                    if(sentryCaptureAllowed){\n                                        let pushedPiece = this.pieceatsquare(currentsq)\n                                        let testPiece = pushedPiece.colorInverse()\n                                        let tplms = this.pseudolegalmovesforpieceatsquare(testPiece, currentsq, depth + 1)                                        \n                                        let sentryPushSquares = []\n                                        let usedSquares = []\n                                        tplms.forEach(tplm => {\n                                            // make sure only one move is added per target square\n                                            if(!usedSquares.find(usq => usq.equalto(tplm.tosq))){                                                \n                                                let testMove = Move(sq, currentsq, pushedPiece, null, null, tplm.tosq)\n                                                sentryPushSquares.push(tplm.tosq)\n                                                plms.push(testMove)              \n                                                usedSquares.push(tplm.tosq)                              \n                                            }                                            \n                                        })\n                                        if(pushedPiece.kind == \"l\"){\n                                            // nudge lancer\n                                            let emptyAdjacentSquares = this.adjacentsquares(currentsq)\n                                                .filter(testsq => this.pieceatsquare(testsq).isempty())\n                                            for(let eas of emptyAdjacentSquares){\n                                                let lancerNudgeDirs = [\n                                                    SquareDelta(eas.file - currentsq.file, eas.rank - currentsq.rank)\n                                                ]\n                                                for(let dir of lancerNudgeDirs){\n                                                    let nudgeMove = Move(sq, currentsq, Piece(\"l\", pushedPiece.color, dir), null, null, eas)\n                                                    nudgeMove.nudge = true                                                    \n                                                    if(!sentryPushSquares.find(sps => sps.equalto(nudgeMove.promsq))){\n                                                        plms.push(nudgeMove)\n                                                    }                                                    \n                                                }\n                                            }\n                                        }                                        \n                                    }\n                                }else{\n                                    if(p.kind != \"j\") plms.push(Move(sq, currentsq))\n                                }                                \n                                ok = false\n                            }else{\n                                ok = false\n                            }\n                        }                        \n                    }\n                }while(ok && dirobj[1])\n            }\n        }else if(p.kind == \"p\"){\n            let pdirobj = PAWNDIRS(p.color)\n            let pushonesq = sq.adddelta(pdirobj.pushone)\n            // sentry may push pawn to a square where push one is not possible\n            let pushoneempty = this.squareok(pushonesq) ? this.pieceatsquare(pushonesq).isempty() : false\n            if(pushoneempty){\n                if(pushonesq.rank == pdirobj.promrank){                                        \n                    for(let pp of this.PROMOTION_PIECES(p.color)){\n                        if(pp.kind != \"l\") pp.direction = null\n                        plms.push(Move(sq, pushonesq, pp))    \n                    }\n                }else{\n                    plms.push(Move(sq, pushonesq))\n                }                \n            }\n            if(sq.rank == pdirobj.baserank){\n                if(pushoneempty){\n                    let pushtwosq = sq.adddelta(pdirobj.pushtwo)\n                    if(this.pieceatsquare(pushtwosq).isempty() && pushTwoAllowed){                        \n                        // push two\n                        let setepsq = null\n                        for(let ocsqdelta of pdirobj.captures){\n                            let ocsq = pushonesq.adddelta(ocsqdelta)\n                            if(this.squareok(ocsq)){\n                                if(this.pieceatsquare(ocsq).equalto(Piece('p', !p.color))){                                    \n                                    setepsq = pushonesq\n                                }\n                            }\n                        }\n                        plms.push(Move(sq, pushtwosq, null, null, setepsq))\n                    }\n                }\n            }            \n            for(let captdir of pdirobj.captures){\n                let captsq = sq.adddelta(captdir)\n                if(this.squareok(captsq)){\n                    let captp = this.pieceatsquare(captsq)\n                    if(!captp.isempty() && captp.color != p.color){\n                        if(captsq.rank == pdirobj.promrank){\n                            for(let pp of this.PROMOTION_PIECES(p.color)){\n                                if(pp.kind != \"l\") pp.direction = null\n                                plms.push(Move(sq, captsq, pp))    \n                            }\n                        }else{\n                            plms.push(Move(sq, captsq))\n                        }                \n                    }                    \n                    if(captp.isempty() && captsq.equalto(this.epsq)){                        \n                        let epmove = Move(sq, captsq, null, captsq.adddelta(SquareDelta(0, -pdirobj.pushone.y)))                        \n                        plms.push(epmove)\n                    }\n                }                \n            }\n        }\n\n        if(this.IS_EIGHTPIECE()){\n            let disabledMove = this.algebtomovesimple(this.disablefen)\n\n            if(disabledMove){\n                plms = plms.filter(plm => !plm.roughlyequalto(disabledMove))\n                \n                if( (p.kind == \"l\") && (sq.equalto(disabledMove.fromsq)) ){\n                    // nudged lancer has special moves\n                    let ndirs = QUEEN_DIRECTIONS().filter(qd => !qd.equalto(p.direction))\n                    for(let dir of ndirs){\n                        let nok = true\n                        let ncurrentsq = sq\n                        while(nok){\n                            ncurrentsq = ncurrentsq.adddelta(dir)\n                            if(this.squareok(ncurrentsq)){\n                                let np = this.pieceatsquare(ncurrentsq)\n                                if(np.isempty()){\n                                    let nmove = Move(sq, ncurrentsq, Piece(\"l\", p.color, dir))\n                                    nmove.keepDirection = true\n                                    plms.push(nmove)\n                                }else{                                    \n                                    if(np.color != p.color){\n                                        let nmove = Move(sq, ncurrentsq, Piece(\"l\", p.color, dir))\n                                        nmove.keepDirection = true\n                                        plms.push(nmove)\n                                        nok = false\n                                    }                                    \n                                }\n                            }else{\n                                nok = false\n                            }\n                        }\n                    }\n                }\n\n                // disallow moving back towards sentry\n                plms = plms.filter(plm => {\n                    // knight and king are already taken care of, as they are not sliding pieces\n                    if((p.kind != \"n\") && (p.kind != \"k\")){                        \n                        let normDir = SquareDelta(\n                            disabledMove.tosq.file - disabledMove.fromsq.file,\n                            disabledMove.tosq.rank - disabledMove.fromsq.rank\n                        ).normalized()\n                        if(normDir){\n                            let testcurrentsq = plm.fromsq.adddelta(normDir)\n                            while(this.squareok(testcurrentsq)){\n                                if(plm.tosq.equalto(testcurrentsq)) return false\n                                testcurrentsq = testcurrentsq.adddelta(normDir)\n                            }\n                        }\n                    }\n                    return true\n                })\n            }\n        }\n\n        return plms\n    }\n\n    pseudolegalmovesforallpieces(){\n        let plms = []\n        for(let sq of ALL_SQUARES){\n            let p = this.pieceatsquare(sq)\n            if(!p.isempty() && (p.color == this.turn)){                \n                plms = plms.concat(this.pseudolegalmovesforpieceatsquare(p, sq))\n            }\n        }\n        return plms\n    }\n\n    movecheckstatus(move){        \n        this.push(move)\n        let status = {\n            meincheck: this.iskingincheck(!this.turn),\n            oppincheck: this.iskingincheck(this.turn)\n        }\n        this.pop()\n        return status\n    }\n\n    createCastlingMove(side){\n        let move = Move(this.whereisking(this.turn), this.castletargetsq(side, this.turn))\n        move.castling = true        \n        move.san = side == \"k\" ? \"O-O\" : \"O-O-O\"\n        move.delrooksq = this.rookorigsq(side, this.turn)\n        move.putrooksq = this.rooktargetsq(side, this.turn)\n        move.putrookpiece = this.rookorigpiece(side, this.turn)\n        move.passingSquares = this.squaresbetween(move.fromsq, move.delrooksq, INCLUDE_LIMITS)        \n        return move\n    }\n\n    legalmovesforallpieces(){\n        let lms = []\n        for(let move of this.pseudolegalmovesforallpieces()){\n            let mchst = this.movecheckstatus(move)            \n            if(!mchst.meincheck){\n                move.oppincheck = mchst.oppincheck\n                lms.push(move)\n            }\n        }\n        for(let side of [\"k\", \"q\"])\n        if(this.cancastle(side, this.turn)){\n            let move = this.createCastlingMove(side)\n            if(!this.iskingincheckAfterMove(move, this.turn)){\n                lms.push(move)\n                let pstore = this.pieceStoreColor(this.turn)\n                if(pstore.length){\n                    if(this.IS_SCHESS()){\n                        for(let psp of pstore){\n                            let moveK = this.createCastlingMove(side)\n                            moveK.placeCastlingPiece = psp\n                            moveK.placeCastlingSquare = move.fromsq\n                            moveK.san += \"/\" + psp.kind.toUpperCase() + this.squaretoalgeb(moveK.placeCastlingSquare)\n                            lms.push(moveK)\n                            let moveR = this.createCastlingMove(side)\n                            moveR.placeCastlingPiece = psp\n                            moveR.placeCastlingSquare = this.rookorigsq(side, this.turn)\n                            moveR.san += \"/\" + psp.kind.toUpperCase() + this.squaretoalgeb(moveR.placeCastlingSquare)\n                            lms.push(moveR)\n                        }\n                    }\n                }\n            }\n        }        \n        return lms\n    }\n\n    ismovecapture(move){\n        if(move.epclsq) return true\n        let top = this.pieceatsquare(move.tosq)\n        return(!top.isempty())        \n    }\n\n    santomove(san){\n        if(typeof san == \"undefined\") return null\n        if(san === null) return null\n        let lms = this.legalmovesforallpieces()\n        return lms.find((move)=>stripsan(this.movetosan(move)) == stripsan(san))\n    }\n\n    movetosan(move){        \n        let check = move.oppincheck ? \"+\" : \"\"        \n        if(move.oppincheck){            \n            this.push(move)\n            if(this.legalmovesforallpieces().length == 0) check = \"#\"\n            this.pop()\n        }\n\n        if(move.castling) return move.san + check\n\n        let fromp = this.pieceatsquare(move.fromsq)        \n        let capt = this.ismovecapture(move)\n        let fromalgeb = this.squaretoalgeb(move.fromsq)\n        let toalgeb = this.squaretoalgeb(move.tosq)\n        let prom = \"\"\n        if(move.prompiece){\n            prom = \"=\" + move.prompiece.kind.toUpperCase()\n\n            if(move.prompiece.kind == \"l\") prom += move.prompiece.direction.toPieceDirectionString()\n\n            if(move.promsq) prom += \"@\" + this.squaretoalgeb(move.promsq)\n        }\n        /*if(fromp.kind == \"l\"){\n            prom = move.prompiece.direction.toPieceDirectionString()\n        }*/\n        let place = move.placePiece ? \"/\" + move.placePiece.kind.toUpperCase() : \"\"\n\n        if(fromp.kind == \"p\"){\n            return capt ? fromalgeb[0] + \"x\" + toalgeb + place + prom + check : toalgeb + place + prom + check\n        }\n\n        let qualifier = \"\"                \n        let attacks = this.attacksonsquarebypiece(move.tosq, fromp)        \n        if(fromp.kind == \"l\"){\n            attacks = []\n            for(let lancer of LANCER_PROMOTION_PIECES(fromp.color)){\n                let lancerattacks = this.attacksonsquarebypiece(move.tosq, lancer)                                \n                for(let lancerattack of lancerattacks){                    \n                    if(!attacks.find(attack => attack.tosq.equalto(lancerattack.tosq))) attacks.push(lancerattack)\n                }                \n            }\n        }\n        let files = []\n        let ranks = []\n        let samefiles = false\n        let sameranks = false        \n        for(let attack of attacks){                        \n            if(files.includes(attack.tosq.file)) samefiles = true\n            else files.push(attack.tosq.file)\n            if(ranks.includes(attack.tosq.rank)) sameranks = true\n            else ranks.push(attack.tosq.rank)            \n        }\n        if(attacks.length > 1){\n            if(sameranks && samefiles) qualifier = fromalgeb\n            else if(samefiles) qualifier = fromalgeb[1]\n            else qualifier = fromalgeb[0]\n        }        \n        let letter = fromp.kind.toUpperCase()        \n        return capt ? letter + qualifier + \"x\" + toalgeb + prom + check : letter + qualifier + toalgeb + place + prom + check\n    }\n\n    squarefromalgeb(algeb){        \n        let file = algeb.charCodeAt(0) - \"a\".charCodeAt(0)\n        let rank = NUM_SQUARES - 1 - ( algeb.charCodeAt(1) - \"1\".charCodeAt(0) )\n        return Square(file, rank)\n    }\n\n    movefromalgeb(algeb){\n        let move = new Move(this.squarefromalgeb(algeb.slice(0,2)), this.squarefromalgeb(algeb.slice(2,4)))\n\n        if(algeb.includes(\"@\")){            \n            if(this.IS_SCHESS()){                \n                let sq = this.squarefromalgeb(algeb.slice(2,4))\n                let p = new Piece(algeb.slice(0,1).toLowerCase(), this.turnfen == \"w\")\n                return new Move(sq, sq, p)    \n            }            \n\n            if(this.IS_EIGHTPIECE()){\n                let sq = this.squarefromalgeb(algeb.match(/@(.*)/)[1])\n                move.promsq = sq\n            }\n        }        \n        return move\n    }\n}\nfunction ChessBoard(props){return new ChessBoard_(props)}\n\nfunction parseDrawing(comment){\n    if(comment.match(/:/)) return null\n\n    let drawing = {\n        kind: \"circle\",\n        color: \"green\",\n        thickness: 5,\n        opacity: 9,\n        squares: []\n    }   \n\n    let sqstr = null \n\n    if(comment.includes(\"@\")){\n        let parts = comment.split(\"@\")\n        comment = parts[0]\n        sqstr = parts[1]\n    }\n\n    let ok\n\n    do{\n        ok = false\n\n        let m = comment.match(/^([lwxz])(.*)/)    \n\n        if(m){\n            drawing.kind = {l: \"circle\", w: \"arrow\", x: \"square\", z: \"image\"}[m[1]]\n            comment = m[2]\n            ok = true\n        }\n\n        m = comment.match(/^([rnuy])(.*)/)\n        if(m){\n            drawing.color = {r: \"red\", n: \"green\", u: \"blue\", y: \"yellow\"}[m[1]]\n            comment = m[2]\n            ok = true\n        }\n        m = comment.match(/^t([0-9])(.*)/)\n        if(m){\n            drawing.thickness = parseInt(m[1])\n            comment = m[2]\n            ok = true\n        }\n        m = comment.match(/^o([0-9])(.*)/)\n        if(m){\n            drawing.opacity = parseInt(m[1])\n            comment = m[2]\n            ok = true\n        }\n    }while(ok)\n\n    ok = true\n\n    if(sqstr) comment = sqstr\n\n    if(drawing.kind == \"image\"){\n        m = comment.match(/^([^\\s#]*)(.*)/)\n        drawing.name = m[1]\n        return drawing\n    }\n\n    do{        \n        m = comment.match(/^([a-z][0-9])(.*)/)\n        if(m){            \n            drawing.squares.push(m[1])\n            comment = m[2]\n        }else{\n            ok = false\n        }\n    }while(ok)\n\n    return drawing\n}\n\nfunction parseDrawings(comment){\n    let drawings = []\n\n    let ok = true\n\n    do{\n        let m = comment.match(/([^#]*)#([^#\\s]*)(.*)/)\n        if(m){\n            comment = m[1] + m[3]\n            let pd = parseDrawing(m[2])\n            if(pd) drawings.push(pd)\n        }else{\n            ok = false\n        }\n    }while(ok)\n\n    return drawings\n}\n\nfunction parseProps(comment){\n    let props = {}\n\n    let ok = true\n\n    do{\n        let m = comment.match(/([^#]*)#([^#:]+):([^#\\s]*)(.*)/)\n        if(m){\n            comment = m[1] + m[4]\n            props[m[2]] = m[3]\n        }else{\n            ok = false\n        }\n    }while(ok)\n\n    return props\n}\n\nconst EXCLUDE_THIS = true\n\nconst GLICKO_INITIAL_RATING         = 1500\nconst GLICKO_INITIAL_RD             = 250\n\nclass Glicko_{\n    constructor(props){\n        this.fromBlob(props)\n    }\n\n    fromBlob(propsOpt){\n        let props = propsOpt || {}\n        this.rating = props.rating || GLICKO_INITIAL_RATING\n        this.rd = props.rd || GLICKO_INITIAL_RD\n        return this\n    }\n\n    serialize(){\n        return {\n            rating: this.rating,\n            rd: this.rd\n        }\n    }\n}\nfunction Glicko(props){return new Glicko_(props)}\n\nconst ANONYMOUS_USERNAME        = \"@nonymous\"\nconst SHOW_RATING               = true\n\nclass Player_{\n    constructor(props){\n        this.fromBlob(props)\n    }\n\n    equalTo(player){\n        return ( this.id == player.id ) && ( this.provider == player.provider )\n    }\n\n    displayName(){\n        return this.username || ANONYMOUS_USERNAME\n    }\n\n    qualifiedDisplayName(showRating){\n        let qdn = this.displayName()\n        if(this.provider) qdn += ` ( ${this.provider} )`\n        if(showRating) qdn += ` ${this.glicko.rating}`\n        return qdn\n    }\n\n    fromBlob(propsOpt){\n        let props = propsOpt || {}\n        this.id = props.id\n        this.username = props.username\n        this.provider = props.provider\n        this.glicko = Glicko(props.glicko)\n        this.seated = !!props.seated\n        this.seatedAt = props.seatedAt || null\n        this.index = props.index || 0\n        this.thinkingTime = props.thinkingTime || 0\n        this.startedThinkingAt = props.startedThinkingAt || null\n        this.offerDraw = props.offerDraw\n        return this\n    }\n\n    setIndex(index){\n        this.index = index\n        return this\n    }\n\n    serialize(){\n        return {\n            id: this.id,\n            username: this.username,\n            provider: this.provider,\n            glicko: this.glicko.serialize(),\n            seated: this.seated,\n            seatedAt: this.seatedAt,\n            index: this.index,\n            thinkingTime: this.thinkingTime,\n            startedThinkingAt: this.startedThinkingAt,\n            offerDraw: this.offerDraw,\n        }\n    }\n}\nfunction Player(props){return new Player_(props)}\n\nclass ChatMessage_{\n    constructor(props){\n        this.fromBlob(props)\n    }\n\n    fromBlob(propsOpt){\n        let props = propsOpt || {}\n        this.author = Player(props.author)\n        this.msg = props.msg || \"Chat message.\"\n        this.createdAt = new Date().getTime()\n        return this\n    }\n\n    serialize(){\n        return {\n            author: this.author.serialize(),\n            msg: this.msg\n        }\n    }\n\n    asText(){\n        return `${this.author.qualifiedDisplayName()} : ${this.msg}`\n    }\n}\nfunction ChatMessage(props){return new ChatMessage_(props)}\n\nclass Chat_{\n    constructor(props){\n        this.fromBlob(props)\n    }\n\n    postMessage(chatMessage){\n        this.messages.unshift(chatMessage)\n\n        if(chatMessage.msg == \"delall\"){\n            this.messages = []\n        }\n\n        while(this.messages.length > this.capacity) this.messages.pop()\n    }\n\n    fromBlob(propsOpt){\n        let props = propsOpt || {}\n        this.capacity = props.capacity || 100\n        this.messages = (props.messages || []).map(blob => ChatMessage(blob))\n        return this\n    }\n\n    serialize(){\n        return {\n            capacity: this.capacity,\n            messages: this.messages.map(message => message.serialize())\n        }\n    }\n\n    asText(){\n        return this.messages.map(message => message.asText()).join(\"\\n\")\n    }\n}\nfunction Chat(props){return new Chat_(props)}\n\nconst MAX_NUM_PLAYERS       = 2\n\nclass Players_{\n    constructor(props){\n        this.fromBlob(props)\n    }\n\n    forEach(func){\n        this.players.forEach(func)\n    }\n\n    hasPlayer(player){\n        return this.players.find(pl => pl.equalTo(player))\n    }\n\n    hasSeatedPlayer(player){\n        let find = this.hasPlayer(player)\n        if(!find) return false\n        return find.seated\n    }\n\n    fromBlob(propsOpt){\n        let props = propsOpt || {}\n        this.players = []\n        let repo = props.players || []\n        for(let i=0; i < MAX_NUM_PLAYERS; i++){\n            let blob = repo.length ? repo.shift() : null\n            let player = Player(blob).setIndex(i)\n            this.players.push(player)\n        }\n        return this\n    }\n\n    getByIndex(index){\n        return this.players[index]\n    }\n\n    setPlayer(player){        \n        this.players[player.index] = player\n    }\n\n    getByColor(color){\n        if(color) return this.getByIndex(1)\n        return this.getByIndex(0)\n    }\n\n    serialize(){\n        return {\n            players: this.players.map(player => player.serialize())\n        }\n    }\n}\nfunction Players(props){return new Players_(props)}\n\nconst DEFAULT_INITIAL_CLOCK = 3\nconst DEFAULT_INCREMENT     = 2\n\nclass Timecontrol_{\n    constructor(props){\n        this.fromBlob(props)\n    }\n\n    fromBlob(propsOpt){\n        let props = propsOpt || {}\n        this.initial = props.initial || DEFAULT_INITIAL_CLOCK\n        this.increment = props.increment || DEFAULT_INCREMENT\n        return this\n    }\n\n    serialize(){\n        return {\n            initial: this.initial,\n            increment: this.increment\n        }\n    }\n\n    toString(){\n        return `${this.initial} + ${this.increment}`\n    }\n}\nfunction Timecontrol(props){return new Timecontrol_(props)}\n\nclass GameNode_{\n    constructor(){        \n    }\n\n    getMove(){                \n        if(!this.parentid) return null\n        let board = ChessBoard().setfromfen(this.getparent().fen, this.parentgame.variant)\n        let move = board.santomove(this.gensan)        \n        return move\n    }\n\n    get strippedfen(){\n        return strippedfen(this.fen)\n    }\n\n    get analysiskey(){\n        return `analysis/${this.parentgame.variant}/${this.strippedfen}`\n    }\n\n    hasSan(san){\n        return this.childids.find(childid => this.parentgame.gamenodes[childid].gensan == san)\n    }\n\n    get depth(){\n        let depth = 0\n        let current = this\n        while(current.parentid){            \n            current = current.getparent()\n            depth++\n        }\n        return depth\n    }\n\n    stripCommentOfImages(){\n        this.comment = this.comment.replace(/#z[^#\\s]*/g, \"\")\n    }\n\n    stripCommentOfDelays(){\n        this.comment = this.comment.replace(/#delay:[^#\\s]*/g, \"\")\n    }\n\n    addImageToComment(name, setdelay){\n        if(setdelay) this.stripCommentOfDelays()\n        this.stripCommentOfImages()\n        this.comment += \"#z@\" + name\n        this.comment += \"#delay:\" + setdelay\n    }\n\n    fromblob(parentgame, blob){\n        this.parentgame = parentgame\n        this.id = blob.id\n        this.genalgeb = blob.genalgeb\n        this.gensan = blob.gensan\n        this.fen = blob.fen\n        this.childids = blob.childids || []\n        this.parentid = blob.parentid || null\n        this.weights = ( blob.weights || [0, 0] ).map(w => parseInt(w))\n        this.error = blob.error\n        this.priority = 0\n        this.comment = blob.comment || \"\"\n        this.hasEval = blob.hasEval || false\n        this.eval = blob.eval || null\n        return this\n    }\n\n    props(){\n        return parseProps(this.comment)\n    }\n\n    drawings(){\n        return parseDrawings(this.comment)\n    }\n\n    fullmovenumber(){\n        let parent = this.getparent()\n        if(!parent) return null\n        return parseInt(parent.fen.split(\" \")[5])\n    }\n\n    regid(){\n        return this.id.replace(/\\+/g, \"\\\\+\")\n    }\n\n    subnodes(){\n        let subnodes = []\n        for(let id in this.parentgame.gamenodes){\n            if( id.match(new RegExp(`^${this.regid()}_`)) ){\n                subnodes.push(this.parentgame.gamenodes[id])\n            }\n        }\n        return subnodes\n    }\n    \n    turn(){\n        return this.fen.match(/ w/)\n    }\n\n    getparent(){\n        if(this.parentid) return this.parentgame.gamenodes[this.parentid]\n        return null\n    }\n\n    siblings(excludethis){\n        if(!this.parentid) return []\n        let childs = this.getparent().sortedchilds()\n        if(excludethis) childs = childs.filter((child)=>child.id != this.id)\n        return childs\n    }\n\n    geterror(){\n        return this.error ? this.error : 0\n    }\n\n    moderror(dir){\n        this.error = this.geterror() + dir\n        if(this.error < 0) this.error = 0\n    }\n\n    moderrorrec(dir){        \n        let node = this\n        while(node){            \n            node.moderror(dir)            \n            node = node.getparent()\n            if(node) node = node.getparent()\n        }\n    }\n\n    opptrainweight(){\n        return this.weights[0] + this.weights[1]\n    }\n\n    metrainweight(){\n        return this.weights[0]\n    }\n\n    sortweight(){\n        return this.priority * 100 + this.weights[0] * 10 + this.weights[1]\n    }\n\n    sortchildids(ida, idb){\n        let a = this.parentgame.gamenodes[ida]\n        let b = this.parentgame.gamenodes[idb]\n        return b.sortweight() - a.sortweight()\n    }\n\n    sortedchilds(){\n        return this.childids.sort(this.sortchildids.bind(this)).map((childid)=>this.parentgame.gamenodes[childid])\n    }\n\n    sortedchildsopp(){\n        return this.sortedchilds().filter((child)=>child.opptrainweight() > 0)\n    }\n\n    sortedchildsme(){\n        return this.sortedchilds().filter((child)=>child.metrainweight() > 0)\n    }\n\n    revsortedchilds(){\n        return this.sortedchilds().reverse()\n    }\n\n    serialize(){\n        return{\n            id: this.id,\n            genalgeb: this.genalgeb,\n            gensan: this.gensan,\n            fen: this.fen,\n            childids: this.childids,\n            parentid: this.parentid,\n            weights: this.weights,\n            error: this.error,\n            comment: this.comment,\n            hasEval: this.hasEval,\n            eval: this.eval\n        }\n    }\n\n    clone(){\n        return GameNode().fromblob(this.parentgame, this.serialize())\n    }\n}\nfunction GameNode(){return new GameNode_()}\n\nconst UNSEAT                = true\nconst UNSEAT_PLAYER_DELAY   = 5 * 60 * 1000\n\nconst DURATION_VERBAL       = true\n\nfunction formatDuration(ms, verbal){\n    const sec = 1000\n    const min = 60 * sec\n    const hour = 60 * min\n    let buff = \"\"\n    let h = Math.floor(ms / hour)\n    if(ms > hour){        \n        ms = ms - h * hour\n        buff += `${h} hour`\n        if(h > 1) buff += \"s\"\n        buff += \" , \"\n    }\n    let m = Math.floor(ms / min)\n    if(ms > min){        \n        ms = ms - m * min\n        buff += `${m} minute`\n        if(m > 1) buff += \"s\"\n        buff += \" , \"\n    }\n    let s = Math.floor(ms / sec)\n    buff += `${s} second`\n    if(s > 1) buff += \"s\"\n    if(verbal) return buff\n    let hp = (\"\" + h).padStart(2, \"0\")\n    let mp = (\"\" + m).padStart(2, \"0\")\n    let sp = (\"\" + s).padStart(2, \"0\")\n    return `${hp}:${mp}:${sp}`\n}\n\nclass OrderedHash_{\n    constructor(blob){\n        this.fromBlob(blob)\n    }\n\n    fromBlob(blobOpt){        \n        this.blob = blobOpt || []\n        return this\n    }\n\n    getKey(key){\n        return this.blob.find(entry => entry[0] == key)\n    }\n\n    get(key){\n        let entry = this.getKey(key)\n        if(entry) return entry[1]\n        return null\n    }\n\n    setKey(key, value){\n        let entry = this.getKey(key)\n\n        if(entry){\n            entry[1] = value\n            return\n        }\n\n        this.blob.push([key, value])\n    }\n}\nfunction OrderedHash(blobOpt){return new OrderedHash_(blobOpt)}\n\nfunction displayNameForVariantKey(variantKey){\n    return variantKey.substring(0,1).toUpperCase() + variantKey.substring(1)\n}\n\nfunction pgnVariantToVariantKey(pgnVariant){    \n    return pgnVariant.substring(0,1).toLowerCase() + pgnVariant.substring(1)\n}\n\nfunction parsePgnPartsFromLines(lines){\n    let parseHead = true\n    let parseBody = false\n    let headers = []\n    let bodyLines = []\n\n    // remove leading empty lines\n    while(lines.length && (!lines[0])) lines.shift()\n    \n    do{\n        let line = lines.shift()\n        let m\n        if(parseHead){\n            if(!line){\n                parseHead = false\n            }else if(m = line.match(/^\\[([^ ]+) \\\"([^\\\"]+)/)){                \n                headers.push([m[1], m[2]])\n            }else{\n                parseHead = false\n                lines.unshift(line)\n            }\n        }else{\n            if(parseBody){\n                if(!line){\n                    return [lines, headers, bodyLines.join(\"\\n\")]\n                }else{\n                    bodyLines.push(line)\n                }\n            }else if(line){\n                parseBody = true\n                bodyLines.push(line)\n            }\n        }\n    }while(lines.length)\n    \n    return [lines, headers, bodyLines.join(\"\\n\")]\n}\n\nconst UPDATE_THINKING_TIME      = true\nconst FOLD_REPETITION           = 3\n\nclass Game_{\n    constructor(props){       \n        this.fromblob(props)\n    }\n\n    getRandomMove(){\n        let lms = this.board.legalmovesforallpieces()\n\n        if(lms.length){\n            let index = Math.floor(Math.random() * lms.length)\n\n            let move = lms[index]\n\n            return move\n        }\n\n        return null\n    }\n\n    getForwardMove(){\n        let scs = this.getcurrentnode().sortedchilds()        \n        if(!scs.length) return null\n        return scs[0].getMove()\n    }\n\n    offerDraw(player){\n        let find = this.players.hasPlayer(player)\n        if(!find){\n            return `Only playing sides can offer draw.`\n        }\n        find.offerDraw = true\n        if(this.drawAccepted()){\n            this.terminate(\n                0.5,\n                \"draw agreed\"\n            )\n        }\n        return true\n    }\n\n    revokeDraw(player){\n        let find = this.players.hasPlayer(player)\n        if(!find){\n            return `Only playing sides can revoke draw.`\n        }\n        find.offerDraw = false\n        return true\n    }\n\n    drawOffered(){\n        let result = false\n        this.players.forEach(pl => {\n            if(pl.offerDraw) result = true\n        })\n        return result\n    }\n\n    drawAccepted(){\n        let result = true\n        this.players.forEach(pl => {\n            if(!pl.offerDraw) result = false\n        })\n        return result\n    }\n\n    turnPlayer(){\n        return this.players.getByColor(this.board.turn)\n    }\n\n    oppTurnPlayer(){\n        return this.players.getByColor(!this.board.turn)\n    }\n\n    canMakeMove(player){        \n        return this.turnPlayer().equalTo(player)\n    }\n\n    turnMoveTime(){\n        return new Date().getTime() - this.turnPlayer().startedThinkingAt\n    }\n\n    turnTimeLeft(){\n        return Math.max(this.turnPlayer().thinkingTime - this.turnMoveTime(), 0)\n    }\n\n    checkTurnTimedOut(updateThinkingTime){\n        if(!this.inProgress) return false\n        let tl = this.turnTimeLeft()        \n        if(updateThinkingTime) this.turnPlayer().thinkingTime = tl\n        if(tl <= 0){            \n            this.terminate(\n                (this.board.turn == WHITE) ? 0 : 1,\n                \"flagged\"\n            )\n            return true\n        }\n        return false\n    }\n\n    isRepetition(times){\n        let mults = {}\n\n        for(let id in this.gamenodes){\n            let node = this.gamenodes[id]\n            let sfen = strippedfen(node.fen)\n            if(mults[sfen]) mults[sfen]++\n            else mults[sfen] = 1\n            if(mults[sfen] >= times) return true\n        }\n\n        return false\n    }\n\n    makeSanMoveResult(san){\n        if(this.checkTurnTimedOut(UPDATE_THINKING_TIME)){\n            return true\n        }else if(this.makeSanMove(san)){\n            let status = this.board.status()\n            if(status.terminated){\n                this.terminate(\n                    status.result,\n                    status.resultReason\n                )\n                return true\n            }\n            if(this.isRepetition(FOLD_REPETITION)){\n                this.terminate(\n                    0.5,\n                    \"threefold repetition\"\n                )\n                return true\n            }\n            this.oppTurnPlayer().thinkingTime += this.timecontrol.increment * 1000\n            this.startThinking()\n            return true\n        }\n        return `Illegal move.`\n    }\n\n    makeSanMove(sanOpt){        \n        let m = sanOpt.match(/[0-9\\.]*(.*)/)\n\n        let san = m[1]\n\n        if(!san) return false\n\n        let move = this.board.santomove(san)\n\n        if(move){\n            this.makemove(move)\n            return true\n        }\n\n        return false\n    }\n\n    mergeGameRecursive(node){\n        for(let child of node.sortedchilds()){\n            if(this.makeSanMove(child.gensan)){\n                if(child.comment) this.getcurrentnode().comment = child.comment\n                this.mergeGameRecursive(child)\n                this.back()\n            }\n        }\n    }\n\n    mergeGame(game){\n        let gameRootFen = game.getrootnode().fen\n        let rootFen = this.getcurrentnode().fen\n\n        if(gameRootFen != rootFen){\n            return `Merge game failed. Game root fen does not match current fen.`\n        }\n\n        this.mergeGameRecursive(game.getrootnode())\n\n        return `Game merged ok.`\n    }\n\n    buildFromPGN(headers, body, variantOpt){\n        let variant = variantOpt || DEFAULT_VARIANT\n\n        let board = ChessBoard().setfromfen(null, variant)\n        let fen = board.fen\n\n        this.pgnHeaders = OrderedHash(headers)\n        this.pgnBody = body\n\n        let setVariant = this.pgnHeaders.get(\"Variant\")\n        let setFen = this.pgnHeaders.get(\"FEN\")\n\n        if(setVariant) variant = pgnVariantToVariantKey(setVariant)\n        if(setFen) fen = setFen\n\n        this.setfromfen(fen, variant)\n\n        let acc = \"\"\n        let commentLevel = 0\n\n        let nodeStack = []\n\n        for(let c of (this.pgnBody + \" \").split(\"\")){            \n            if(c == \"(\"){\n                if(commentLevel){\n                    acc += c\n                }else{\n                    if(acc){\n                        this.makeSanMove(acc)\n                        acc = \"\"                  \n                    }                    \n                    nodeStack.push(this.getcurrentnode().clone())                                                       \n                    this.back()\n                }                \n            }else if(c == \")\"){\n                if(commentLevel){\n                    acc += c\n                }else{  \n                    if(acc){\n                        this.makeSanMove(acc)\n                        acc = \"\"                  \n                    }                    \n                    this.setfromnode(nodeStack.pop())                    \n                }                   \n            }else if(c == \"{\"){                \n                if(commentLevel){\n                    acc += \"{\"\n                }else{\n                    if(acc){\n                        this.makeSanMove(acc)\n                        acc = \"\"                  \n                    }                    \n                }\n                commentLevel++                \n            }else if(c == \"}\"){\n                if(commentLevel){                    \n                    commentLevel--\n                    if(commentLevel){\n                        acc += \"}\"\n                    }else{\n                        if(acc){\n                            this.getcurrentnode().comment = acc\n                            acc = \"\"\n                        }\n                    }\n                }                \n            }else{\n                if(c == \" \"){\n                    if(commentLevel){\n                        acc += \" \"\n                    }else if(acc){\n                        this.makeSanMove(acc)\n                        acc = \"\"\n                    }\n                }else{\n                    acc += c\n                }\n            }\n        }\n\n        return this\n    }\n\n    parsePGN(pgn, variantOpt){\n        let parseResult = parsePgnPartsFromLines(pgn.split(\"\\n\"))\n\n        this.buildFromPGN(parseResult[1], parseResult[2], variantOpt)\n\n        return [ parseResult[0], this ]\n    }\n\n    setHeaders(blob){\n        this.pgnHeaders.fromBlob(blob)\n        this.setDefaultPgnHeaders()\n    }\n\n    nodesForFen(fen){\n        return Object.entries(this.gamenodes)\n            .filter(gne => gne[1].parentid)\n            .filter(gne => strippedfen(gne[1].getparent().fen) == strippedfen(fen))\n            .map(gne => gne[1])\n    }\n\n    bookForFen(fen){        \n        let book = {}\n        this.nodesForFen(fen).forEach(node => {\n            if(!book[node.genalgeb]) book[node.genalgeb] = [0,0]\n            book[node.genalgeb][0] += node.weights[0]\n            book[node.genalgeb][1] += node.weights[1]\n        })\n        return book\n    }\n\n    weightedAlgebForFen(fen, indices){\n        let buff = []\n        let book = this.bookForFen(fen)        \n        for(let algeb in book){\n            let mult = indices.reduce((acc, curr) => acc + book[algeb][curr], 0)\n            buff = buff.concat(Array(mult).fill(algeb))\n        }                \n        if(!buff.length) return null\n        return buff[Math.floor(Math.random() * buff.length)]\n    }\n\n    get allNodes(){\n        return Object.entries(this.gamenodes).map(entry => entry[1])\n    }\n\n    get forAllNodes(){\n        return this.allNodes.forEach\n    }\n\n    removePriority(){\n        this.forAllNodes(node => node.priority = 0)\n    }\n\n    fen(){\n        return this.getcurrentnode().fen\n    }\n\n    merge(g){\n        this.removePriority()\n        g.tobegin()\n        this.tobegin()\n        if(g.fen() != this.fen()) return \"Merge failed, starting positions don't match.\"\n        let i = 0\n        while(g.forward()){\n            let san = g.getcurrentnode().gensan\n            let move = this.board.santomove(san)\n            if(!move) return `Merge detected invalid san ( move: ${i}, san: ${san} ).`\n            this.makemove(move)\n            let currentnode = this.getcurrentnode()\n            for(let sibling of currentnode.siblings(EXCLUDE_THIS)) sibling.priority = 0\n            currentnode.priority = 1\n            i++\n        }\n        return `Merged all ${i} move(s) ok.`\n    }\n\n    fromsans(sans){\n        this.setfromfen(getvariantstartfen(this.variant))\n        for(let san of sans){\n            let move = this.board.santomove(san)\n            if(move){\n                this.makemove(move)\n            }else{\n                return this\n            }\n        }\n        return this\n    }\n\n    setfromfen(fenopt, variantopt){        \n        this.variant = variantopt || this.variant \n        this.board.setfromfen(fenopt, this.variant)\n        this.gamenodes = {\n            root: GameNode().fromblob(this, {\n                parentgame: this,\n                id: \"root\",\n                genalgeb: null,\n                gensan: null,\n                fen: this.board.fen                \n            })\n        }\n        this.currentnodeid = \"root\"\n        this.pgnHeaders.blob = []\n        this.setDefaultPgnHeaders()\n        return this\n    }\n\n    reset(variant){\n        this.setfromfen(null, variant)\n    }\n\n    setfromnode(node){\n        this.currentnodeid = node.id\n        this.board.setfromfen(this.getcurrentnode().fen, this.variant)\n    }\n\n    makemove(move){\n        let algeb = this.board.movetoalgeb(move)\n        let san = this.board.movetosan(move)\n\n        this.board.push(move)\n\n        this.makemovenode(GameNode().fromblob(this, {                        \n            genalgeb: algeb,\n            gensan: san,\n            fen: this.board.fen\n        }))\n    }\n\n    setTimecontrol(player, blob){\n        if(this.players.hasSeatedPlayer(player)){\n            this.variant = blob.variant\n            this.timecontrol = Timecontrol(blob.timecontrol)\n            return true\n        }else{\n            return `Only seated players can set time control.`\n        }\n    }\n\n    hasAllPlayers(){\n        return this.players.getByColor(WHITE).seated && this.players.getByColor(BLACK).seated\n    }\n\n    terminate(result, reason){\n        this.inProgress = false\n        this.terminated = true\n        this.terminatedAt = new Date().getTime()\n        this.result = result\n        this.resultReason = reason\n        this.players.forEach(pl => {\n            pl.seated = false\n            pl.seatedAt = null\n        })\n\n        if(this.terminationCallback){\n            this.terminationCallback()\n        }\n    }\n\n    resignPlayer(player){\n        if(!this.inProgress) return `You can only resign an ongoing game.`\n        if(this.players.hasPlayer(player)){            \n            if(player.index == 0) this.terminate(\n                1,\n                \"black resigned\"\n            )\n            else this.terminate(\n                0,\n                \"white resigned\"\n            )\n            return true\n        }else{\n            return `You can only resign your own game.`\n        }\n    }\n\n    sitPlayer(player, UNSEAT){\n        let pl = this.players.getByIndex(player.index)\n        if(pl.seated && (pl.id != player.id)){\n            let elapsed = new Date().getTime() - pl.seatedAt\n            if(elapsed < UNSEAT_PLAYER_DELAY) return `Player can be unseated after ${formatDuration(UNSEAT_PLAYER_DELAY - elapsed, DURATION_VERBAL)}.`\n        }\n        if(UNSEAT){\n            player = Player().setIndex(player.index)\n        }else{            \n            if(this.players.hasSeatedPlayer(player)) return `Already seated.`\n            player.seated = true\n            player.seatedAt = new Date().getTime()\n        }        \n        this.players.setPlayer(player)\n        if(this.hasAllPlayers()){\n            this.startGame()\n        }else{\n            if(this.terminated){\n                this.playerSeatedAfterTermination = true        }\n            }            \n        return true\n    }\n\n    startThinking(){\n        this.turnPlayer().startedThinkingAt = new Date().getTime()\n    }\n\n    startGame(){\n        this.inProgress = true\n        this.terminated = false\n        this.result = null\n        this.resultReason = \"in progress\"\n        this.setfromfen(null, this.variant)\n        this.players.forEach(pl => {\n            pl.thinkingTime = this.timecontrol.initial * 60 * 1000\n            pl.offerDraw = false\n        })\n        this.startedAt = new Date().getTime()\n        this.playerSeatedAfterTermination = false\n        this.chat.messages = []\n        this.startThinking()\n        if(this.startCallback) this.startCallback()\n    }\n\n    // gbl\n    fromblob(blobOpt){\n        let blob = blobOpt || {}\n\n        this.board = ChessBoard()\n        this.variant = blob.variant || DEFAULT_VARIANT                \n        this.pgnHeaders = OrderedHash(blob.pgnHeaders)\n        this.pgnBody = blob.pgnBody || \"*\"        \n\n        this.setfromfen(null, null)                \n        let gamenodesserialized = blob.gamenodes || {}        \n        for(let id in gamenodesserialized){\n            this.gamenodes[id] = GameNode().fromblob(this, gamenodesserialized[id])\n        }\n        this.currentnodeid = blob.currentnodeid || \"root\"\n        this.board.setfromfen(this.getcurrentnode().fen, this.variant)\n\n        this.setDefaultPgnHeaders()\n\n        this.flip = !!blob.flip        \n        this.animations = blob.animations || []\n        this.selectedAnimation = blob.selectedAnimation\n        this.animationDescriptors = blob.animationDescriptors || {}                \n        this.timecontrol = Timecontrol(blob.timecontrol)\n        this.players = Players(blob.players)\n        this.inProgress = !!blob.inProgress\n        this.terminated = !!blob.terminated\n        this.result = blob.result\n        this.resultReason = blob.resultReason || \"in progress\"\n        this.startedAt = blob.startedAt || null\n        this.terminatedAt = blob.terminatedAt || null\n        this.chat = Chat(blob.chat)\n        this.playerSeatedAfterTermination = blob.playerSeatedAfterTermination\n        return this\n    }\n\n    playersVerbal(){\n        return `${this.players.getByColor(WHITE).qualifiedDisplayName(SHOW_RATING)} - ${this.players.getByColor(BLACK).qualifiedDisplayName(SHOW_RATING)}`\n    }\n\n    resultVerbal(){\n        if(this.result == 1) return \"1 - 0\"\n        if(this.result == 0) return \"0 - 1\"\n        return \"1/2 - 1/2\"\n    }\n\n    setDefaultPgnHeaders(){\n        this.pgnHeaders.setKey(\"Variant\", displayNameForVariantKey(this.variant))\n        this.pgnHeaders.setKey(\"FEN\", this.getrootnode().fen)\n    }\n\n    subtree(node, nodes, line){\n        let clone = node.clone()\n        if(!nodes){\n            nodes = {}\n            clone.id = \"root\"\n            clone.genalgeb = null\n            clone.gensan = null\n            clone.parentid = null\n            line = [\"root\"]\n        }else{\n            clone.id = line.join(\"_\")\n            clone.parentid = line.slice(0, line.length -1).join(\"_\")\n        }\n        nodes[clone.id] = clone\n        let newchildids = []\n        for(let child of node.sortedchilds()){\n            let childline = line.concat(child.gensan)\n            this.subtree(child, nodes, childline)\n            let childid = childline.join(\"_\")\n            newchildids.push(childid)            \n        }\n        clone.childids = newchildids\n        return nodes\n    }\n\n    subtreeSize(nodeOpt){\n        let node = nodeOpt || this.getcurrentnode()\n        return Object.entries(this.subtree(node)).length\n    }\n\n    reduce(nodeOpt){\n        let node = nodeOpt || this.getcurrentnode()\n        return Game().fromblob({...this.serialize(), ...{            \n            gamenodes: this.subtree(node),\n            currentnodeid: \"root\"\n        }})\n    }\n\n    reduceLine(nodeOpt){\n        let current = nodeOpt || this.getcurrentnode()\n\n        while(current.parentid){\n            let child = current\n            current = current.getparent()\n            if(current.childids.length > 1){\n                current.sortedchilds().slice(1).forEach(child => {\n                    for(let id in this.gamenodes){\n                        if( id.match(new RegExp(`^${child.regid()}`)) ){\n                            delete this.gamenodes[id]\n                        }\n                    }            \n                })\n            }\n            current.childids = [child.id]\n        }\n    }\n\n    pgninfo(fromroot){\n        let rootnode = this.getrootnode()\n        let pgnMoves = []\n        let oldcurrentnodeid = this.currentnodeid\n        if(fromroot){            \n            this.currentnodeid = \"root\"\n            while(this.forward()){\n                pgnMoves.push(this.getcurrentnode().gensan)\n            }            \n        }else{\n            let currentnode = this.getcurrentnode()\n            while(this.back()){\n                pgnMoves.unshift(currentnode.gensan)\n                currentnode = this.getcurrentnode()\n            }\n        }\n        this.currentnodeid = oldcurrentnodeid\n        return {\n            variant: this.variant,\n            initialFen: rootnode.fen,\n            pgnMoves: pgnMoves,\n            white: \"?\",\n            black: \"?\",\n            date: \"?\"\n        }\n    }\n\n    movewithnumber(node, force, docomments, reportAsUCI, ignoreNumber){\n        let fenparts = node.fen.split(\" \")\n        let number = fenparts[5] + \".\"\n        if(fenparts[1] == \"w\") number = \"\" + ( parseInt(fenparts[5]) - 1 ) + \"..\"\n        if(ignoreNumber) number = \"\"\n        let comments = \"\"\n        if(docomments) if(node.comment) comments = ` { ${node.comment} }`\n        if(typeof docomments == \"object\"){            \n            comments = \"\"\n            let analysisinfo = docomments[node.analysiskey]\n            if(analysisinfo){\n                let rai = new RichAnalysisInfo(analysisinfo)\n                if(rai.hasScorenumerical){\n                    let scorenumerical = -rai.scorenumerical\n                    comments = ` { ${(scorenumerical > 0 ? \"+\":\"\") + scorenumerical} }`\n                }                \n            }\n            if(node.hasEval){\n                let scorenumerical = -node.eval\n                comments = ` { ${(scorenumerical > 0 ? \"+\":\"\") + scorenumerical} }`\n            }\n        }\n        return `${((fenparts[1] == \"b\")||force)?(number ? number + \" \" : \"\"):\"\"}${reportAsUCI ? node.genalgeb : node.gensan}${comments}`\n    }\n\n    line(docomments, nodeOpt, reportAsUCI, ignoreNumber){\n        let current = nodeOpt || this.getcurrentnode()\n        let nodes = []\n        while(current){\n            nodes.unshift(current)\n            current = current.getparent()\n        }\n        nodes.shift()\n        let first = true        \n        return nodes.map((node)=>{            \n            let mn = this.movewithnumber(node, first, docomments, reportAsUCI, ignoreNumber)\n            first = false            \n            return mn\n        }).join(\" \")\n    }\n\n    multiPGN(params){        \n        let childs = params.rootNode.sortedchilds()\n\n        if(!childs.length){            \n            return params.buff\n        }\n\n        let mainChild = childs[0]\n\n        if(!params.variationStart) params.buff += \" \"\n        params.buff += this.movewithnumber(mainChild, params.variationStart, params.docomments, params.reportAsUCI)\n\n        if(childs.length > 1){            \n            for(let child of childs.slice(1)){\n                params.buff += \" ( \"                            \n                params.buff += this.movewithnumber(child, true, params.docomments, params.reportAsUCI)\n                params.buff = this.multiPGN({\n                    docomments: params.docomments,\n                    rootNode: child,\n                    variationStart: false,\n                    buff: params.buff\n                })\n                params.buff += \" )\"            \n            }            \n        }\n\n        return this.multiPGN({\n            docomments: params.docomments,\n            rootNode: mainChild,\n            variationStart: false,\n            buff: params.buff,\n            reportAsUCI: params.reportAsUCI\n        })\n    }\n\n    reportPgnHeaders(rootNode){\n        this.pgnHeaders.setKey(\"FEN\", rootNode ? rootNode.fen : this.getrootnode().fen)\n        let buff = this.pgnHeaders.blob.map(entry => `[${entry[0]} \"${entry[1]}\"]`).join(\"\\n\")\n        this.pgnHeaders.setKey(\"FEN\", this.getrootnode().fen)\n        return buff\n    }\n\n    pgn(docomments, rootNodeOpt, domulti, keepBaseLine, reportAsUCI){\n        let rootNode = rootNodeOpt || this.getrootnode()\n\n        return `${this.reportPgnHeaders(keepBaseLine ? this.getrootnode() : rootNode)}\\n\\n${domulti ? this.multiPGN({\n            docomments: docomments,\n            rootNode: rootNode,\n            variationStart: (!keepBaseLine) || (rootNode.id == \"root\"),\n            buff: keepBaseLine ? this.line(!DO_COMMENTS, rootNode, reportAsUCI) : \"\",\n            reportAsUCI: reportAsUCI\n        }) : this.line(docomments, null, reportAsUCI)}`\n    }\n\n    getcurrentnode(){\n        return this.gamenodes[this.currentnodeid]\n    }\n\n    getrootnode(){\n        return this.gamenodes[\"root\"]\n    }\n\n    tnodecmp(a, b){\n        return b.subnodes().length - a.subnodes().length\n    }\n\n    transpositions(nodeOpt){        \n        let node = nodeOpt || this.getcurrentnode()\n        let tnodesentries = Object.entries(this.gamenodes).filter((entry)=>entry[1].fen == node.fen)        \n        let tnodes = tnodesentries.map((entry)=>entry[1])\n        tnodes.sort(this.tnodecmp)        \n        return tnodes\n    }\n\n    makemovenode(gamenode){                \n        let currentnode = this.getcurrentnode()\n        gamenode.id = this.currentnodeid + \"_\" + gamenode.gensan\n        if(!currentnode.childids.includes(gamenode.id)){\n            currentnode.childids.push(gamenode.id)\n            gamenode.parentid = this.currentnodeid\n            this.gamenodes[gamenode.id] = gamenode\n        }\n        this.currentnodeid = gamenode.id\n        let besttranspositionid = this.transpositions(this.getcurrentnode())[0].id\n        // switch to best transposition\n        //this.currentnodeid = besttranspositionid\n        this.board.setfromfen(this.getcurrentnode().fen, this.variant)\n    }\n\n    back(){\n        let currentnode = this.getcurrentnode()\n        if(currentnode.parentid){\n            this.currentnodeid = currentnode.parentid\n            this.board.setfromfen(this.getcurrentnode().fen, this.variant)\n            return true\n        }\n        return false\n    }\n\n    del(){        \n        let oldcurrentnode = this.getcurrentnode()\n        let parentid = oldcurrentnode.parentid\n        if(parentid){                        \n            for(let id in this.gamenodes){\n                if( id.match(new RegExp(`^${oldcurrentnode.regid()}`)) ){\n                    delete this.gamenodes[id]\n                }\n            }            \n            this.currentnodeid = parentid\n            let currentnode = this.getcurrentnode()\n            currentnode.childids = currentnode.childids.filter((childid)=>childid != oldcurrentnode.id)\n            this.board.setfromfen(this.fen(), this.variant)\n            return true\n        }\n        return false\n    }\n\n    tobegin(){\n        if(!this.back()) return false\n        while(this.back());        \n        return true\n    }\n\n    toend(){\n        if(!this.forward()) return false\n        while(this.forward());        \n        return true\n    }\n\n    forward(){\n        let currentnode = this.getcurrentnode()\n        if(currentnode.childids.length > 0){\n            this.currentnodeid = currentnode.sortedchilds()[0].id\n            this.board.setfromfen(this.getcurrentnode().fen, this.variant)\n            return true\n        }\n        return false\n    }\n\n    // gsr\n    serialize(){\n        let gamenodesserialized = {}\n        for(let id in this.gamenodes){\n            gamenodesserialized[id] = this.gamenodes[id].serialize()\n        }\n        return{\n            variant: this.variant,            \n            flip: this.flip,\n            gamenodes: gamenodesserialized,\n            currentnodeid: this.currentnodeid,\n            animations: this.animations,\n            selectedAnimation: this.selectedAnimation,\n            animationDescriptors: this.animationDescriptors,\n            pgnHeaders: this.pgnHeaders.blob,\n            pgnBody: this.pgnBody,\n            timecontrol: this.timecontrol.serialize(),\n            players: this.players.serialize(),\n            inProgress: this.inProgress,\n            terminated: this.terminated,\n            result: this.result,\n            resultReason: this.resultReason,\n            startedAt: this.startedAt,\n            terminatedAt: this.terminatedAt,\n            chat: this.chat.serialize(),\n            playerSeatedAfterTermination: this.playerSeatedAfterTermination,\n        }\n    }\n\n    clone(){\n        return Game().fromblob(this.serialize())\n    }\n}\nfunction Game(props){return new Game_(props)}\n\n///////////////////////////////////////////////////////////////////////////////////////////\n/*function createExports(){\n    module.exports.ChessBoard = ChessBoard\n}\n\nif(typeof module != \"undefined\") if(typeof module.exports != \"undefined\") createExports()*/\n///////////////////////////////////////////////////////////////////////////////////////////\n\nconst ENGINE_READY = 0\nconst ENGINE_RUNNING = 1\nconst ENGINE_STOPPING = 2\n\nconst MATE_SCORE = 10000\n\nconst VERBOSE = false\n\nclass AbstractEngine{\n  setcommand(command, payload){\n    this.command = command\n    this.payload = payload\n    if(VERBOSE) console.log(\"setcommand\", command, payload)\n  }\n\n  play(initialFen, moves, variant, timecontrol, moveOverHead){\n      return P(resolve =>{\n          this.resolvePlay = resolve\n          this.go({\n              fen: initialFen,\n              moves: moves,\n              variant: variant,\n              timecontrol: timecontrol,\n              moveOverHead: moveOverHead\n          })\n      })\n  }\n\n  processstdoutline(line){               \n    if(VERBOSE) console.log(\"line\", line)\n    \n    if(line.match(/^info string/)) return\n\n    let bm = line.match(/^bestmove ([^\\s]+)/)\n\n    if(bm){\n      let bestmove = bm[1]\n\n      if(VERBOSE) console.log(\"bestmove received \" + bestmove)      \n\n      this.analysisinfo.state = ENGINE_READY\n\n      this.sendanalysisinfo(JSON.parse(JSON.stringify(this.analysisinfo)))\n\n      if(this.resolvePlay){          \n          let scorenumerical = null\n          try{\n            scorenumerical = this.analysisinfo.summary[0].scorenumerical\n          }catch(err){}          \n          this.resolvePlay({bestmove: bestmove, scorenumerical: scorenumerical})\n          this.resolvePlay = null\n      }\n\n      return\n    }\n\n    if(line.match(/^info/)){        \n      let depth = null\n      let mdepth = line.match(/ depth (.+)/)\n\n      if(mdepth){\n        depth = parseInt(mdepth[1])          \n      }                \n\n      let mtime = line.match(/ time (.+)/)\n\n      if(mtime){\n        this.analysisinfo.time = parseInt(mtime[1])          \n      }                \n\n      let mnodes = line.match(/ nodes (.+)/)\n\n      if(mnodes){\n        this.analysisinfo.nodes = parseInt(mnodes[1])          \n      }                \n\n      let mnps = line.match(/ nps (.+)/)\n\n      if(mnps){\n        this.analysisinfo.nps = parseInt(mnps[1])          \n      }                \n\n      let move = null\n\n      let mp = line.match(/ pv (.+)/)      \n\n      if(mp){        \n        let pv = mp[1].split(\" \")        \n        move = pv[0]                  \n        let state = this.analyzedboard.getstate()\n        let pvsan = []\n        for(let algeb of pv){\n          try{              \n            let move = this.analyzedboard.algebtomove(algeb)                        \n            pvsan.push(this.analyzedboard.movetosan(move))            \n            this.analyzedboard.push(move)\n          }catch(err){\n            if(VERBOSE) console.log(err)                                                \n          }                                \n        }\n\n        this.pvsans[move] = pvsan\n        this.pvalgebs[move] = pv\n        this.analyzedboard.setstate(state)\n      } \n\n      if(depth){\n        if(depth < this.highestdepth) return\n        this.highestdepth = depth\n      }      \n\n      if(!move) return\n\n      let scorecp = null\n\n      let mscp = line.match(/ score cp (.+)/)\n\n      if(mscp){\n        scorecp = parseInt(mscp[1])\n      }\n\n      let scoremate = null\n\n      let msmate = line.match(/ score mate (.+)/)\n\n      if(msmate){\n        scoremate = parseInt(msmate[1])\n      }\n\n      let scorenumerical = scorecp\n\n      if(scoremate){\n        if(scoremate < 0){\n          scorenumerical = - MATE_SCORE - scoremate\n        }else{\n          scorenumerical = MATE_SCORE - scoremate\n        }\n      }        \n\n      this.pvs[move] = {depth: this.highestdepth, scorecp: scorecp, scoremate: scoremate, scorenumerical: scorenumerical}        \n\n      let newpvs = {}\n\n      for(let move in this.pvs){\n        if(this.pvs[move].depth >= (this.highestdepth - 1)){\n          newpvs[move] = this.pvs[move]\n        }\n      }\n\n      this.pvs = newpvs        \n\n      this.sortedpvs = Object.keys(this.pvs)\n        .sort((a, b)=>this.pvs[b].scorenumerical - this.pvs[a].scorenumerical)                                \n        .sort((a, b)=>this.pvs[b].depth - this.pvs[a].depth)                                \n    \n    let pvsAtDepth = {}\n    this.completeddepth = 0\n    for(let move of this.sortedpvs.slice(0, this.multipv)){            \n        let currentdepth = this.pvs[move].depth\n        if(typeof pvsAtDepth[currentdepth] != \"undefined\"){\n            pvsAtDepth[currentdepth]++\n        }else{\n            pvsAtDepth[currentdepth]=1\n        }\n        if(pvsAtDepth[currentdepth] >= this.multipv){\n            this.completeddepth = currentdepth\n        }\n    }\n\n      if(this.completeddepth > this.lastcompleteddepth){\n        this.lastcompleteddepth = this.completeddepth        \n        let summary = []\n        let i = 0\n        for(let uci of this.sortedpvs.slice()){\n          if(i<this.multipv){            \n            summary.push({\n              multipv: i+1,\n              depth: this.lastcompleteddepth,\n              uci: uci,\n              scorenumerical: this.pvs[uci].scorenumerical,\n              pvsans: this.pvsans[uci],\n              pvalgebs: this.pvalgebs[uci]\n            })                    \n          }        \n          i++\n        }\n\n        this.analysisinfo.lastcompleteddepth = this.lastcompleteddepth\n        this.analysisinfo.summary = summary\n\n        if(VERBOSE) console.log(\"summary\", summary, \"mindepth\", this.minDepth, \"lascompleteddepth\", this.analysisinfo.lastcompleteddepth)\n        \n        if(this.analysisinfo.lastcompleteddepth >= ( this.minDepth ? this.minDepth : 0 ) ){            \n            if(VERBOSE) console.log(\"sending analysisinfo\")\n          this.sendanalysisinfo(this.analysisinfo)\n        }        \n      }\n    }      \n  }\n\n  sendcommandtoengine(command){\n      // abstract\n  }\n\n  issuecommand(command){\n      if(VERBOSE) console.log(\"engine command\", command)\n\n      this.sendcommandtoengine(command)\n  }\n\n  go(payload){\n    this.highestdepth = 0\n    this.completeddepth = 0\n    this.lastcompleteddepth = 0\n    this.pvs = {}\n    this.pvsans = {}\n    this.pvalgebs = {}\n    this.sortedpvs = []\n    this.time = 0\n    this.nodes = 0\n    this.nps = 0\n\n    this.multipv = payload.multipv || 1            \n    this.threads = payload.threads || 1            \n    this.analyzedfen = payload.fen     \n    this.moves = payload.moves    \n    this.timecontrol = payload.timecontrol\n    this.variant = payload.variant || DEFAULT_VARIANT        \n    this.analysiskey = payload.analysiskey || `analysis/${this.variant}/${strippedfen(this.analyzedfen)}`               \n    this.analyzedboard = ChessBoard().setfromfen(this.analyzedfen, this.variant)\n    this.moveOverHead = payload.moveOverHead || DEFAULT_MOVE_OVERHEAD\n\n    /*let lms = this.analyzedboard.legalmovesforallpieces()\n\n    if( lms.length < this.multipv ) this.multipv = lms.length\n\n    if(this.multipv == 0){\n        return\n    }*/\n\n    this.analysisinfo = {      \n      multipv: this.multipv,    \n      threads: this.threads,    \n      analyzedfen: this.analyzedfen,        \n      variant: this.variant,\n      analysiskey: this.analysiskey,\n      lastcompleteddepth: 0,\n      summary: []\n    }\n\n    this.issuecommand(`setoption name UCI_Variant value ${this.variant == \"standard\" ? \"chess\" : this.variant}`)\n    this.issuecommand(`setoption name MultiPV value ${this.multipv}`)        \n    this.issuecommand(`setoption name Threads value ${this.threads}`)        \n    this.issuecommand(`setoption name Move Overhead value ${this.moveOverHead}`)        \n    this.issuecommand(`position fen ${this.analyzedfen}${this.moves ? \" moves \" + this.moves : \"\"}`)\n    \n    let goCommand = `go${this.timecontrol ? \" wtime \" + this.timecontrol.wtime + \" winc \" + this.timecontrol.winc + \" btime \" + this.timecontrol.btime + \" binc \" + this.timecontrol.binc : \" infinite\"}`\n    \n    this.issuecommand(goCommand)\n\n    this.analysisinfo.state = ENGINE_RUNNING    \n\n    this.sendanalysisinfo(this.analysisinfo)\n  }\n\n  stop(){\n    if(this.analysisinfo.state != ENGINE_RUNNING) return\n\n    this.issuecommand(\"stop\")\n\n    this.analysisinfo.state = ENGINE_STOPPING    \n\n    this.sendanalysisinfo(this.analysisinfo)\n  }\n\n  spawnengineprocess(){\n      // abstract\n  }\n\n  spawn(){\n      this.summary = [ \"engine ready\" ]\n\n      this.analysisinfo = {\n        state: ENGINE_READY,\n        summary: [],        \n        lastcompleteddepth: 0,        \n        time: 0,\n        nodes: 0,\n        nps: 0,\n        multipv: null,\n        analyzedfen: null,        \n        variant: null,\n        threads: null,\n        analysiskey: null,\n      }\n\n      this.spawnengineprocess()\n  }\n\n  checkcommand(){    \n    if(this.command){\n        if(this.command == \"go\"){                \n            if(this.analysisinfo.state != ENGINE_READY){            \n                this.stop()          \n            }else{          \n                this.go(this.payload)\n                this.command = null\n            }\n        }\n        if(this.command == \"stop\"){        \n            this.stop()          \n            this.command = null\n        }      \n    }\n  }\n\n  constructor(sendanalysisinfo, path){      \n      this.sendanalysisinfo = sendanalysisinfo\n\n      this.path = path\n\n      this.spawn()\n\n      setInterval(this.checkcommand.bind(this), 200)\n  }\n}\n\nclass RichAnalysisInfo{\n    constructor(analysisinfo){\n        this.analysisinfo = analysisinfo\n\n        this.board = ChessBoard().setfromfen(analysisinfo.analyzedfen, analysisinfo.variant)\n\n        this.lms = this.board.legalmovesforallpieces()\n\n        for(let item of this.analysisinfo.summary){\n            let move = this.board.movefromalgeb(item.uci)\n            item.move = move\n            let detailedmove = this.board.algebtomove(item.uci)\n            if(detailedmove){\n                item.san = this.board.movetosan(detailedmove)                \n                item.detailedmove = detailedmove                                \n            }\n        }\n\n        this.analysisinfo.summary = this.analysisinfo.summary.filter(item => item.pvsans.length > 0)\n    }\n\n    get hasScorenumerical(){\n        if(!this.analysisinfo.summary.length) return false\n        let scorenumerical = this.analysisinfo.summary[0].scorenumerical        \n        return (typeof scorenumerical == \"number\")\n    }\n\n    get scorenumerical(){\n        return this.hasScorenumerical ? this.analysisinfo.summary[0].scorenumerical : null\n    }\n\n    get running(){\n        return this.analysisinfo.state != ENGINE_READY\n    }\n\n    live(live){\n        this.isLive = live\n        if(!this.running) this.isLive = false\n        return this\n    }\n\n    asText(){        \n        let npsInfo = this.isLive ? ` --> nps ${this.analysisinfo.nps || \"0\"}` : \"\"\n        return `--> ${this.isLive ? \"running -->\" : \"stored  -->\"} depth  ${this.analysisinfo.lastcompleteddepth.toString().padEnd(3, \" \") + npsInfo}\\n${this.analysisinfo.summary.map(item => item.pvsans[0].padEnd(8, \" \") + ((item.scorenumerical < 0 ? \"\" : \"+\") + item.scorenumerical.toString()).padEnd(8, \" \") + \"-> \" + item.pvsans.slice(1, Math.min(item.pvsans.length, 6)).join(\" \")).join(\"\\n\")}`\n    }\n}\n\n/*if(typeof module != \"undefined\") if(typeof module.exports != \"undefined\"){\n    module.exports = {\n        AbstractEngine: AbstractEngine,\n        VARIANT_TO_ENGINE: VARIANT_TO_ENGINE,\n        ChessBoard: ChessBoard,\n        Glicko: Glicko,\n        Player: Player,\n        Players: Players,\n        Game: GameNode,\n        Game: Game,    \n        ChatMessage: ChatMessage,    \n        Chat: Chat,\n        MAX_NUM_PLAYERS: MAX_NUM_PLAYERS,\n        UNSEAT: UNSEAT,\n        Square: Square,\n        Piece: Piece\n    }\n}*/\n\nconst STOCKFISH_JS_PATH         = \"/stockfish/stockfish.wasm.js\"\n\nclass LocalEngine extends AbstractEngine{\n    constructor(sendanalysisinfo){\n        super(sendanalysisinfo)\n    }\n\n    spawnengineprocess(){\n        this.stockfish = new Worker(STOCKFISH_JS_PATH)\n\n        this.stockfish.onmessage = message => {\n            this.processstdoutline(message.data)\n        }\n    }\n\n    sendcommandtoengine(command){\n        this.stockfish.postMessage(command)\n    }\n\n    terminate(){\n        this.stockfish.terminate()\n    }\n}\n\nif(typeof module != \"undefined\") if(typeof module.exports != \"undefined\"){\n    module.exports = {\n      LocalEngine: LocalEngine,\n      ENGINE_READY: ENGINE_READY,\n      ENGINE_STOPPING: ENGINE_STOPPING,\n      ENGINE_RUNNING: ENGINE_RUNNING,\n    }\n}\n","export function simpleFetch(url, params, callback) {\n    params.headers = params.headers || {};\n    if (params.asForm)\n      params.headers[\"Content-Type\"] = \"application/x-www-form-urlencoded\";\n    if (params.asJson) params.headers.Accept = \"application/json\";\n    if (params.asVndLichessV3Json) {\n      params.headers.Accept = \"application/vnd.lichess.v3+json\";\n      params.asJson = true;\n    }\n    if (params.asNdjson) params.headers.Accept = \"application/x-ndjson\";\n    if (params.accessToken)\n      params.headers.Authorization = \"Bearer \" + params.accessToken;\n    if (params.server)\n      api(\n        \"request:fetch\",\n        {\n          url: url,\n          params: params\n        },\n        (result) => callback(result)\n      );\n    else\n      fetch(url, params).then(\n        (response) =>\n          response.text().then(\n            (text) => {\n              if (params.asJson || params.asNdjson) {\n                try {\n                  let obj;\n                  if (params.asNdjson) {\n                    obj = text\n                      .split(\"\\n\")\n                      .filter((line) => line.length)\n                      .map((line) => JSON.parse(line));\n                  } else {\n                    obj = JSON.parse(text);\n                  }\n                  try {\n                    callback({ ok: true, content: obj });\n                  } catch (err) {\n                    console.log(err, obj);\n                  }\n                } catch (err) {\n                  console.log(\"fetch parse json error\", err);\n                  callback({ ok: false, status: \"Error: Could not parse json.\" });\n                }\n              } else {\n                callback({ ok: true, content: text });\n              }\n            },\n            (err) => {\n              console.log(\"fetch get response text error\", err);\n              callback({\n                ok: false,\n                status: \"Error: Failed to get response text.\"\n              });\n            }\n          ),\n        (err) => {\n          console.log(\"fetch error\", err);\n          callback({ ok: false, status: \"Error: Failed to fetch.\" });\n        }\n      );\n  }\n\n  export function getLocal(key, deffault){\n    const stored = localStorage.getItem(key)\n    if(stored === null) return deffault\n    try{\n      const blob = JSON.parse(stored)\n      return blob\n    }catch(err){\n      return deffault\n    }\n  }\n\n  export function setLocal(key, value){\n    localStorage.setItem(key, JSON.stringify(value, null, 2))\n  }\n\nconst BOOK_MOVE_RATINGS = {\n  0: {class: \"unrated\"},\n  1: {class: \"forcedloss\"},\n  2: {class: \"losing\"},\n  3: {class: \"troll\"},\n  4: {class: \"dubious\"},\n  5: {class: \"experimental\"},\n  6: {class: \"stable\"},\n  7: {class: \"promising\"},\n  8: {class: \"good\"},\n  9: {class: \"winning\"},\n  10: {class: \"forcedwin\"},\n}\n\nexport class BookMove{\n  constructor(san){\n    this.blob = {\n      san: san,\n      rating: 0\n    }\n  }\n\n  serialize(){\n    return this.blob\n  }\n\n  deserialize(blob){\n    this.blob = {\n      san: blob.san,\n      rating: blob.rating || 0\n    }\n\n    return this\n  }\n\n  get rating(){\n    return this.blob.rating\n  }\n\n  set rating(rating){\n    this.blob.rating = rating\n  }\n\n  get class(){\n    return BOOK_MOVE_RATINGS[this.rating].class\n  }\n}\n\nexport class BookPosition{\n  constructor(variant, fen){\n    this.blob = {\n      variant: variant,\n      fen: fen,\n      moves: {}\n    }\n\n    this.fromStored()\n  }\n\n  get variant(){\n    return this.blob.variant\n  }\n\n  set variant(variant){\n    this.blob.variant = variant\n  }\n\n  get fen(){\n    return this.blob.fen\n  }\n\n  set fen(fen){\n    this.blob.fen = fen\n  }\n\n  get storeKey(){\n    return `bookposition/${this.variant}/${this.fen}`\n  }\n\n  getStoredBlob(){\n    return getLocal(this.storeKey, this.blob)\n  }\n\n  storeBlob(){\n    setLocal(this.storeKey, this.serialize())\n\n    return this\n  }\n\n  fromStored(){\n    const blob = this.getStoredBlob()\n\n    return this.deserialize(blob)\n  }\n\n  get moves(){\n    return this.blob.moves\n  }\n\n  set moves(moves){\n    this.blob.moves = moves\n  }\n\n  serialize(){\n    return {\n      variant: this.variant,\n      fen: this.fen,\n      moves: Object.fromEntries(Object.entries(this.moves).map(entry => [entry[0], entry[1].serialize()]))\n    }\n  }\n\n  get moves(){\n    return this.blob.moves\n  }\n\n  getMove(san){\n    const move = this.moves[san] || new BookMove(san)\n    this.moves[san] = move\n    return move\n  }\n\n  getRating(san){\n    return this.getMove(san).rating\n  }\n\n  setRating(san, rating){\n    this.getMove(san).rating = rating\n  }\n\n  getClass(san){\n    return this.getMove(san).class\n  }\n\n  deserialize(blob){\n    this.variant = blob.variant\n    this.fen = blob.fen\n    this.moves = Object.fromEntries(Object.entries(blob.moves).map(entry => [entry[0], new BookMove().deserialize(entry[1])]))\n\n    return this\n  }\n}\n","import { simpleFetch } from \"./utils.js\";\n\nconst LICHESS_BOOK_URL = \"https://explorer.lichess.ovh/lichess\";\n\nconst LICHESS_BOOK_MAX_MOVES = 12;\nconst LICHESS_BOOK_AVG_RATINGS = [1600, 1800, 2000, 2200, 2500];\nconst LICHESS_BOOK_TIME_CONTROLS = [\"bullet\", \"blitz\", \"rapid\", \"classical\"];\n\nconst STANDARD_START_FEN =\n  \"rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1\";\n\nconst DEFAULT_VARIANT = \"standard\";\n\nlet bookCache = {};\n\nexport function requestLichessBook(\n  fenOpt,\n  variantOpt,\n  maxMovesOpt,\n  ratingListOpt,\n  speedListOpt\n) {\n  let fen = fenOpt || STANDARD_START_FEN;\n  let variant = variantOpt || DEFAULT_VARIANT;\n  let maxMoves = maxMovesOpt || LICHESS_BOOK_MAX_MOVES;\n  let ratingList = ratingListOpt || LICHESS_BOOK_AVG_RATINGS;\n  let speedList = speedListOpt || LICHESS_BOOK_TIME_CONTROLS;\n\n  const key = `${fen}|${variant}|${maxMoves}|${ratingList}|${speedList}`;\n\n  if (bookCache[key]) {\n    //console.log(\"book position found in cache for key\", key);\n    return Promise.resolve(bookCache[key]);\n  }\n\n  let ratings = ratingList.map((opt) => `ratings%5B%5D=${opt}`).join(\"&\");\n\n  let speeds = speedList.map((opt) => `speeds%5B%5D=${opt}`).join(\"&\");\n\n  let url =\n    LICHESS_BOOK_URL + `?fen=${fen}&moves=${maxMoves}&variant=${variant}`;\n\n  if (ratings) url += \"&\" + ratings;\n\n  if (speeds) url += \"&\" + speeds;\n\n  return new Promise((resolve) => {\n    simpleFetch(\n      url,\n      {\n        asJson: true\n      },\n      (result) => {\n        if (result.ok) {\n          result.content.fen = fen;\n          bookCache[key] = result.content;\n          resolve(result.content);\n        }\n      }\n    );\n  });\n}\n\nexport function weightedRandom(book) {\n  if (!book) return null;\n\n  if (!book.moves.length) return null;\n\n  let sum = 0;\n\n  for (const move of book.moves) {\n    move.total = move.white + move.draws + move.black;\n    sum += move.total;\n  }\n\n  const rnd = Math.floor(Math.random() * sum);\n\n  let ctotal = book.moves[0].total;\n\n  let i = 0;\n\n  while (ctotal < rnd) {\n    ctotal += book.moves[i++].total;\n  }\n\n  const selectedMove = book.moves[i];\n\n  return selectedMove;\n}\n\nfunction makeVariant(display, chessops, explorer) {\n  return {\n    display: display,\n    chessops: chessops,\n    explorer: explorer\n  };\n}\n\nexport const LICHESS_VARIANTS = [\n  makeVariant(\"Standard\", \"chess\", \"standard\"),\n  makeVariant(\"Antichess\", \"antichess\", \"antichess\"),\n  makeVariant(\"Atomic\", \"atomic\", \"atomic\"),\n  makeVariant(\"Crazyhouse\", \"crazyhouse\", \"crazyhouse\"),\n  makeVariant(\"Horde\", \"horde\", \"horde\"),\n  makeVariant(\"King of the Hill\", \"kingofthehill\", \"kingOfTheHill\"),\n  makeVariant(\"Racing Kings\", \"racingkings\", \"racingKings\")\n];\n\nexport function chessopsToExplorer(variant) {\n  const search = LICHESS_VARIANTS.find((test) => test.chessops === variant);\n  return search ? search.explorer : \"standard\";\n}\n\nexport function explorerToChessops(variant) {\n  const search = LICHESS_VARIANTS.find((test) => test.explorer === variant);\n  return search ? search.chessops : \"chess\";\n}\n","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nvar script = {\n  name: 'VueCustomTooltip',\n  props: {\n    label: String,\n    active: {\n      type: Boolean,\n      default: true,\n    },\n    sticky: Boolean, // Always showing\n    multiline: Boolean, // Multiple lines\n    underlined: Boolean,\n    abbreviation: Boolean,\n    position: {\n      type: String,\n      default: 'is-top',\n      validator: function validator(value) {\n        return ['is-top', 'is-bottom', 'is-left', 'is-right'].indexOf(value) > -1\n      },\n    },\n    size: {\n      type: String,\n      default: 'is-medium',\n      validator: function validator(value) {\n        return ['is-small', 'is-medium', 'is-large'].indexOf(value) > -1\n      },\n    },\n  },\n  data: function data() {\n    return {\n      labelText: this.label || null,\n      isActive: this.active || true,\n      isSticky: this.sticky || false,\n      isMultiline: this.multiline || false,\n      isUnderlined: this.underlined || false,\n      isAbbreviation: this.abbreviation || false,\n      hasPosition: this.position || 'is-top',\n      hasSize: this.size || 'is-medium',\n    }\n  },\n  computed: {\n    dynamicStyles: function dynamicStyles() {\n      return {\n        '--vue-custom-tooltip-color':\n          this.$vueCustomTooltip && this.$vueCustomTooltip.hasOwnProperty('color')\n            ? this.$vueCustomTooltip.color\n            : null,\n        '--vue-custom-tooltip-background':\n          this.$vueCustomTooltip && this.$vueCustomTooltip.hasOwnProperty('background')\n            ? this.$vueCustomTooltip.background\n            : null,\n        '--vue-custom-tooltip-border-radius':\n          this.$vueCustomTooltip && this.$vueCustomTooltip.hasOwnProperty('borderRadius')\n            ? this.$vueCustomTooltip.borderRadius\n            : null,\n        '--vue-custom-tooltip-font-weight':\n          this.$vueCustomTooltip && this.$vueCustomTooltip.hasOwnProperty('fontWeight')\n            ? this.$vueCustomTooltip.fontWeight\n            : null,\n      }\n    },\n  },\n  watch: {\n    label: {\n      handler: function handler(value) {\n        this.labelText = value;\n      },\n      immediate: true,\n    },\n    active: {\n      handler: function handler(value) {\n        this.isActive = value;\n      },\n      immediate: true,\n    },\n    sticky: {\n      handler: function handler(value) {\n        this.isSticky = value;\n      },\n      immediate: true,\n    },\n    multiline: {\n      handler: function handler(value) {\n        this.isMultiline = value;\n      },\n      immediate: true,\n    },\n    underlined: {\n      handler: function handler(value) {\n        this.isUnderlined = value;\n      },\n      immediate: true,\n    },\n    abbreviation: {\n      handler: function handler(value) {\n        this.isAbbreviation = value;\n      },\n      immediate: true,\n    },\n    position: {\n      handler: function handler(value) {\n        this.hasPosition = value;\n      },\n      immediate: true,\n    },\n    size: {\n      handler: function handler(value) {\n        this.hasSize = value;\n      },\n      immediate: true,\n    },\n  },\n};\n\nfunction normalizeComponent(template, style, script, scopeId, isFunctionalTemplate, moduleIdentifier /* server only */, shadowMode, createInjector, createInjectorSSR, createInjectorShadow) {\n    if (typeof shadowMode !== 'boolean') {\n        createInjectorSSR = createInjector;\n        createInjector = shadowMode;\n        shadowMode = false;\n    }\n    // Vue.extend constructor export interop.\n    var options = typeof script === 'function' ? script.options : script;\n    // render functions\n    if (template && template.render) {\n        options.render = template.render;\n        options.staticRenderFns = template.staticRenderFns;\n        options._compiled = true;\n        // functional template\n        if (isFunctionalTemplate) {\n            options.functional = true;\n        }\n    }\n    // scopedId\n    if (scopeId) {\n        options._scopeId = scopeId;\n    }\n    var hook;\n    if (moduleIdentifier) {\n        // server build\n        hook = function (context) {\n            // 2.3 injection\n            context =\n                context || // cached call\n                    (this.$vnode && this.$vnode.ssrContext) || // stateful\n                    (this.parent && this.parent.$vnode && this.parent.$vnode.ssrContext); // functional\n            // 2.2 with runInNewContext: true\n            if (!context && typeof __VUE_SSR_CONTEXT__ !== 'undefined') {\n                context = __VUE_SSR_CONTEXT__;\n            }\n            // inject component styles\n            if (style) {\n                style.call(this, createInjectorSSR(context));\n            }\n            // register component module identifier for async chunk inference\n            if (context && context._registeredComponents) {\n                context._registeredComponents.add(moduleIdentifier);\n            }\n        };\n        // used by ssr in case component is cached and beforeCreate\n        // never gets called\n        options._ssrRegister = hook;\n    }\n    else if (style) {\n        hook = shadowMode\n            ? function (context) {\n                style.call(this, createInjectorShadow(context, this.$root.$options.shadowRoot));\n            }\n            : function (context) {\n                style.call(this, createInjector(context));\n            };\n    }\n    if (hook) {\n        if (options.functional) {\n            // register for functional component in vue file\n            var originalRender = options.render;\n            options.render = function renderWithStyleInjection(h, context) {\n                hook.call(context);\n                return originalRender(h, context);\n            };\n        }\n        else {\n            // inject component registration as beforeCreate hook\n            var existing = options.beforeCreate;\n            options.beforeCreate = existing ? [].concat(existing, hook) : [hook];\n        }\n    }\n    return script;\n}\n\nvar isOldIE = typeof navigator !== 'undefined' &&\n    /msie [6-9]\\\\b/.test(navigator.userAgent.toLowerCase());\nfunction createInjector(context) {\n    return function (id, style) { return addStyle(id, style); };\n}\nvar HEAD;\nvar styles = {};\nfunction addStyle(id, css) {\n    var group = isOldIE ? css.media || 'default' : id;\n    var style = styles[group] || (styles[group] = { ids: new Set(), styles: [] });\n    if (!style.ids.has(id)) {\n        style.ids.add(id);\n        var code = css.source;\n        if (css.map) {\n            // https://developer.chrome.com/devtools/docs/javascript-debugging\n            // this makes source maps inside style tags work properly in Chrome\n            code += '\\n/*# sourceURL=' + css.map.sources[0] + ' */';\n            // http://stackoverflow.com/a/26603875\n            code +=\n                '\\n/*# sourceMappingURL=data:application/json;base64,' +\n                    btoa(unescape(encodeURIComponent(JSON.stringify(css.map)))) +\n                    ' */';\n        }\n        if (!style.element) {\n            style.element = document.createElement('style');\n            style.element.type = 'text/css';\n            if (css.media)\n                { style.element.setAttribute('media', css.media); }\n            if (HEAD === undefined) {\n                HEAD = document.head || document.getElementsByTagName('head')[0];\n            }\n            HEAD.appendChild(style.element);\n        }\n        if ('styleSheet' in style.element) {\n            style.styles.push(code);\n            style.element.styleSheet.cssText = style.styles\n                .filter(Boolean)\n                .join('\\n');\n        }\n        else {\n            var index = style.ids.size - 1;\n            var textNode = document.createTextNode(code);\n            var nodes = style.element.childNodes;\n            if (nodes[index])\n                { style.element.removeChild(nodes[index]); }\n            if (nodes.length)\n                { style.element.insertBefore(textNode, nodes[index]); }\n            else\n                { style.element.appendChild(textNode); }\n        }\n    }\n}\n\n/* script */\nvar __vue_script__ = script;\n\n/* template */\nvar __vue_render__ = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c(_vm.isAbbreviation ? 'abbr' : 'span',{tag:\"component\",class:[\n    _vm.hasPosition,\n    _vm.hasSize,\n    {\n      'vue-custom-tooltip': _vm.isActive && _vm.labelText,\n      'is-sticky': _vm.isSticky,\n      'has-multiline': _vm.isMultiline,\n      'is-underlined': _vm.isUnderlined || _vm.isAbbreviation,\n    } ],style:([_vm.dynamicStyles, { cursor: _vm.isAbbreviation ? 'help' : 'pointer' }]),attrs:{\"data-label\":_vm.labelText,\"aria-label\":_vm.labelText,\"role\":\"tooltip\"}},[_vm._t(\"default\")],2)};\nvar __vue_staticRenderFns__ = [];\n\n  /* style */\n  var __vue_inject_styles__ = function (inject) {\n    if (!inject) { return }\n    inject(\"data-v-60bf38c6_0\", { source: \".vue-custom-tooltip{--vue-custom-tooltip-color:#fff;--vue-custom-tooltip-background:#000;--vue-custom-tooltip-border-radius:100px;--vue-custom-tooltip-font-weight:400}\", map: undefined, media: undefined })\n,inject(\"data-v-60bf38c6_1\", { source: \".vue-custom-tooltip{position:relative;display:inline-block;text-decoration-line:none!important}.vue-custom-tooltip.is-top:after,.vue-custom-tooltip.is-top:before{top:auto;right:auto;bottom:calc(100% + 5px + 2px);left:50%;transform:translateX(-50%)}.vue-custom-tooltip.is-top:before{border-top:5px solid #000;border-top:5px solid var(--vue-custom-tooltip-background);border-right:5px solid transparent;border-left:5px solid transparent;bottom:calc(100% + 2px)}.vue-custom-tooltip.is-top.has-multiline.is-small:after{width:140px}.vue-custom-tooltip.is-top.has-multiline.is-medium:after{width:250px;padding:.6rem 1.25rem .65rem}.vue-custom-tooltip.is-top.has-multiline.is-large:after{width:480px;padding:0.6rem 1rem 0.65rem}.vue-custom-tooltip.is-right:after,.vue-custom-tooltip.is-right:before{top:50%;right:auto;bottom:auto;left:calc(100% + 5px + 2px);transform:translateY(-50%)}.vue-custom-tooltip.is-right:before{border-top:5px solid transparent;border-right:5px solid #000;border-right:5px solid var(--vue-custom-tooltip-background);border-bottom:5px solid transparent;left:calc(100% + 2px)}.vue-custom-tooltip.is-right.has-multiline.is-small:after{width:140px}.vue-custom-tooltip.is-right.has-multiline.is-medium:after{width:250px;padding:.6rem 1.25rem .65rem}.vue-custom-tooltip.is-right.has-multiline.is-large:after{width:480px;padding:0.6rem 1rem 0.65rem}.vue-custom-tooltip.is-bottom:after,.vue-custom-tooltip.is-bottom:before{top:calc(100% + 5px + 2px);right:auto;bottom:auto;left:50%;transform:translateX(-50%)}.vue-custom-tooltip.is-bottom:before{border-right:5px solid transparent;border-bottom:5px solid #000;border-bottom:5px solid var(--vue-custom-tooltip-background);border-left:5px solid transparent;top:calc(100% + 2px)}.vue-custom-tooltip.is-bottom.has-multiline.is-small:after{width:140px}.vue-custom-tooltip.is-bottom.has-multiline.is-medium:after{width:250px;padding:.6rem 1.25rem .65rem}.vue-custom-tooltip.is-bottom.has-multiline.is-large:after{width:480px;padding:0.6rem 1rem 0.65rem}.vue-custom-tooltip.is-left:after,.vue-custom-tooltip.is-left:before{top:50%;right:calc(100% + 5px + 2px);bottom:auto;left:auto;transform:translateY(-50%)}.vue-custom-tooltip.is-left:before{border-top:5px solid transparent;border-bottom:5px solid transparent;border-left:5px solid #000;border-left:5px solid var(--vue-custom-tooltip-background);right:calc(100% + 2px)}.vue-custom-tooltip.is-left.has-multiline.is-small:after{width:140px}.vue-custom-tooltip.is-left.has-multiline.is-medium:after{width:250px;padding:.6rem 1.25rem .65rem}.vue-custom-tooltip.is-left.has-multiline.is-large:after{width:480px;padding:0.6rem 1rem 0.65rem}.vue-custom-tooltip.is-underlined{border-bottom:1px dotted #000;border-bottom:1px dotted var(--vue-custom-tooltip-background);line-height:1.2}.vue-custom-tooltip:after,.vue-custom-tooltip:before{position:absolute;content:'';opacity:0;visibility:hidden;pointer-events:none;transition:opacity 86ms ease-out,visibility 86ms ease-out}.vue-custom-tooltip:before{z-index:889}.vue-custom-tooltip:after{content:attr(data-label);color:#fff;color:var(--vue-custom-tooltip-color);background:#000;background:var(--vue-custom-tooltip-background);width:auto;max-width:100vw;padding:.35rem .75rem .45rem;border-radius:100px;border-radius:var(--vue-custom-tooltip-border-radius);font-size:.85rem!important;font-weight:400;font-weight:var(--vue-custom-tooltip-font-weight);line-height:1.3;letter-spacing:normal!important;text-transform:none;box-shadow:0 1px 2px 1px rgba(0,1,0,.2);z-index:888;white-space:nowrap}.vue-custom-tooltip:not([data-label='']):hover:after,.vue-custom-tooltip:not([data-label='']):hover:before{opacity:1;visibility:visible}:disabled .vue-custom-tooltip{pointer-events:none}.vue-custom-tooltip:not([data-label='']).is-sticky:after,.vue-custom-tooltip:not([data-label='']).is-sticky:before{opacity:1;visibility:visible}.vue-custom-tooltip.has-multiline:after{display:block;padding:.5rem .75rem .65rem;text-align:center;line-height:1.4;white-space:pre-wrap}\", map: undefined, media: undefined });\n\n  };\n  /* scoped */\n  var __vue_scope_id__ = undefined;\n  /* module identifier */\n  var __vue_module_identifier__ = undefined;\n  /* functional template */\n  var __vue_is_functional_template__ = false;\n  /* style inject SSR */\n\n  /* style inject shadow dom */\n\n\n\n  var __vue_component__ = /*#__PURE__*/normalizeComponent(\n    { render: __vue_render__, staticRenderFns: __vue_staticRenderFns__ },\n    __vue_inject_styles__,\n    __vue_script__,\n    __vue_scope_id__,\n    __vue_is_functional_template__,\n    __vue_module_identifier__,\n    false,\n    createInjector,\n    undefined,\n    undefined\n  );\n\n// Import vue component\n\nvar defaultOptions = {\n  name: 'VueCustomTooltip',\n  color: '#fff',\n  background: '#000',\n  borderRadius: 12,\n  fontWeight: 400,\n};\n\n// Declare install function executed by Vue.use()\nvar install = function installMyComponent(Vue, opt) {\n  // Don't install if already installed, or SSR\n  if (install.installed || Vue.prototype.$isServer) { return }\n  install.installed = true;\n\n  // Grab user options\n  var userOptions = Object.assign({}, opt);\n\n  // HEX regex: Hash, plus 3 or 6 valid characters\n  var hexRegex = /^#(?:[0-9A-Fa-f]{3}|[0-9A-Fa-f]{6})$/;\n  // Test color for valid HEX\n  if (userOptions.hasOwnProperty('color') && !hexRegex.test(userOptions.color)) {\n    delete userOptions.color;\n  }\n  // Test background for valid HEX\n  if (userOptions.hasOwnProperty('background') && !hexRegex.test(userOptions.background)) {\n    delete userOptions.background;\n  }\n\n  // borderRadius regex: number between 1-9, then any other numbers\n  var borderRadiusRegex = /^[0-9]+$/;\n  // Test borderRadius for integer\n  if (userOptions.hasOwnProperty('borderRadius') && !borderRadiusRegex.test(userOptions.borderRadius)) {\n    delete userOptions.borderRadius;\n  }\n\n  // fontWeight regex: number between 1-9 followed by two zeros\n  var fontWeightRegex = /^[1-9]{1}00$/;\n  // Test fontWeight for integer\n  if (userOptions.hasOwnProperty('fontWeight') && !fontWeightRegex.test(userOptions.fontWeight)) {\n    delete userOptions.fontWeight;\n  }\n\n  // Merge options\n  var options = Object.assign({}, defaultOptions, userOptions);\n\n  // Mutate borderRadius\n  options.borderRadius = options.borderRadius + 'px';\n\n  // Add global property (mainly for passing styles)\n  Vue.prototype.$vueCustomTooltip = options;\n\n  // Register component, using options.name.\n  // e.g. <VueCustomTooltip>\n  Vue.component(options.name, __vue_component__);\n};\n\n// Create module definition for Vue.use()\nvar plugin = {\n  install: install,\n};\n\n// Auto-install when vue is found (eg. in browser via <script> tag)\nvar GlobalVue = null;\nif (typeof window !== 'undefined') {\n  GlobalVue = window.Vue;\n} else if (typeof global !== 'undefined') {\n  GlobalVue = global.Vue;\n}\nif (GlobalVue) {\n  GlobalVue.use(plugin, defaultOptions);\n}\n\n// Inject install function into component - allows component\n// to be registered via Vue.use() as well as Vue.component()\n__vue_component__.install = install;\n\nexport default __vue_component__;\n","function normalizeComponent(template, style, script, scopeId, isFunctionalTemplate, moduleIdentifier /* server only */, shadowMode, createInjector, createInjectorSSR, createInjectorShadow) {\r\n    if (typeof shadowMode !== 'boolean') {\r\n        createInjectorSSR = createInjector;\r\n        createInjector = shadowMode;\r\n        shadowMode = false;\r\n    }\r\n    // Vue.extend constructor export interop.\r\n    const options = typeof script === 'function' ? script.options : script;\r\n    // render functions\r\n    if (template && template.render) {\r\n        options.render = template.render;\r\n        options.staticRenderFns = template.staticRenderFns;\r\n        options._compiled = true;\r\n        // functional template\r\n        if (isFunctionalTemplate) {\r\n            options.functional = true;\r\n        }\r\n    }\r\n    // scopedId\r\n    if (scopeId) {\r\n        options._scopeId = scopeId;\r\n    }\r\n    let hook;\r\n    if (moduleIdentifier) {\r\n        // server build\r\n        hook = function (context) {\r\n            // 2.3 injection\r\n            context =\r\n                context || // cached call\r\n                    (this.$vnode && this.$vnode.ssrContext) || // stateful\r\n                    (this.parent && this.parent.$vnode && this.parent.$vnode.ssrContext); // functional\r\n            // 2.2 with runInNewContext: true\r\n            if (!context && typeof __VUE_SSR_CONTEXT__ !== 'undefined') {\r\n                context = __VUE_SSR_CONTEXT__;\r\n            }\r\n            // inject component styles\r\n            if (style) {\r\n                style.call(this, createInjectorSSR(context));\r\n            }\r\n            // register component module identifier for async chunk inference\r\n            if (context && context._registeredComponents) {\r\n                context._registeredComponents.add(moduleIdentifier);\r\n            }\r\n        };\r\n        // used by ssr in case component is cached and beforeCreate\r\n        // never gets called\r\n        options._ssrRegister = hook;\r\n    }\r\n    else if (style) {\r\n        hook = shadowMode\r\n            ? function (context) {\r\n                style.call(this, createInjectorShadow(context, this.$root.$options.shadowRoot));\r\n            }\r\n            : function (context) {\r\n                style.call(this, createInjector(context));\r\n            };\r\n    }\r\n    if (hook) {\r\n        if (options.functional) {\r\n            // register for functional component in vue file\r\n            const originalRender = options.render;\r\n            options.render = function renderWithStyleInjection(h, context) {\r\n                hook.call(context);\r\n                return originalRender(h, context);\r\n            };\r\n        }\r\n        else {\r\n            // inject component registration as beforeCreate hook\r\n            const existing = options.beforeCreate;\r\n            options.beforeCreate = existing ? [].concat(existing, hook) : [hook];\r\n        }\r\n    }\r\n    return script;\r\n}\n\nexport default normalizeComponent;\n//# sourceMappingURL=normalize-component.mjs.map\n","<template>\n  <!-- BEGIN training vertical container -->\n  <div class=\"trainvertcont\">\n    <!-- BEGIN train controls -->    \n    <div v-if=\"hastraining\" class=\"traincontrolsdiv\">\n      <div v-if=\"trainOn\" ref=\"traininfo\" class=\"traininfo\"></div>\n      <button v-if=\"!trainOn\" v-on:click=\"train\" class=\"trainbutton\">Train</button>            \n      <button v-if=\"trainOn && !randLeft\" v-on:click=\"stoptrain\" class=\"stoptrainbutton\">Stop Training</button>\n    </div>\n    <!-- END train controls -->\n      <!-- BEGIN gamecont -->\n      <div class=\"gamecont\" ref=\"gamecont\">  \n        <!-- BEGIN Vuechessground -->\n        <div class=\"vuechessground\" ref=\"vuechessground\">          \n        <div id=\"disablediv\" ref=\"disablediv\"></div>\n        <div id=\"settingsdiv\" class=\"settingsdiv\" v-if=\"settingsOpen\">\n          <div>\n          &nbsp;        \n          <div v-on:click=\"settings\" class=\"svgbutton cross floatright\"></div>                    \n          </div>        \n          \n          <div class=\"localstoragecontrols\">\n            <div class=\"label\">Local Storage</div>\n            <button v-on:click=\"clearblob\" class=\"graybutton\">Clear Blob</button>\n            <button v-on:click=\"copylocalstorage\" class=\"greenbutton\">Copy Local Storaga</button>\n            <button v-on:click=\"setlocalstorage\" class=\"yellowbutton\">Set Local Storage</button>\n            <button v-on:click=\"clearlocalstorage\" class=\"redbutton\">Clear Local Storaga</button>\n          </div>\n          <div>\n            <textarea id=\"settingsblob\" ref=\"settingsblob\"></textarea>\n          </div>        \n          <div style=\"margin-top: 5px; margin-left: 4px;\">\n            <Labeled label=\"Max games\">\n              <Perstext id=\"ui/maxgames\" default=\"50\"></Perstext>\n            </Labeled>\n            <Labeled label=\"Max multipv\">\n              <Perstext id=\"analysis/maxmultipv\" default=\"5\"></Perstext>\n            </Labeled>\n            <Labeled v-if=\"uploadapplycompression\" label=\"Upload Apply Compression\">\n              <Perscheck id=\"upload/applycompression\"></Perscheck>\n            </Labeled>\n          </div>\n        </div>\n        <div class=\"horizcont\">\n          <div class=\"vertcont\">\n            <div class=\"moveinputdiv\">            \n              <VueCustomTooltip label=\"flip board\">\n              <div v-if=\"!trainOn\" v-on:click=\"flip\" class=\"svgbutton spinner\"></div>\n              </VueCustomTooltip>            \n              <VueCustomTooltip label=\"move text, san or uci\">\n              <input class=\"movetextinput\" v-on:keyup.enter=\"makemove\" ref=\"movetextinput\" type=\"text\" />          \n              </VueCustomTooltip>                        \n              <div v-if=\"showpromotion\" class=\"prompiecebuttons\">            \n                <div v-for=\"prompieceext in prompiecesext\" :class=\"prompieceext.klass\" :ref=\"prompieceext.p\" :piece=\"prompieceext.p\" :key=\"prompieceext.p\" v-on:click=\"prompiececlicked\">\n                  {{ prompieceext.p.toUpperCase() }}\n                </div>            \n              </div>\n              <VueCustomTooltip label=\"make text move\">\n              <div v-if=\"!showpromotion\" v-on:click=\"makemove\" class=\"svgbutton checkmark greenbutton\"></div>\n              </VueCustomTooltip>                        \n              <VueCustomTooltip label=\"cancel move\">\n              <div v-on:click=\"makemovecancel\" class=\"svgbutton cross yellowbutton\"></div>            \n              </VueCustomTooltip>            \n              <VueCustomTooltip label=\"reset board\">\n              <div v-if=\"!trainOn && !showpromotion\" v-on:click=\"reset\" class=\"svgbutton exclam redbutton\"></div>            \n              </VueCustomTooltip>                        \n            </div>\n            <div v-on:wheel=\"boardwheel\" class=\"blue merida\">\n              <div ref=\"board\" class=\"cg-board-wrap\"></div>\n            </div>\n            <div class=\"fendiv\">\n              <input class=\"fentextinput\" ref=\"fentextinput\" tytpe=\"text\" />\n            </div>\n            <div v-if=\"!trainOn\" class=\"controls\">\n              <VueCustomTooltip position=\"is-bottom\" label=\"to begin\">\n              <div v-on:click=\"tobegin\" class=\"svgbutton tobegin bluebutton\"></div>\n              </VueCustomTooltip>\n              <VueCustomTooltip position=\"is-bottom\" label=\"back\">\n              <div v-on:click=\"back\" class=\"svgbutton arrowleft greenbutton\"></div>\n              </VueCustomTooltip>            \n              <VueCustomTooltip position=\"is-bottom\" label=\"forward\">\n              <div v-on:click=\"forward\" class=\"svgbutton arrowright greenbutton\"></div>\n              </VueCustomTooltip>            \n              <VueCustomTooltip position=\"is-bottom\" label=\"to end\">\n              <div v-on:click=\"toend\" class=\"svgbutton toend bluebutton\"></div>\n              </VueCustomTooltip>            \n              <VueCustomTooltip position=\"is-bottom\" label=\"delete move\">\n              <div v-on:click=\"del\" class=\"svgbutton cross redbutton\"></div>            \n              </VueCustomTooltip>            \n              <VueCustomTooltip position=\"is-bottom\" label=\"select variant\">\n              <select v-on:change=\"variantchanged\" ref=\"variantselect\">\n                <option v-for=\"variant in variants\" :key=\"variant.key\" :value=\"variant.key\" :selected=\"variant.selected\">{{ variant.display }}</option>\n              </select>\n              </VueCustomTooltip>            \n              <VueCustomTooltip position=\"is-bottom\" label=\"weighted random book move\">\n              <div v-on:click=\"makeWeightedrandom\" class=\"svgbutton questionmark yellowbutton\"></div>                        \n              </VueCustomTooltip>            \n              <VueCustomTooltip position=\"is-bottom\" label=\"open lichess analysis\">\n              <div v-on:click=\"openanalysis\" class=\"svgbutton openfolder\"></div>                        \n              </VueCustomTooltip>            \n              <VueCustomTooltip position=\"is-bottom\" label=\"settings\">\n              <div v-on:click=\"settings\" class=\"svgbutton tool greenbutton\"></div>                        \n              </VueCustomTooltip>            \n            </div>\n          </div>\n          <div class=\"legalsans\">        \n            <div v-for=\"item in legalsans\" :key=\"item.key\">\n              <div v-if=\"!trainOn\" class=\"sancont\">              \n                <div :class=\"item.klass\" :san=\"item.san\" v-on:click=\"clicksan\">\n                  {{ item.san }}\n                </div>\n                <div class=\"sanbutton arrowdown red\" :san=\"item.san\" v-on:click=\"sanratingminus\"></div>\n                <div class=\"ratingnum\">\n                  {{ item.rating < 10 ? item.rating : \"!\" }}\n                </div>\n                <div class=\"sanbutton arrowup green\" :san=\"item.san\" v-on:click=\"sanratingplus\"></div>\n              </div>\n            </div>\n          </div>\n          <div class=\"historysans\">                  \n            <div v-for=\"item in history.slice().reverse()\" :key=\"item.fen\" :id=\"item.fen\" class=\"historysanoutercont\"> \n              <div class=\"historysancont\">\n                <div :fen=\"item.fen\" v-on:click=\"clickhistory\"  :class=\"item.selected\" :san=\"item.genSan\">\n                  {{ item.genSan }}          \n                </div>            \n                <div style=\"width: 5px;\"></div>\n                <div v-if=\"item.prevFen\" class=\"sanbutton arrowdown red\" :san=\"item.genSan\" :prevFen=\"item.prevFen\" v-on:click=\"sanratingminus\"></div>\n                <div class=\"ratingnum\">\n                  {{ item.prevFen ? item.rating < 10 ? item.rating : \"!\" : \"\" }}\n                </div>\n                <div v-if=\"item.prevFen\" class=\"sanbutton arrowup green\" :san=\"item.genSan\" :prevFen=\"item.prevFen\" v-on:click=\"sanratingplus\"></div>\n              </div>\n            </div>\n          </div>\n          <div :class=\"(enginestate !== ENGINE_READY) ?'bookdiv running' : 'bookdiv'\">\n            <!--<div>\n              {{ authstoreInfo }}\n            </div>-->\n            <div style=\"margin-bottom: 20px;\" v-if=\"(analyzing && info) || info\">\n              <button v-if=\"enginestate === ENGINE_RUNNING\" v-on:click=\"stopanalyzing\" style=\"background-color: #faa; margin-top: 5px; margin-left: 5px; padding-left: 15px; padding-right: 15px;\">Stop</button>              \n              <button v-if=\"enginestate === ENGINE_RUNNING\" v-on:click=\"stopnext\" style=\"background-color: #faf; margin-top: 5px; margin-left: 5px; padding-left: 15px; padding-right: 15px;\">Stop Next</button>         \n              <button v-if=\"enginestate === ENGINE_RUNNING\" v-on:click=\"nextall\" style=\"background-color: #aff; margin-top: 5px; margin-left: 5px; padding-left: 15px; padding-right: 15px;\">Next All</button>    \n\n              <button v-if=\"enginestate === ENGINE_STOPPING\" :disabled=\"true\" style=\"background-color: #ffa; margin-top: 5px; margin-left: 5px; padding-left: 15px; padding-right: 15px;\">Stopping</button>              \n              <button v-if=\"enginestate === ENGINE_READY\" v-on:click=\"analyze\" style=\"background-color: #afa; margin-top: 5px; margin-left: 5px; padding-left: 15px; padding-right: 15px;\">Analyze</button>              \n              <table class=\"infotable\" cellpadding=\"10\"  >\n                <template v-for=\"item in info.summary\">\n                <tr>\n                  <td class=\"multipv\">\n                    {{ item.multipv }}.\n                  </td>\n                  <td :uci=\"item.uci\" v-on:click=\"makeenginemove\" :class=\"item.display === nextsan ? 'infosan next' : 'infosan'\">\n                    {{ item.display }}\n                  </td>\n                  <td class=\"infoscore\">\n                    {{ item.scorenumerical }}\n                  </td>\n                  <td class=\"infodepth\">\n                    {{ item.depth }}\n                  </td>                  \n                </tr>\n                <tr>\n                  <td></td>\n                  <td class=\"infoline\" colspan=\"3\">\n                    {{ item.line ? item.line.join(\" \") : \"\" }}\n                  </td>\n                </tr>\n                </template>\n              </table>              \n              <!--<pre>\n                {{ JSON.stringify(this.info, null, 2) }}\n              </pre>-->\n            </div>\n            <table v-if=\"(!trainOn) && (enginestate === ENGINE_READY)\" cellpadding=\"2\" cellspacing=\"3\">\n              <thead>\n                <tr>\n                  <td>\n                    <button v-if=\"enginestate === ENGINE_READY\" v-on:click=\"analyze\" style=\"font-size: 9px; background-color: #afa; margin-bottom: 3px;\">Analyze</button>\n                  </td>\n                  <td class=\"white\">White</td>\n                  <td class=\"draw\">Draw</td>\n                  <td class=\"black\">Black</td>\n                </tr>\n              </thead>\n              <tbody>\n                <tr v-for=\"item in bookmoves\" :key=\"item.san\">\n                  <td\n                    class=\"bookmovesan\"\n                    v-on:click=\"makesanmove($event, item.san)\"\n                  >\n                    {{ item.san }}\n                  </td>\n                  <td class=\"white\">{{ item.white }}</td>\n                  <td class=\"draw\">{{ item.draws }}</td>\n                  <td class=\"black\">{{ item.black }}</td>\n                </tr>\n              </tbody>\n            </table>\n          </div>\n        </div>        \n      </div>\n      <!-- END Vuechessground -->\n      <div class=\"lichessgames\" v-if=\"lichessgames.length > 0\">\n        <div :class=\"'lichessgame ' + game.variant + game.lost + game.clicked\" v-for=\"game in lichessgames\" :id=\"game.id\" :style=\"`opacity: ${game.diffOpacity};`\">\n          <span  v-on:click=\"clicklichessgame\" :index=\"game.index\">\n            <span v-if=\"game.id === selectedgameid\" style=\"color: #00f\">\n              *\n            </span>\n            <span style=\"color: #b87\">\n              {{ game.index + 1 }}.\n            </span>\n            {{ game.gameInfo }}\n          </span>\n          <a rel=\"noopener noreferrer\" target=\"_blank\" :href=\"`https://lichess.org/${game.id}${game.orientation}`\" style=\"font-size: 12px;\">open at lichess</a>\n        </div>\n      </div>\n    </div>    \n    <!-- END gamecont -->\n  </div>\n  <!-- END training vertical container -->\n</template>\n\n<script>\nimport { AuthStore } from \"./authstore.js\"\n\nimport { LocalEngine, ENGINE_READY, ENGINE_STOPPING, ENGINE_RUNNING } from \"./stockfish.js\"\n\nimport { Labeled, Perstext, Perscheck } from \"@publishvue/vuecomps\"\n\nimport {\n  requestLichessBook,\n  weightedRandom,\n  chessopsToExplorer,\n  explorerToChessops\n} from \"./lichess.js\";\n\nimport {\n  getLocal,\n  setLocal,\n  BookPosition,\n} from \"./utils.js\"\n\nimport { Chessground } from \"chessground\"\nimport { Pos } from \"@publishvue/chessops\"\nimport * as fetchclient from \"@publishvue/fetchclient\"\nimport VueCustomTooltip from '@adamdehaven/vue-custom-tooltip'\n\nconst ENTRIES_SEP = \"\\n--------------------\\n\"\n\nexport default {\n  name: \"Vuechessground\",  \n  props: {\n    nextdelay: {\n      type: Number,\n      default: 3000\n    },\n    nextalltimeout: {\n      type: Number,\n      default: 10000\n    },\n    prodhost: {\n      type: String,\n      default: \"openingtrainer.netlify.app\"\n    },\n    hastraining: {\n      type: Boolean,\n      default: false,\n    },\n    username: {\n      type: String,\n      default: \"\",\n    },\n    uploadapplycompression: {\n      type: Boolean,\n      deafult: false,\n    }\n  },\n  data(){\n    const variants = [\n      {display: \"Standard\", key: \"standard\"},\n      {display: \"Atomic\", key: \"atomic\"},\n      {display: \"Antichess\", key: \"antichess\"},\n      {display: \"Crazyhouse\", key: \"crazyhouse\"},\n      {display: \"Horde\", key: \"horde\"},\n      {display: \"Racing Kings\", key: \"racingkings\"},      \n      {display: \"Three Check\", key: \"3check\"},  \n    ]\n    const selectedVariant = getLocal(\"board/selectedvariant\", \"standard\")\n    this.selectVariant(variants, selectedVariant)\n    const pos = Pos()\n    const history = getLocal(\"board/history\", [])    \n    return {      \n      pos: pos,\n      board: null,\n      legalsans: [],\n      history,      \n      variants,\n      promuci: null,\n      showpromotion: false,\n      prompieces: [],\n      prompiecesext: [],\n      currentbook: null,\n      bookmoves: [],\n      orientation: getLocal(\"board/orientation\", \"white\"),\n      firstVariantChanged: true,\n      randLeft: 0,\n      trainOn: false,\n      expectedMoves: [],\n      getExpected: false,\n      awaitTrainMove: false,\n      trainTimeout: null,\n      sankey: 0,\n      settingsOpen: false,      \n      lichessgames: [],\n      allowSetup: true,\n      clickedgame: null,\n      rawgames: [],\n      selectedgameid: null,\n      analyzing: false,\n      info: null,\n      enginestate: ENGINE_READY,\n      ENGINE_READY,\n      ENGINE_STOPPING,\n      ENGINE_RUNNING,\n      authstoreInfo: \"\",\n      nextsan: null,\n      oldstate: null,\n      nextallOn: false,\n    }\n  },\n  methods:{ \n    nextall(){\n      this.nextallOn = true\n      this.stopnext()\n    },\n    checkstate(state){\n      if((this.oldstate === ENGINE_RUNNING)||(this.oldstate === ENGINE_STOPPING)){        \n        if(state === ENGINE_READY){          \n          if(this.onStopStepAndStart){\n            this.onStopStepAndStart = false\n            setTimeout(_ => {\n              this.step(1)\n              const index = this.getCurrentIndex()\n              if(index < (this.history.length - 1)){\n                this.analyze()\n              }else{\n                this.nextallOn = false\n                this.onStopStepAndStart = false\n              }\n            }, this.nextdelay)            \n          }\n        }\n      }\n\n      this.oldstate = state\n    },\n    stopnext(){\n      const nextallOn = this.nextallOn\n      this.stopanalyzing()\n      this.nextallOn= nextallOn\n\n      console.log(\"stopnext\", this.nextallOn)\n\n      this.onStopStepAndStart = true\n    },\n    makeenginemove(ev){\n      const uci = ev.target.getAttribute(\"uci\")      \n      const san = this.pos.uciToSan(uci)\n\n      try{\n        this.$refs.movetextinput.value = san\n        this.makemove()\n      }catch(err){}      \n    },\n    infoStoreKey(fenOpt){\n      const fen = fenOpt || this.reportFen()\n      const variant = this.pos.pos.rules\n      return `analysisinfo/${variant}/${fen}`\n    },\n    mymoveShapes(){\n      const index = this.getCurrentIndex()\n\n      if(index < (  this.history.length - 1 ) ){\n        const uci = this.history[index + 1].genUci\n        const orig = uci.substring(0, 2)\n        const dest = uci.substring(2, 4)\n\n        return [\n          {orig, brush: \"yellow\"},\n          {orig: dest, brush: \"yellow\"}\n        ]\n      }else{\n        return []\n      }\n    },\n    stopanalyzing(){\n      if(this.engine){\n        this.engine.setcommand(\"stop\", {})\n      }      \n\n      this.analyzing = false\n      this.nextallOn = false\n    },\n    analyze(){\n      const rules = this.pos.pos.rules\n\n      /*if((rules !== \"chess\")&&(rules !== \"atomic\")){\n        window.alert(\"Analysis of this variant is not supported.\")\n        return\n      }*/\n\n      this.analyzing = true\n\n      this.setUp()\n\n      console.log(\"analyze\", this.nextallOn)\n\n      if(this.nextallOn){\n        console.log(\"setting nextall timeout\")\n        setTimeout(_ => {\n          console.log(\"nextall timeout\")\n          this.stopnext()\n        }, this.nextalltimeout)\n      }\n    },\n    boardwheel(ev){\n      this.step(ev.deltaY > 0 ? -1 : 1)\n    },\n    setFen(fen){\n      try{\n        this.pos.setFen(fen)\n        return fen\n      }catch(err){\n        console.log(`could not set fen ${fen}`)\n        return null\n      }\n    },\n    buildlichessgames(games){\n      const lichessgames = games.map(game => new fetchclient.lichess.ParsedGame(game))\n      this.lichessgames = lichessgames.map((game, i) => {\n        game.index = i\n        game.lost = \"\"\n        game.orientation = \"/\"\n        const whiteRating = parseInt(game.decoratedWhite.split(\" \")[2])\n        const blackRating = parseInt(game.decoratedBlack.split(\" \")[2])\n        let myRating, oppRating\n        if(game.white == this.username){\n          game.orientation = \"/white\"\n          myRating = whiteRating\n          oppRating = blackRating\n        }\n        if(game.black == this.username){\n          game.orientation = \"/black\"\n          myRating = blackRating\n          oppRating = whiteRating\n        }\n        const ratingDiff = myRating - oppRating\n        let diffOpacity = 1\n        if(ratingDiff > 200) diffOpacity = 0.8\n        if(ratingDiff > 400) diffOpacity = 0.6\n        if(ratingDiff > 600) diffOpacity = 0.4\n        game.diffOpacity = diffOpacity\n        if((game.white == this.username)&&(game.result==\"0-1\")) game.lost = \" lost\"\n        if((game.black == this.username)&&(game.result==\"1-0\")) game.lost = \" lost\"\n        game.clicked = i === this.clickedgame ? \" clickedgame\" : \"\"        \n        return game\n      })\n      setTimeout(_ => {\n        if(this.selectedgameid){\n          const e = document.getElementById(this.selectedgameid)\n          if(e){\n            e.scrollIntoView({block: \"center\", behavior: \"smooth\"})          \n          }\n        }\n      }, 0)\n    },\n    clicklichessgame(ev){\n      const index = parseInt(ev.target.getAttribute(\"index\"))      \n      this.clickedgame = index\n      this.allowSetup = false\n      const lichessgame = this.lichessgames[index]\n      this.selectedgameid = lichessgame.id\n      localStorage.setItem(\"ui/selectedgameid\", this.selectedgameid)\n      \n      this.variantchanged(null, explorerToChessops(lichessgame.variant))\n      for(let san of lichessgame.moves){\n        this.makesanmove(null, san)\n      }      \n      this.allowSetup = true\n      if(lichessgame.white === this.username) this.orientation = \"white\"\n      if(lichessgame.black === this.username) this.orientation = \"black\"\n      setLocal(\"board/orientation\", this.orientation)\n      this.setUp()\n      this.buildlichessgames(this.rawgames)\n    },\n    getGames(){\n      const username = this.username      \n      if(!username) return\n      const lichessClient = new fetchclient.FetchClient(window.fetch.bind(window), {\n        apiBaseUrl: 'https://lichess.org/api',\n        bearer: localStorage.getItem(\"LICHESS_TOKEN\") || undefined\n      });\n      const gamesOfUser = lichessClient.extend('games/user', {\n        headers: {\n          Accept: 'application/x-ndjson',\n        },\n      });\n      let perfType = \"bullet,blitz,rapid,classiscal\"\n      if(this.pos.pos.rules !== \"chess\"){\n        perfType = chessopsToExplorer(this.pos.pos.rules)\n      }      \n      gamesOfUser.fetchNdJson(username, {\n        urlParams: {\n          max: getLocal(\"ui/maxgames\"),\n          perfType\n        },\n      }).then((games => {\n        this.rawgames = games\n        this.buildlichessgames(this.rawgames)\n      }).bind(this))      \n    },\n    clearblob(){\n      this.$refs.settingsblob.value = \"\"\n    },\n    setlocalstorage(){\n      const entries = this.$refs.settingsblob.value.split(ENTRIES_SEP)\n\n      this.$refs.settingsblob.value = `Setting from ${entries.length} entry(s) .`\n\n      setTimeout(_ => {\n        try{\n          const entriesobj = entries.map(entry => JSON.parse(entry))\n\n          localStorage.clear()\n\n          entriesobj.forEach(item => localStorage.setItem(item[0], item[1]))\n\n          this.$refs.settingsblob.value = `Set ${entriesobj.length} items, ok . Reloading.`\n\n          setTimeout(_ => {\n            document.location.reload()\n          }, 1000)\n        }catch(err){\n          this.$refs.settingsblob.value = `A problem occured with setting from blob. ${err}`\n        }\n      }, 1000)\n    },\n    confirm(msg){\n      const resp = window.prompt(msg + \" indeed ? ( y = yes )\")\n\n      if(!resp) return false\n\n      return (resp.toLowerCase() === \"y\")\n    },\n    clearlocalstorage(){\n      if(this.confirm(\"Clear Local storage\")){\n        localStorage.clear()\n        this.$refs.settingsblob.value = \"Local Storage cleared. Reloading.\"\n        setTimeout(_ => {\n          document.location.reload()\n        }, 1000)\n      }else{\n        this.$refs.settingsblob.value = \"Clearing Local Storage canceled.\"\n      }\n    },\n    copylocalstorage(){\n      const blob = Object.entries(localStorage).map(entry => JSON.stringify(entry)).join(ENTRIES_SEP)\n\n      this.$refs.settingsblob.value = blob\n      this.$refs.settingsblob.select()\n      document.execCommand(\"copy\")\n    },\n    settings(){\n      this.settingsOpen = !this.settingsOpen\n    },\n    sanratingstep(san, dir, prevFen){\n      const fen = this.reportFen()\n      if(!fen) return\n\n      const bookPosFen = prevFen ? prevFen : fen\n      const bookPosVariant = this.pos.pos.rules\n\n      const bookpos = new BookPosition(bookPosVariant, bookPosFen)\n\n      bookpos.blob.variant = bookPosVariant\n      bookpos.blob.fen = bookPosFen\n\n      let rating = bookpos.getRating(san) + dir\n\n      if(rating < 0) rating = 10\n\n      if(rating > 10) rating = 0\n\n      bookpos.setRating(san, rating)\n\n      bookpos.storeBlob()\n\n      this.buildLegalSans()\n    },\n    sanratingminus(ev){\n      this.sanratingstep(ev.target.getAttribute(\"san\"), -1, ev.target.getAttribute(\"prevFen\"))\n    },\n    sanratingplus(ev){\n      this.sanratingstep(ev.target.getAttribute(\"san\"), 1, ev.target.getAttribute(\"prevFen\"))\n    },\n    showRandLeft(){      \n      if(this.trainOn){\n        setTimeout(_ => {\n          this.$refs.traininfo.innerHTML = `<span class=\"settingupopeningpos\">Setting up opening position ( left ${this.randLeft} ) ...</span>`\n        }, 0) \n      }      \n    },\n    trainmoveplayed(san){\n      if(this.trainOn){\n        const expectedIndex = this.expectedMoves.findIndex(item => item.san == san)       \n\n        if(expectedIndex < 0){\n          this.$refs.traininfo.innerHTML = `<span class=\"trainerror\">Not among book moves !</span>`\n        }else{\n          this.$refs.traininfo.innerHTML = `<div class=\"trainrankdiv\"><span class=\"trainok\">Move <span class=\"trainrank\">${san}</span> was <span class=\"trainrank\">Rank ${expectedIndex + 1}.</span> most played.</div><div><span class=\"trainok\">Among <span class=\"trainexps\">${this.expectedMoves.map((item, i) => `${i+1}. ${item.san}`).join(\" \")}</span> .</span></div>`\n        }\n\n        this.trainTimeout = setTimeout(_ => {\n          this.awaitTrainMove = false;\n          if(this.trainOn) this.train()\n          this.trainTimeout = null\n        }, 5000)\n      }\n    },\n    train(){\n      this.trainOn = true\n      this.rndpos()\n    },\n    stoptrain(){\n      this.trainOn = false\n      this.awaitTrainMove = false\n      this.randLeft = 0      \n      if(this.trainTimeout) clearTimeout(this.trainTimeout)\n      this.trainTimeout = null\n    },\n    rndpos(){            \n      this.variantchanged()\n      this.disable()\n      this.randLeft = 3 + Math.floor(Math.random() * 10)\n      const randOrientation = this.randLeft % 2 ? \"black\" : \"white\"\n      if(randOrientation != this.orientation) this.flip()\n      this.showRandLeft()\n      this.makeWeightedrandom()\n    },\n    disable(){\n      const cont = this.$refs.vuechessground\n      const rect = cont.getBoundingClientRect()      \n      const style = this.$refs.disablediv.style\n      style.width = `${rect.width - 12}px`\n      style.height = `${rect.height - 12}px`\n    },\n    enable(){\n      const style = this.$refs.disablediv.style\n      style.width = `0px`\n      style.height = `0px`\n    },\n    selectVariant(variants, variant){      \n      variants.forEach(item => {\n        item.selected = item.key === variant\n      })\n      setLocal(\"board/selectedvariant\", variant)\n    },\n    flip(){\n      this.orientation = this.orientation == \"white\" ? \"black\" : \"white\"\n      setLocal(\"board/orientation\", this.orientation)\n      this.setUp()\n    },\n    openanalysis(){\n      const explorer = chessopsToExplorer(this.pos.pos.rules)\n\n      const fen = this.reportFen()\n      if(!fen) return\n\n      const url = `https://lichess.org/analysis/${explorer}/${fen}`\n      window.open(url, \"_blank\")\n    },\n    getCurrent(){\n      const fen = this.reportFen()\n      if(!fen) return this.history[0]\n\n      return this.history.find(item => item.fen === fen)\n    },\n    getCurrentIndex(){\n      const fen = this.reportFen()\n      if(!fen) return 0\n\n      return this.history.findIndex(item => item.fen === fen)\n    },\n    getBook(){       \n      this.currentbook = null\n      this.bookmoves = []\n\n      const fen = this.reportFen()\n      if(!fen) return\n\n      requestLichessBook(\n        fen,\n        chessopsToExplorer(this.pos.pos.rules)\n      ).then((result) => {        \n        this.currentbook = result;\n        this.bookmoves = result.moves;        \n        if(this.trainOn){\n          if((!this.randLeft) && (!this.awaitTrainMove)){\n              this.expectedMoves = this.bookmoves.map(bookmove => ({\n                san: bookmove.san,\n                totalPlays: bookmove.white + bookmove.draws + bookmove.black\n              })).sort((a,b) => b.totalPlays - a.totalPlays)              \n              this.$refs.traininfo.innerHTML = `<span class=\"makeyourmove\">Make your move !</span>`\n              this.awaitTrainMove = true\n              this.orientation = this.getCurrent().fen.split(\" \")[1] === \"w\" ? \"white\" : \"black\"\n              setLocal(\"board/orientation\", this.orientation)\n              this.setUp(true)\n            }\n        }\n      });\n    },\n    makeWeightedrandom() {\n      const fen = this.reportFen()\n      if(!fen) return\n\n      if (this.currentbook) {\n        if (this.currentbook.fen === fen) {\n          const selectedMove = weightedRandom(this.currentbook);\n\n          if (!selectedMove) {\n            this.randLeft = 0\n\n            this.trainOn = false\n\n            this.enable()\n\n            return;\n          }\n\n          const san = selectedMove.san\n\n          this.makesanmove(null, san)\n\n          if(this.randLeft) {\n            this.randLeft--            \n          }\n\n          if(this.trainOn && this.randLeft){\n            this.showRandLeft()\n            setTimeout(_ => {\n              this.makeWeightedrandom()\n            }, 250)\n          } else {\n            this.randLeft = 0\n\n            this.enable()\n          }\n        } else {\n          if(this.randLeft){\n            setTimeout(_ => {\n              this.makeWeightedrandom()\n            }, 250)\n          } else {\n            this.enable()\n          }\n        }\n      } else {\n        if(this.randLeft){\n            setTimeout(_ => {\n              this.makeWeightedrandom()\n            }, 250)\n        } else {\n          this.enable()\n        }\n      }\n    },\n    makemovecancel(){\n      this.prompieces = []\n      this.prompiecesext = []\n      this.showpromotion = false;\n      this.$refs.movetextinput.value = \"\"\n      setTimeout(_ => {\n        this.setUp()\n      }, 250)      \n    },\n    pieceToName(p){\n      return {\n        q: \"queen\",\n        r: \"rook\",\n        b: \"bishop\",\n        n: \"knight\",\n        k: \"king\",\n        p: \"pawn\"\n      }[p]\n    },\n    pieceToStyle(p, fen){\n      const parts = fen.split(\" \")\n      const turn = parts[1] == \"w\" ? \"white\" : \"black\"\n      const name = this.pieceToName(p)\n      const style = `piece ${name} ${turn}`      \n      return style\n    },\n    step(dir){\n      const fen = this.reportFen()      \n      if(!fen) return\n\n      let index = this.history.findIndex(item => item.fen === fen)\n      if(index < 0){        \n        return\n      }\n      index += dir\n      if(index < 0) index = 0\n      if(index >= this.history.length) index = this.history.length - 1      \n\n      if(!this.setFen(this.history[index].fen)) return\n\n      this.getSelectedHistory()\n      this.setUp()\n      this.prompieces = []\n      this.prompiecesext = []\n\n      const nextallOn = this.nextallOn\n      this.stopanalyzing()\n      this.nextallOn = nextallOn\n    },\n    tobegin(){\n      this.step(-100)\n    },\n    back(){\n      this.step(-1)\n    },\n    forward(){\n      this.step(1)\n    },\n    toend(){\n      this.step(100)\n    },\n    del(){\n      this.back()\n      const fen = this.reportFen()      \n      if(!fen) return\n\n      let index = this.history.findIndex(item => item.fen === fen)\n      if(index >= 0){\n        this.history = this.history.slice(0, index + 1)\n      }\n    },\n    clickhistory(ev) {\n      if(this.trainOn) return window.alert(\"Not allowed in train mode.\")\n\n      const fen = ev.target.getAttribute(\"fen\")      \n\n      if(!this.setFen(fen)) return\n\n      this.getSelectedHistory()            \n      const itemIndex = this.history.findIndex(item => item.isSelected)      \n      this.recordMovePlayed(this.history[itemIndex].genSan, this.history[itemIndex].genUci, itemIndex > 0 ? this.history[itemIndex - 1].fen : null, true)\n    },\n    reportFen(){\n      try{\n        const fen = this.pos.reportFen()\n        return fen\n      }catch(err){        \n        console.log(`could not report fen`)\n        return null\n      }\n    },\n    getSelectedHistory(){\n      const fen = this.reportFen()\n      if(!fen) return\n      for(const item of this.history) {        \n        const bookpos = new BookPosition(this.pos.pos.rules, item.prevFen)\n\n        item.isSelected = item.fen == fen\n\n        item.rating = bookpos.getRating(item.genSan)\n\n        item.selected = \"historysan \" +  ( item.isSelected ? \"histactive\" : \"histpassive\" ) + \" \" + bookpos.getClass(item.genSan)\n      }\n      setTimeout(_ => {\n        const e = document.getElementById(fen)\n        if(e){          \n          e.scrollIntoView({block: \"center\", behavior: \"smooth\"})          \n        }        \n      }, 0)\n    },\n    recordMovePlayed(san, uci, prevFen, dontAdd){      \n      const fen = this.reportFen()\n      if(!fen) return\n\n      if(!dontAdd){\n        const index = this.history.findIndex(item => item.fen === prevFen)\n        \n        if(index < 0){                  \n          this.history.push({ genSan: san, genUci: uci, prevFen: prevFen, fen: fen })        \n        }else{          \n          this.history = this.history.slice(0, index + 1)\n          this.history.push({ genSan: san, genUci: uci, prevFen: prevFen, fen: fen })\n        }\n      }\n\n      this.getSelectedHistory()      \n      this.prompieces = []\n      this.prompiecesext = []\n      if(this.allowSetup) this.setUp()\n\n      const event = {\n        kind: \"moveplayed\",\n        prevFen: prevFen,\n        fen: fen,\n        genSan: san,\n        genUci: uci,\n        variant: this.pos.pos.rules,\n        history: this.history,\n      }\n\n      this.$emit(\"moveplayed\", event)\n\n      const nextallOn = this.nextallOn\n      //this.stopanalyzing()\n      this.nextallOn = nextallOn\n    },\n    prompiececlicked(ev){\n      const piece = ev.target.getAttribute(\"piece\")\n      const uci = this.promuci + piece\n      const san = this.pos.uciToSan(uci)\n      this.$refs.movetextinput.value = san\n      this.showpromotion = false\n    },\n    makesanmove(ev, san){\n      this.$refs.movetextinput.value = san\n      this.makemove()\n    },\n    makemove(){\n      const fen = this.reportFen()\n      if(!fen) return\n\n      const move = this.$refs.movetextinput.value\n\n      this.$refs.movetextinput.value = \"\"\n\n      if(move === this.nextsan){\n        this.step(1)\n        return\n      }\n\n      try {\n        const uci = this.pos.sanToUci(move)\n        this.pos.playSan(move)                \n        this.recordMovePlayed(move, uci, fen)\n      }catch(err){\n        try{\n          const san = this.pos.uciToSan(move)\n          this.pos.playSan(san)\n          this.recordMovePlayed(san, move, fen)          \n        }catch(err){\n          //window.alert(`Illegal move ${move} !`)\n          return\n        }\n      }\n    },\n    variantchanged(ev, setVariant){      \n      const variant = setVariant || ( this.$refs.variantselect ? this.$refs.variantselect.value : this.pos.pos.rules )\n      this.selectVariant(this.variants, variant)\n      this.pos.setVariant(variant)      \n      this.history = this.firstVariantChanged ? getLocal(\"board/history\", []) : []\n      this.firstVariantChanged = false\n      if(this.history.length){\n        const item = this.history.find(item => item.isSelected)        \n\n        if(!this.setFen(item.fen)) return\n\n        this.setUp()\n      } else {\n        this.recordMovePlayed(\"*\", \"*\", null)        \n      }\n    },\n    reset(){\n      this.variantchanged()\n    },\n    clicksan(ev){      \n      const fen = this.reportFen()\n      if(!fen) return\n\n      const san = ev.target.getAttribute(\"san\")      \n      const uci = this.pos.sanToUci(san)\n\n      if(san === this.nextsan){\n        this.step(1)\n      }else{\n        this.pos.playSan(san)\n        this.recordMovePlayed(san, uci, fen)\n      }      \n    },\n    buildLegalSans(){\n      const fen = this.reportFen()\n      if(!fen) return\n\n      const bookpos = new BookPosition(this.pos.pos.rules, fen)\n\n      const arrows = []\n\n      const poslegalsans = this.pos.allLegalSans()\n\n      this.legalsans = poslegalsans.map(san => {\n        const uci = this.pos.sanToUci(san)\n\n        const orig = uci.substring(0, 2)\n        const dest = uci.substring(2, 4)\n\n        let nextsan = null\n\n        let curr = this.getCurrentIndex()\n\n        if((curr >= 0) && (curr + 1 < this.history.length)){\n          nextsan = this.history[curr + 1].genSan\n        }\n\n        this.nextsan = nextsan\n\n        let sortvalue = 0\n        let klass = \"legalsan\"\n        if(san === nextsan) {\n          klass += \" histsan\"\n          sortvalue = 1000\n        }                \n\n        const rating = bookpos.getRating(san)\n\n        let brush = \"red\"\n        if(rating > 3) brush = \"blue\"\n        if(rating > 6) brush = \"green\"\n\n        if(rating){\n          arrows.push({orig, dest, brush})\n        }\n\n        sortvalue += 100 * rating\n        klass += \" \" + bookpos.getClass(san)        \n        return ({\n          san,\n          klass,\n          rating,\n          sortvalue,\n          key: this.sankey++\n        })\n      }).sort((a, b) => a.san.localeCompare(b.san)).sort((a,b) => b.sortvalue - a.sortvalue)\n\n      this.board.setShapes(arrows.concat(this.mymoveShapes()))\n\n      this.getSelectedHistory()\n    },\n    setUp(skipBook){\n      const fen = this.reportFen()\n      if(!fen) return\n\n      this.$refs.fentextinput.value = fen\n      const config = {\n          fen: fen,        \n          movable: { events: { after: this.movePlayed() } },\n          orientation: this.orientation,\n      };\n      this.board = Chessground(this.$refs.board, config);      \n      try{\n        const lastUci = this.getCurrent().genUci\n        if(lastUci.length >= 4){\n          const srcDest = [lastUci.substring(0, 2), lastUci.substring(2, 4)]\n          this.board.set({lastMove: srcDest})          \n        }        \n      }catch(err){window.alert(`could not highlight move ${err}`)}\n      this.buildLegalSans()\n      setLocal(\"board/history\", this.history)\n      if(!skipBook) this.getBook()\n\n      if(this.analyzing){\n        let multipv = parseInt(getLocal(\"analysis/maxmultipv\"))\n\n        const allLegalSans = this.pos.allLegalSans()\n        const numLegalSans = allLegalSans.length\n\n        if(numLegalSans === 0){\n          window.alert(\"No legal moves to analyze !\")\n          this.analyzing = false\n          return\n        }\n\n        if(numLegalSans < multipv) multipv = numLegalSans\n\n        const rules = this.pos.pos.rules\n\n        let variant = this.pos.pos.rules\n\n        if(rules == \"antichess\") variant = \"giveaway\"\n        if(rules == \"3check\") variant = \"threecheck\"\n\n        const payload = {\n          variant, \n          fen,\n          multipv,\n        }\n\n        console.log(\"payload\", payload)\n\n        if(this.engine){\n          this.engine.setcommand(\"go\", payload)\n        }        \n      }else{\n        this.info = null\n        \n        if(!skipBook) this.authStore.getItem(this.infoStoreKey()).then(info => {\n          if(info) this.info = info\n        })\n      }      \n    },\n    movePlayed(){\n      return (orig, dest, metadata) => {\n        const fen = this.reportFen()\n        if(!fen) return\n\n        const uci = `${orig}${dest}`        \n        const legals = this.pos.legalsForUci(uci)\n        const num = legals.length\n\n        if(!num){\n          //window.alert(`Illegal move ${uci} !`)\n          this.$refs.movetextinput.value = \"\"\n          this.showpromotion = false\n          this.setUp()\n          return\n        }\n\n        if(num > 1){\n          // handle promotion\n          this.prompieces = legals.map(legal => legal.substring(4, 5))\n\n          const fen = this.reportFen()\n          if(!fen) return\n\n          this.prompiecesext = this.prompieces.map(p => ({\n            p: p,\n            klass: \"prompiecediv \" + this.pieceToStyle(p, fen)              \n          }))\n          this.showpromotion = true          \n          this.$refs.movetextinput.value = \"Press piece !\"\n          this.promuci = uci          \n          return\n        }\n\n        this.$refs.movetextinput.value = \"\"\n        this.showpromotion = false\n        const san = this.pos.uciToSan(uci)\n\n        if(san === this.nextsan){\n          this.step(1)\n        }else{\n          this.pos.playSan(san)        \n          this.recordMovePlayed(san, uci, fen)        \n        }\n\n        this.trainmoveplayed(san)\n      }\n    }\n  },\n  mounted(){    \n    this.authStore = new AuthStore({\n      vm: this,\n      prodHost: this.prodhost,\n      isRemoteKey: key => key.match(/^analysisinfo/)\n    })\n\n    this.selectedgameid = localStorage.getItem(\"ui/selectedgameid\")\n    this.variantchanged()        \n    this.getGames(this.username)\n\n    this.engine = new LocalEngine(info => {\n      this.checkstate(info.state)\n\n      this.info = info\n\n      if(this.info.state === ENGINE_READY) this.enginestate = ENGINE_READY\n\n      if(this.info.state === ENGINE_RUNNING) this.enginestate = ENGINE_RUNNING\n\n      if(this.info.state === ENGINE_STOPPING) this.enginestate = ENGINE_STOPPING\n\n      const compactInfo = {\n        summary: this.info.summary\n      }\n      \n      /*setLocal(this.infoStoreKey(this.info.analyzedfen), this.info)*/\n\n      this.authStore.setItem(this.infoStoreKey(this.info.analyzedfen), compactInfo)\n\n      const shapes = this.info.summary.map((item, i) => {\n        item.display = item.uci\n\n        try{\n          const tempPos = Pos()\n          tempPos.setVariant(this.pos.pos.rules)\n          tempPos.setFen(this.info.analyzedfen)\n\n          item.display = tempPos.uciToSan(item.uci)\n\n          const line = item.pvalgebs.map(uci => {\n            const san = tempPos.uciToSan(uci)\n            tempPos.playSan(san)\n            return san\n          })\n\n          item.line = line.slice(1, Math.min(line.length, 5))\n        }catch(err){}\n\n        const orig = item.uci.substring(0, 2)\n        const dest = item.uci.substring(2, 4)\n        let brush = \"green\"\n        if(i > 0) brush = \"blue\"\n        if(i > 1) brush = \"yellow\"\n        if(i > 2) brush = \"red\"        \n        return {\n          orig, dest, brush\n        }\n      })\n\n      this.board.setShapes(shapes.concat(this.mymoveShapes()))\n    })\n\n    console.log(\"engine\", this.engine)\n\n    //this.engine.sendcommandtoengine(\"uci\\n\")\n\n    setInterval(_ => {\n      const state = this.engine.analysisinfo.state\n\n      this.checkstate(state)\n      \n      if(state === ENGINE_READY) this.enginestate = ENGINE_READY\n      if(state === ENGINE_RUNNING) this.enginestate = ENGINE_RUNNING\n      if(state === ENGINE_STOPPING) this.enginestate = ENGINE_STOPPING      \n\n      //console.log(\"engine state\", this.enginestate)\n    }, 500)\n  },\n  components:{\n    VueCustomTooltip,\n    Labeled,\n    Perstext,\n    Perscheck,\n  }\n}\n</script>\n\n<style>\n/* Chessground base */\n\n.cg-board-wrap {\n  width: 320px;\n  height: 320px;\n  position: relative;\n  display: block;\n}\n.cg-board {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n  line-height: 0;\n  background-size: cover;\n  cursor: pointer;\n}\n.cg-board square {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 12.5%;\n  height: 12.5%;\n}\n.cg-board square.move-dest {\n  background: radial-gradient(rgba(20, 85, 30, 0.5) 22%, #208530 0, rgba(0, 0, 0, 0.3) 0, rgba(0, 0, 0, 0) 0);\n}\n.cg-board square.premove-dest {\n  background: radial-gradient(rgba(20, 30, 85, 0.5) 22%, #203085 0, rgba(0, 0, 0, 0.3) 0, rgba(0, 0, 0, 0) 0);\n}\n.cg-board square.oc.move-dest {\n  background: radial-gradient(transparent 0%, transparent 80%, rgba(20, 85, 0, 0.3) 80%);\n}\n.cg-board square.oc.premove-dest {\n  background: radial-gradient(transparent 0%, transparent 80%, rgba(20, 30, 85, 0.2) 80%);\n}\n.cg-board .cg-square.move-dest.drag-over,\n.cg-board .cg-square.premove-dest.drag-over {\n  box-shadow: inset 0 0 10px 2px rgba(216, 85, 0, 0.9);\n}\n.cg-board square.last-move {\n  will-change: transform;\n  background-color: rgba(155, 199, 0, 0.41);\n}\n.cg-board square.selected {\n  background-color: rgba(20, 85, 30, 0.5);\n}\n.cg-board square.check {\n  background: radial-gradient(ellipse at center, rgba(255, 0, 0, 1) 0%, rgba(231, 0, 0, 1) 25%, rgba(169, 0, 0, 0) 89%, rgba(158, 0, 0, 0) 100%);\n}\n.cg-board square.current-premove {\n  background-color: rgba(20, 30, 85, 0.5);\n}\n.cg-board piece {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 12.5%;\n  height: 12.5%;\n  background-size: cover;\n  z-index: 2;\n  will-change: transform;\n}\n.cg-board piece.dragging {\n  cursor: move;\n  z-index: 9;\n}\n.cg-board piece.anim {\n  z-index: 8;\n}\n.cg-board piece.fading {\n  z-index: 1;\n  opacity: 0.5;\n}\n.cg-board-wrap div.over {\n  position: absolute;\n  top: 0;\n  left: 0;\n  background-color: rgba(20, 85, 30, 0.3);\n}\n.cg-board-wrap piece.ghost {\n  opacity: 0.3;\n}\n.cg-board-wrap svg {\n  overflow: hidden;\n  position: relative;\n  top: 0px;\n  left: 0px;\n  width: 100%;\n  height: 100%;\n  pointer-events: none;\n  z-index: 2;\n  opacity: 0.6;\n}\n.cg-board-wrap svg image {\n  opacity: 0.5;\n}\n.cg-board-wrap coords {\n  position: absolute;\n  display: flex;\n  pointer-events: none;\n  opacity: 0.8;\n  font-size: 9px;\n}\n.cg-board-wrap coords.ranks {\n  right: -15px;\n  top: 0;\n  flex-flow: column-reverse;\n  height: 100%;\n  width: 12px;\n}\n.cg-board-wrap coords.ranks.black {\n  flex-flow: column;\n}\n.cg-board-wrap coords.files {\n  bottom: -16px;\n  left: 0;\n  flex-flow: row;\n  width: 100%;\n  height: 16px;\n  text-transform: uppercase;\n  text-align: center;\n}\n.cg-board-wrap coords.files.black {\n  flex-flow: row-reverse;\n}\n.cg-board-wrap coords coord {\n  flex: 1 1 auto;\n}\n.cg-board-wrap coords.ranks coord {\n  transform: translateY(39%);\n}\n\n/* Chessground theme */\n\n.blue .cg-board-wrap {\n  background-image: url('data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHZpZXdCb3g9IjAgMCA4MDAgODAwIj4NCjxnIGlkPSJicm93bi1ib2FyZCI+DQo8ZyBpZD0iTGlnaHQiIGZpbGw9IiNkZWUzZTYiPg0KPHJlY3Qgd2lkdGg9IjgwMCIgaGVpZ2h0PSI4MDAiLz4NCjwvZz4NCjxnIGlkPSJGcmFtZSIgZmlsbD0ibm9uZSI+DQo8cmVjdCB3aWR0aD0iODAwIiBoZWlnaHQ9IjgwMCIvPg0KPC9nPg0KPGcgaWQ9IkRhcmsiIGZpbGw9IiM4Y2EyYWQiPg0KPGcgaWQ9InJheiI+DQo8ZyBpZD0iZHZhIj4NCjxnIGlkPSJ0cmkiPg0KPHJlY3QgeD0iMTAwIiB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIvPg0KPHJlY3QgeD0iMzAwIiB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIvPg0KPHJlY3QgeD0iNTAwIiB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIvPg0KPHJlY3QgeD0iNzAwIiB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIvPg0KPC9nPg0KPHVzZSB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMTAwLDEwMCkiIHhsaW5rOmhyZWY9IiN0cmkiLz4NCjwvZz4NCjx1c2UgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMCwyMDApIiB4bGluazpocmVmPSIjZHZhIi8+DQo8L2c+DQo8dXNlIHRyYW5zZm9ybT0idHJhbnNsYXRlKDAsNDAwKSIgeGxpbms6aHJlZj0iI3JheiIvPg0KPC9nPg0KPC9nPg0KPC9zdmc+');\n}\n.merida .cg-board piece.pawn.white {\n  background-image: url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNzcuMTciIGhlaWdodD0iMTc3LjE3IiBzaGFwZS1yZW5kZXJpbmc9Imdlb21ldHJpY1ByZWNpc2lvbiIgaW1hZ2UtcmVuZGVyaW5nPSJvcHRpbWl6ZVF1YWxpdHkiIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiB2aWV3Qm94PSIwIDAgNTAgNTAiPjxkZWZzPjxsaW5lYXJHcmFkaWVudCBpZD0iMCIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiIHgxPSIyMS4xMyIgeTE9IjM3LjM1IiB4Mj0iNzcuNzYiIHkyPSIzNy40NjkiIGdyYWRpZW50VHJhbnNmb3JtPSJtYXRyaXgoMSAwIDAgLjk3MzI0IDAgMS4yNDMpIj48c3RvcCBzdG9wLWNvbG9yPSIjZmZmIi8+PHN0b3Agb2Zmc2V0PSIxIiBzdG9wLWNvbG9yPSIjZmZmIiBzdG9wLW9wYWNpdHk9IjAiLz48L2xpbmVhckdyYWRpZW50PjwvZGVmcz48cGF0aCBkPSJtMjUgNDYuNDVoLTEzLjM5NGMtLjY2LTEuNjA3LS45OTEtMy4yODgtLjk5MS01LjA0IDAtMi45NzUuODY0LTUuNjQ0IDIuNTk5LTguMDIgMS43MzYtMi4zNjUgMy45NzEtNC4wNTQgNi42OTctNS4wNjgtMS4xNjgtLjUyNy0yLjEyNS0xLjMyNy0yLjg2Mi0yLjM5OC0uNzM3LTEuMDcxLTEuMTAxLTIuMjgzLTEuMTAxLTMuNjM0IDAtMS42ODkuNTc2LTMuMTU2IDEuNzM2LTQuMzkyIDEuMTUyLTEuMjQ0IDIuNTc0LTEuOTYxIDQuMjY3LTIuMTUxLTEuMzQ2LS45ODEtMi4wMi0yLjI4Mi0yLjAyLTMuODg5IDAtMS4zNTEuNDkxLTIuNTEzIDEuNDgyLTMuNDc3Ljk4Mi0uOTY0IDIuMTc2LTEuNDQyIDMuNTgxLTEuNDQyIDEuMzg5IDAgMi41ODIuNDc4IDMuNTczIDEuNDQyLjk5MS45NjQgMS40OSAyLjEyNiAxLjQ5IDMuNDc3IDAgMS42MDctLjY2OSAyLjkwOS0yLjAyIDMuODg5IDEuNjkzLjE5IDMuMTE2LjkwNiA0LjI2NyAyLjE1MSAxLjE2IDEuMjM2IDEuNzM2IDIuNzAzIDEuNzM2IDQuMzkyIDAgMS4zNTEtLjM3MyAyLjU2My0xLjEyNiAzLjYzNC0uNzUzIDEuMDcxLTEuNzEgMS44Ny0yLjg2MiAyLjM5OCAyLjcyNiAxLjAxNCA0Ljk2MSAyLjcwMyA2LjY5NyA1LjA2OCAxLjczNiAyLjM3MyAyLjU5OSA1LjA0IDIuNTk5IDguMDIgMCAxLjczOS0uMzIyIDMuNDItLjk2NSA1LjA0aC0xMy4zOTQiIGZpbGw9IiMxZjFhMTciLz48cGF0aCBkPSJtMjUgNDQuODA4aDEyLjE3NWMuMzQ3LTEuMTU0LjUyNS0yLjI5MS41MjUtMy40MDMgMC0yLjUxMy0uNzExLTQuNzg3LTIuMTQyLTYuODMxLTEuNDMxLTIuMDQ0LTMuMjc3LTMuNTUyLTUuNTItNC41MTYtMS41ODQtLjYyLTEuNjQzLS42NTktMS42NDMtMS43MzkgMC0uODQ5LjU1OS0xLjQ3NSAxLjY2OC0xLjg3OSAxLjUzMi0xLjA0NyAyLjMwMy0yLjQzMSAyLjMwMy00LjE1MyAwLTEuMjQ0LS40MzItMi4zMjQtMS4yODctMy4yNjMtLjg2NC0uOTMxLTEuOTA1LTEuNDY3LTMuMTI0LTEuNjE1LS45OTktLjA4Mi0xLjQ5LS42MjYtMS40OS0xLjY0IDAtLjQ1My4xNzgtLjg3My41NDItMS4yNjEuODk4LS42NzYgMS4zNDYtMS41NTcgMS4zNDYtMi42NTMgMC0uODk4LS4zMzktMS42NzMtLjk5OS0yLjMxNi0uNjYtLjY0My0xLjQ0OC0uOTY0LTIuMzU0LS45NjQtLjk0IDAtMS43NDQuMzIxLTIuMzk2Ljk2NC0uNjUyLjY0My0uOTc0IDEuNDE3LS45NzQgMi4zMTYgMCAxLjA3OS40NCAxLjk2MSAxLjMzOCAyLjY1My4zNjQuMzU0LjU0Mi43NzUuNTQyIDEuMjYxIDAgMS4wMTQtLjQ4MyAxLjU1Ny0xLjQ2NSAxLjY0LTEuMjM2LjE0OC0yLjI4Ni42ODQtMy4xMzMgMS42MTUtLjg1NS45MzktMS4yNzkgMi4wMi0xLjI3OSAzLjI2MyAwIDEuNzIyLjc3IDMuMTA2IDIuMzAzIDQuMTUzIDEuMTA5LjQxMiAxLjY2OCAxLjA0NiAxLjY2OCAxLjg3OSAwIDEuMDc5LS4wNjcgMS4xMTgtMS42NjggMS43MzktMi4yNDQuOTY0LTQuMDgxIDIuNDcyLTUuNTAzIDQuNTE2LTEuNDIyIDIuMDQ0LTIuMTM0IDQuMzE4LTIuMTM0IDYuODMxIDAgMS4xOTUuMTc4IDIuMzI0LjUyNSAzLjQwM2gxMi4xNzUiIGZpbGw9InVybCgjMCkiLz48L3N2Zz4=');\n} \n.merida .cg-board piece.bishop.white {\n  background-image: url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNzcuMTciIGhlaWdodD0iMTc3LjE3IiBzaGFwZS1yZW5kZXJpbmc9Imdlb21ldHJpY1ByZWNpc2lvbiIgaW1hZ2UtcmVuZGVyaW5nPSJvcHRpbWl6ZVF1YWxpdHkiIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiB2aWV3Qm94PSIwIDAgNTAgNTAiPjxkZWZzPjxsaW5lYXJHcmFkaWVudCBpZD0iMCIgeDE9IjIxLjEzIiB5MT0iMzcuNTkyIiB4Mj0iNzcuNjQiIHkyPSIzNy40NjkiIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIj48c3RvcCBzdG9wLWNvbG9yPSIjZmZmIi8+PHN0b3Agb2Zmc2V0PSIxIiBzdG9wLWNvbG9yPSIjZmZmIiBzdG9wLW9wYWNpdHk9IjAiLz48L2xpbmVhckdyYWRpZW50PjwvZGVmcz48cGF0aCBmaWxsPSIjMWYxYTE3IiBkPSJtMjUuNDQ3IDQyLjAxYy0uMjI5Ljk0LS41MTcgMS41OTItLjg0NyAxLjk1Ni0uMzMuMzY0LS43NjIuNzQ1LTEuMzEyIDEuMTQzLS41OTMuNDE1LTEuMjk1Ljc2Mi0yLjEwOCAxLjA1LS44MTMuMjg4LTEuNzEuMzY0LTIuNzAxLjIxMmwtNi45NjgtLjk2NWMtLjI4OC0uMDM0LS41MzMtLjAzNC0uNzYyIDAtLjIyLjAzNC0uNDMyLjA1MS0uNjM1LjA1MS0uMzQ3IDAtLjc4Ny4wNzYtMS4zMjEuMjM3LS41NDIuMTUyLS45NTcuMzgxLTEuMjUzLjY3N2wtMi40MDUtMy45NDZjLjI5Ni0uMzMuNTU5LS41NTkuNzg3LS42OTQuMjM3LS4xMjcuNTA4LS4yNzEuODIxLS40MTUuOTU3LS40NDkgMS45ODEtLjcyIDMuMDczLS44MjEuNDY2LS4wMzQuOTIzLS4wNDIgMS4zNjMtLjAyNS40NDkuMDE3LjkxNCAwIDEuMzk3LS4wNTEuODg5LjE1MiAxLjc4Ni4yODggMi42ODQuNDA2LjkwNi4xMjcgMS44MTIuMjU0IDIuNzE4LjM4OS45OTEgMCAxLjY2LS4xMDIgMi4wMS0uMjk2LjE4Ni0uMTAyLjQ3NC0uMjg4Ljg3Mi0uNTUuMzk4LS4yNjIuNzk2LS42NTIgMS4xOTQtMS4xNjgtLjg4MS0uMDkzLTEuNzctLjI2Mi0yLjY4NC0uNTA4LS45MDYtLjIzNy0xLjcxLS40OTEtMi40MDQtLjc1NGwyLjU4Mi02LjQwMWMtMS4yOTUtLjc0NS0yLjE5My0xLjMzOC0yLjcwOS0xLjc5NS0uNTA4LS40NTctLjkxNC0uOTgyLTEuMjExLTEuNTc1LS40MzItLjc2Mi0uNzExLTEuNDk5LS44My0yLjIxLS4xMjctLjcxMS0uMTc4LTEuMzQ2LS4xNjEtMS45MTMuMDE3LS45OTEuMjQ1LTIuMDgzLjcwMy0zLjI4NS40NTctMS4xOTQgMS4zMTItMi4yNjkgMi41NjUtMy4yMDkgMS4wNDEtLjc5NiAyLjA2Ni0xLjYxNyAzLjA1Ny0yLjQ1NS45OTEtLjg0NyAxLjk3My0xLjgyOSAyLjk0Ni0yLjk1NS0xLjIxOS0uNjI3LTEuODI5LTEuNjI2LTEuODI5LTIuOTk3IDAtLjkzMS4zMjItMS43MTkuOTc0LTIuMzg4LjY1Mi0uNjYgMS40NTYtLjk5MSAyLjM5Ni0uOTkxLjkyMyAwIDEuNzE5LjMzIDIuMzc5Ljk5MS42Ni42NjkuOTkxIDEuNDU2Ljk5MSAyLjM4OCAwIDEuMzU1LS42MSAyLjM1NC0xLjgyOSAyLjk5Ny45NTcgMS4xMjYgMS45MyAyLjEwOCAyLjkxMyAyLjk1NS45ODIuODM4IDIuMDIgMS42NiAzLjA5IDIuNDU1IDEuMjM2Ljk0IDIuMDgzIDIuMDIgMi41MjMgMy4yMDkuNDQ5IDEuMjAyLjY5NCAyLjI5NC43MiAzLjI4NSAwIC41NjctLjA1MSAxLjIwMi0uMTY5IDEuOTEzLS4xMTguNzExLS4zODEgMS40NDgtLjc5NiAyLjIxLS4zMy41OTMtLjc0NSAxLjExOC0xLjI1MyAxLjU3NS0uNS40NTctMS4zODkgMS4wNS0yLjY2NyAxLjc5NWwyLjU4MiA2LjQwMWMtLjcyOC4yNjMtMS41NDkuNTE3LTIuNDU1Ljc1NC0uOTE0LjI0Ni0xLjc4Ny40MTUtMi42MzMuNTA4LjM4MS41MTcuNzcuOTA2IDEuMTY4IDEuMTY4LjM5OC4yNjMuNjk0LjQ0OS44OTguNTUuMzQ3LjE5NSAxLjAxNi4yOTYgMi4wMS4yOTYuODg5LS4xMzYgMS43ODYtLjI2MyAyLjY5Mi0uMzg5Ljg5OC0uMTE4IDEuODAzLS4yNTQgMi43MTgtLjQwNi40NC4wNTEuODg5LjA2OCAxLjM0Ni4wNTEuNDU3LS4wMTcuOTIzLS4wMDggMS40MDUuMDI1IDEuMDU4LjEwMiAyLjA4My4zNzMgMy4wNzMuODIxLjI5Ni4xNDQuNTY3LjI4OC44MDQuNDE1LjI0NS4xMzUuNTA4LjM2NC44MDQuNjk0bC0yLjQzIDMuOTQ2Yy0uMjk2LS4yOTYtLjcxMS0uNTI1LTEuMjUzLS42NzctLjUzMy0uMTYxLS45NjUtLjIzNy0xLjI5NS0uMjM3LS4yMiAwLS40NC0uMDE3LS42Ni0uMDUxLS4yMi0uMDM0LS40NzQtLjAzNC0uNzU0IDBsLTYuOTUxLjk2NWMtLjk5MS4xNTItMS45MTMuMDg1LTIuNzYtLjE5NS0uODU1LS4yNzktMS41NTgtLjY1Mi0yLjEtMS4xMTgtLjU0Mi0uNDQ5LS45ODItLjgzLTEuMzA0LTEuMTUxLS4zMjItLjMyMi0uNTkzLS45NTctLjgwNC0xLjg5NyIvPjxwYXRoIGZpbGw9InVybCgjMCkiIGQ9Im0yNi4zMiAzOS4yYzAgMS4wOTIuMjQ1IDIuMDI0Ljc1MyAyLjc5NC41Ljc3IDEuMDQxIDEuMzcyIDEuNjI2IDEuNzk1LjkwNi42NjkgMi4yMzUuOTk5IDMuOTg4Ljk5OS40MzIgMCAxLjI3OS0uMDkzIDIuNTMyLS4yNzkgMS4wMjUtLjE2MSAxLjg1NC0uMjc5IDIuNDgxLS4zNTYuNjI3LS4wNzYgMS4wNS0uMTM1IDEuMjctLjE4Ni42MjctLjA4NSAxLjI4Ny0uMDY4IDEuOTgxLjA1MS4yNjIuMDY4LjU1OS4xMjcuODguMTg2LjMyMi4wNTkuNTkzLjE4Ni44MDQuMzgxbDEuMTk0LTEuOTNjLS42NzctLjM0Ny0xLjM5Ny0uNTkzLTIuMTU5LS43Mi0xLjI1My0uMjItMi4zNTQtLjI2My0zLjMwMi0uMTUyLS4yNzkuMDM0LS42NDMuMTE4LTEuMTAxLjI0NS0uNDU3LjEzNi0xLjA2Ny4yNjMtMS44NDYuMzczLTEuNjc2LjI3MS0yLjU1Ny4zOTgtMi42NTkuMzk4LS42NDQgMC0xLjIwMi0uMDc2LTEuNjg1LS4yNDYtLjQ4My0uMTY5LS45MDYtLjM0Ny0xLjI4Ny0uNTQyLS44ODEtLjM5OC0xLjc3LTEuMzM4LTIuNjg0LTIuODExaC0uNzg3bS0xLjc2MSAwaC0uNzk2Yy0uOTMxIDEuNDktMS44MTIgMi40My0yLjY1OSAyLjgxMS0uMzk4LjE5NS0uODMuMzczLTEuMzEyLjU0Mi0uNDgzLjE2OS0xLjAzMy4yNDYtMS42Ni4yNDYtLjExOSAwLS45OTktLjEyNy0yLjY1OS0uMzk4LS43ODctLjExLTEuNDIyLS4yMzctMS44OC0uMzczLS40NjYtLjEyNy0uODMtLjIxMi0xLjA5Mi0uMjQ1LS45NDgtLjExLTIuMDQtLjA2OC0zLjMwMi4xNTItLjc2Mi4xMjctMS40NzMuMzczLTIuMTM0LjcybDEuMTk0IDEuOTNjLjE5NS0uMTk1LjQ1Ny0uMzIyLjc3OS0uMzgxLjMyMi0uMDU5LjYxOC0uMTE4Ljg4LS4xODYuNjk0LS4xMTkgMS4zNTUtLjEzNiAxLjk4MS0uMDUxLjIyLjA1MS42NDMuMTEgMS4yNy4xODYuNjI3LjA3NiAxLjQ2NS4xOTUgMi41MDYuMzU2IDEuMjM2LjE4NiAyLjA4My4yNzkgMi41MzIuMjc5IDEuNzM2IDAgMy4wNjUtLjMzIDMuOTg4LS45OTkuNTY3LS40MjMgMS4xMDEtMS4wMjUgMS42LTEuNzk1LjUwOC0uNzcuNzYyLTEuNzAyLjc2Mi0yLjc5NG0uODg5LTkuMzQ3YzEuNiAwIDMuMTQxLjEyNyA0LjYxNC4zNzMgMS42MTctLjU3NiAyLjc5NC0xLjQ4MiAzLjUyMi0yLjcwMS42MjctMS4wNTguOTQtMi4yMjcuOTQtMy40OTcgMC0uNzYyLS4xODYtMS42LS41NjctMi41MjMtLjM4MS0uOTE0LS45OTktMS43NDQtMS44NjMtMi40ODktLjk3NC0uODEzLTIuMDQtMS43MDItMy4yLTIuNjY3LTEuMTUxLS45NjUtMi4zMDMtMi4xLTMuNDQ2LTMuMzg3LTEuMTYgMS4yODctMi4zMTEgMi40MjItMy40NzEgMy4zODctMS4xNi45NjUtMi4yMTggMS44NTQtMy4xNzUgMi42NjctLjg4MS43NDUtMS40OTkgMS41NzUtMS44NzEgMi40ODktLjM3Mi45MjMtLjU1OSAxLjc2MS0uNTU5IDIuNTIzIDAgMS4yNy4zMDUgMi40MzguOTE0IDMuNDk3LjcxMSAxLjIxOSAxLjg5NyAyLjEyNSAzLjU0OCAyLjcwMSAxLjQ1Ni0uMjQ2IDIuOTk3LS4zNzMgNC42MTQtLjM3M20wIDQuNTEzYzEuOTM5IDAgMy43OTMuMTk1IDUuNTc5LjU3NmwtMS4xODUtMy4wNTdjLTEuNDU2LS4yMjktMi45MjEtLjM0Ny00LjM5NC0uMzQ3LTEuNTA3IDAtMi45OC4xMTktNC40MTEuMzQ3bC0xLjE5NCAzLjA1N2MxLjc3LS4zODEgMy42NDEtLjU3NiA1LjYwNS0uNTc2bTAtMjMuNTM3YzEuMTI2IDAgMS42ODUtLjU1OSAxLjY4NS0xLjY4NSAwLTEuMTI2LS41NTktMS42OTMtMS42ODUtMS42OTMtMS4xMjYgMC0xLjY4NS41NjctMS42ODUgMS42OTMgMCAxLjEyNi41NTkgMS42ODUgMS42ODUgMS42ODVtMCAyNy4wMWMxLjEyNiAwIDIuMjE4LS4wOTMgMy4yODUtLjI3OSAxLjA2Ny0uMTk1IDIuMS0uNDIzIDMuMDktLjY4Ni0xLjkzOS0uNTA4LTQuMDY0LS43Ny02LjM3NS0uNzctMi4zNDUgMC00LjQ3LjI2My02LjM3NS43Ny45NTcuMjYzIDEuOTczLjQ5MSAzLjA0OC42ODYgMS4wNzUuMTg2IDIuMTg0LjI3OSAzLjMyNy4yNzltLS44ODktMTQuMzM0bC0yLjA2Ni0uMDI1Yy0uNTU5IDAtLjgzOC0uMjc5LS44MzgtLjg0NyAwLS41NTkuMjc5LS44MzguODM4LS44MzhoMi4wNjZ2LTIuMTM0YzAtLjU3Ni4yOTYtLjg3Mi44ODktLjg3Mi41NzYgMCAuODcyLjI5Ni44NzIuODcydjIuMTM0aDIuMTM0Yy41NDIgMCAuODEzLjI3OS44MTMuODM4IDAgLjU2Ny0uMjcxLjg0Ny0uODEzLjg0N2gtMi4xMzR2Mi4wMzJjMCAuNjAxLS4yOTYuODk4LS44NzIuODk4LS41OTMgMC0uODg5LS4yOTYtLjg4OS0uODk4di0yLjAxIi8+PC9zdmc+');\n}\n.merida .cg-board piece.knight.white {\n  background-image: url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNzcuMTciIGhlaWdodD0iMTc3LjE3IiBzaGFwZS1yZW5kZXJpbmc9Imdlb21ldHJpY1ByZWNpc2lvbiIgaW1hZ2UtcmVuZGVyaW5nPSJvcHRpbWl6ZVF1YWxpdHkiIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiB2aWV3Qm94PSIwIDAgNTAgNTAiPjxkZWZzPjxsaW5lYXJHcmFkaWVudCBpZD0iMCIgeDE9IjIxLjQwNSIgeDI9Ijc3LjY0IiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+PHN0b3Agc3RvcC1jb2xvcj0iI2ZmZiIvPjxzdG9wIG9mZnNldD0iMSIgc3RvcC1jb2xvcj0iI2ZmZiIgc3RvcC1vcGFjaXR5PSIwIi8+PC9saW5lYXJHcmFkaWVudD48L2RlZnM+PHBhdGggZmlsbD0iIzFmMWExNyIgZD0ibTI2LjE4IDkuMzk1YzIuNTk5LjE2OSA1IC44MzggNy4yMjIgMi4wMiAyLjIxIDEuMTY4IDQuMDk4IDIuNjc1IDUuNjU2IDQuNTEzIDEuMDkyIDEuMjg3IDIuMTE3IDIuODQ1IDMuMDgyIDQuNjY1Ljk3NCAxLjgxMiAxLjc0NCAzLjc0MiAyLjMyIDUuNzc0LjY2IDIuMzcxIDEuMDg0IDQuODUxIDEuMjUzIDcuNDU5LjE3OCAyLjU5OS4yNjMgNS4wMS4yNjMgNy4yM3Y1LjQwMmMwIDAtMS4yODcgMC0zLjg2MSAwLTIuNTY1IDAtNS45MDEgMC0xMC4wMSAwaC0xNi42MzdjLS4xNTIgMC0uMjItLjQwNi0uMjEyLTEuMjExLjAwOC0uODEzLjA1OS0xLjQ2NS4xNjEtMS45NjQuMDU5LS4zOTguMjItLjk1Ny40NjYtMS42ODUuMjU0LS43MjguNjYtMS42MDkgMS4yNDUtMi42NS4yNjItLjUzMy44ODktMS4zMDQgMS44OC0yLjMyLjk5OS0xLjAxNiAyLjEzNC0yLjIwMSAzLjQyOS0zLjUzOS43NDUtLjc2MiAxLjMyMS0xLjcxOSAxLjc0NC0yLjg3OS40MjMtMS4xNTEuNjAxLTIuMjAxLjUzMy0zLjE1LS42MS41LTEuMjc5LjkwNi0yLjAxIDEuMjE5LTMuNTA1IDEuMjUzLTYuMDUgMy4wNzMtNy42MTEgNS40NTItLjExOS4xNTItLjQ5MS44MjEtMS4xMTggMi4wMi0uMzMuNjI3LS42MTggMS4wNTgtLjg0NyAxLjI4Ny0uMzEzLjMxMy0uNzcxLjQ5MS0xLjM2My41MjUtLjkyMy4wNDItMS42NDMtLjM5OC0yLjE1OS0xLjM0Ni0uNjk0LjIwMy0xLjMxMi4yODgtMS44NjMuMjU0LS45MjMtLjM0Ny0xLjU5Mi0uNzItMi4wMS0xLjExOC0uODQ3LS44NDctMS4zODktMS42ODUtMS42NTEtMi41MzItLjI1NC0uODQ3LS4zODEtMS43NTMtLjM4MS0yLjcyNiAwLTEuMzg5Ljg1NS0zLjIyNiAyLjU4Mi01LjUxMiAyLjAyLTIuNjI1IDMuMDktNC42MzEgMy4yMTctNiAwLS41OTMuMDU5LTEuMjYyLjE3OC0yLjAxLjEwMi0uNTE3LjMwNS0xLjAxLjYxOC0xLjQ5LjIyLS4zMy4zNjQtLjU1OS40MzItLjY3Ny4wNzYtLjEyNy4yMTItLjMxMy40MTUtLjU1OS4xNDQtLjIwMy4yNzEtLjM1Ni4zNzMtLjQ1Ny4wOTMtLjExLjIyLS4yNTQuMzczLS40NC4xNzgtLjIxMi40MDYtLjQ1Ny42OTQtLjc0NS0uODgtMi40MTMtMS4yMzYtNC45MDItMS4wNjctNy40NTkgMy4yODUgMS4xNjggNi4wNSAzLjAxIDguMjggNS41MjkuNTUtMS44NzEgMS42MjYtMy4zODcgMy4yMjYtNC41MzggMS4zMjEuOTIzIDIuMzcxIDIuMTUxIDMuMTUgMy42NjYiLz48cGF0aCBmaWxsPSJ1cmwoIzApIiBkPSJtNDIuOTc2IDQ0LjY5M2MtLjAxNyAwIDAtLjQ0OS4wNDItMS4zNDYuMDUxLS45MDYuMDc2LTEuODguMDc2LTIuOTIxLjAxNy0yLjA2Ni4wMTctNC4yIDAtNi40MDktLjAxNy0yLjIxLS4zMTMtNC40MTEtLjg4OS02LjYxMy0uNTY3LTIuMTE3LTEuMTg1LTMuOTItMS44NjMtNS40MTktLjY3Ny0xLjQ5OS0xLjQxNC0yLjc4Ni0yLjIxLTMuODc4LTEuMTg1LTEuNzg2LTIuODExLTMuMzAyLTQuODYtNC41MzgtMi4wNDktMS4yNDUtNC4xOTEtMi4wNTctNi40MjYtMi40MzguMTUyLjgxMy4yMiAxLjYwOS4yMDMgMi4zODgtLjAzNC41OTMtLjMxMy44ODktLjg0Ny44ODktLjYxIDAtLjg4MS0uMjk2LS44MjEtLjg4OS4wNTEtMi4xODQtLjcyOC00LjA1Ni0yLjMyOC01LjYwNS0xLjI1MyAxLjMyMS0xLjkzOSAyLjg1My0yLjAzMiA0LjYwNi0uMDM0LjU4NC0uMzMuODM4LS44OTcuNzcxLS41MjUtLjAxNy0uNzg3LS4zMjItLjc4Ny0uOTE0IDAgMCAuMDE3LS4wNjguMDQyLS4yMDMtLjY3Ny4yMi0xLjM4OS41MjUtMi4xMzQuOTIzLS40NzQuMzMtLjg2NC4yNDUtMS4xNi0uMjQ2LS4yOTYtLjQ5OS0uMTY5LS44ODkuMzk4LTEuMTY4LjcxMS0uMzY0IDEuMjQ1LS42MzUgMS42MDktLjgyMS0xLjQyMi0xLjQ1Ni0zLjA0LTIuNjI1LTQuODYtMy41MjIuMTk1IDIuMzAzLjgzIDQuNDcgMS44ODggNi41MjguMjc5LjQyMy4yMTIuODA0LS4yMDMgMS4xMzUtLjQ2Ni4zNjQtLjg1NS4zMTMtMS4xNjgtLjE2OS0uMTEtLjE2OS0uMjc5LS40NjYtLjQ5MS0uODk3LS4zNDcuMzQ3LS41ODQuNjEtLjY5NC43Ny0uMTE4LjE1Mi0uMzIyLjQ4My0uNjEuOTkxLS4yODguNTE2LS40OTkuOTQtLjYzNSAxLjI3LS4xNDQuNDE1LS4yMTIuNzQ1LS4xODYgMS4wMS4wMjUuMjU0LjA1MS41MzMuMDY4Ljg1NS0uMTUyLjk3NC0uNDkxIDEuODg4LTEuMDEgMi43NTItLjUyNS44NTUtMS4xODUgMS45MDUtMS45OTggMy4xNS0uNzc5IDEuMTg1LTEuMzcyIDIuMDgzLTEuNzg2IDIuNjc1LS40MTUuNjAxLS43MjggMS4zNTUtLjk0IDIuMjg2LS4xNTIuNTU5LS4xNTIgMS4yNDUgMCAyLjA0MS4xNDQuODA0LjQ3NCAxLjQzMS45NjUgMS44OC43NjIuNzcgMS40OTkgMS4xMjYgMi4yMSAxLjA2Ny4yMjkgMCAuNTQyLS4wOTMuOTMxLS4yNzkuMzg5LS4xNzguNjg2LS41MjUuOTA2LTEuMDQxLjQyMy0uOTQuNzc5LTEuNDE0IDEuMDY3LTEuNDE0LjQwNiAwIC42MzUuMjM3LjY2OS42OTQgMCAuMTAyLS4xMzYuNTE3LS4zOTggMS4yNDUtLjE1Mi4zMy0uMzQ3LjY3Ny0uNTkzIDEuMDQxLS4zMjIuNDMyLS40NTcuNjEtLjQyMy41NDIuMjYyLjk0OC43MDMgMS4xMDkgMS4zMTIuNDk5LjE3OC0uMTc4LjM4OS0uNTI1LjYxOC0xLjAxNi4yMzctLjQ5OS42MDEtMS4xNjggMS4wOTItMi4wMS41ODQtLjk4MiAxLjIwMi0xLjc3IDEuODYzLTIuMzg4LjY2LS42MSAxLjI0NS0xLjEwOSAxLjc2MS0xLjQ4Mi4yOTYtLjIyLjY2LS40NjYgMS4wOTItLjc0NS40MzItLjI4OCAxLjAxLS41NzYgMS43MzYtLjg3Mi41NzYtLjIyOSAxLjIxOS0uNTE2IDEuOTIyLS44NTUuNzAzLS4zMzkgMS4zMjktLjc3IDEuODcxLTEuMzA0Ljc2Mi0uNzQ1IDEuMzQ2LTEuNjU5IDEuNzYxLTIuNzUyLjIyLS42MS4yOTYtMS4zNjMuMjQ1LTIuMjYxLS4xNDQtLjU1OS4xMzYtLjgzOC44NDctLjgzOC41MzMgMCAuODMuMjcxLjg5OC44MjEgMCAxLjg2My0uNTMzIDMuNTY0LTEuNTkyIDUuMTA1LjM0NyAxLjA1OC40NCAyLjIxOC4yNzEgMy40NzEtLjE0NCAxLjAxLS41IDIuMDkxLTEuMDUgMy4yNDMtLjU1OSAxLjE0My0xLjY3NiAyLjQyMi0zLjM2MSAzLjgyNy0zLjQyOSAyLjg0NS01LjA1IDUuNzc0LTQuODYgOC43OCAwIDAgMS40MDUgMCA0LjIyNSAwIDIuODE5IDAgNS40NyAwIDcuOTUgMGgxMy41NzJtLTMzLjYzOC0xNS4wOGMtLjQ4My4yOTYtLjc3LjY5NC0uODcyIDEuMTk0LjAxNy41NDItLjIzNy44MzgtLjc2Mi44ODktLjU4NC4wNjgtLjg4MS0uMTc4LS44OTgtLjc0NS4wNjgtMS4wOTIuNTUtMS45NTYgMS40NjUtMi41OTkuNDMyLS4zNDcuODMtLjMyMiAxLjE5NC4wOTMuMzY0LjQ0OS4zMjIuODM4LS4xMjcgMS4xNjhtNy4zNjYtMTEuODI4Yy4yMTIuMzMuMjk2LjY3Ny4yNDYgMS4wNDEtLjE2MSAxLjA1OC0uNzU0IDEuNDk5LTEuNzYxIDEuMzM4LS4yOTYtLjA1MS0uNTMzLS4xNTItLjcyLS4yOTYtLjA1OS4wNzYtLjE2MS4yNjItLjI5Ni41NDItLjE3OC41MzMtLjUyNS43MTEtMS4wNDEuNTUtLjUwOC0uMjAzLS43MTEtLjU3Ni0uNTkzLTEuMTE4Ljc0NS0xLjkwNSAyLjA5MS0zLjIwOSA0LjA0LTMuOTIuNTY3LS4xNjkuOTQgMCAxLjExOC40OTEuMjAzLjUzMy4wNTEuODk4LS40NDkgMS4wOTItLjA5My4wNTEtLjE4Ni4xMDItLjI3MS4xMzYtLjA4NS4wNDItLjE2OS4wOTMtLjI3MS4xNDQiLz48L3N2Zz4=');\n}\n.merida .cg-board piece.rook.white {\n  background-image: url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNzcuMTciIGhlaWdodD0iMTc3LjE3IiBzaGFwZS1yZW5kZXJpbmc9Imdlb21ldHJpY1ByZWNpc2lvbiIgaW1hZ2UtcmVuZGVyaW5nPSJvcHRpbWl6ZVF1YWxpdHkiIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiB2aWV3Qm94PSIwIDAgNTAgNTAiPjxkZWZzPjxsaW5lYXJHcmFkaWVudCBpZD0iMCIgeDE9IjIxLjM3NiIgeDI9Ijc3LjY0IiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+PHN0b3Agc3RvcC1jb2xvcj0iI2ZmZiIvPjxzdG9wIG9mZnNldD0iMSIgc3RvcC1jb2xvcj0iI2ZmZiIgc3RvcC1vcGFjaXR5PSIwIi8+PC9saW5lYXJHcmFkaWVudD48L2RlZnM+PHBhdGggZmlsbD0iIzFmMWExNyIgZD0ibTI4LjQwOCA5LjIyaDQuMjE2di0zLjM5NWg2Ljc5NnY5LjI5NWwtNS41IDQuMjQzdjExLjg1N2w0LjIyIDQuMjIxdjUuMDhoMy43ODl2NS45MjloLTMzLjg1OXYtNS45MjloMy43OTR2LTUuMDhsNC4yNDYtNC4yMjF2LTExLjg1N2wtNS41MDgtNC4yNDN2LTkuMjk1aDYuNzc0djMuMzk1aDQuMjQydi0zLjM5NWg2Ljc5eiIvPjxwYXRoIGZpbGw9InVybCgjMCkiIGQ9Im0zMy4wNyAxNy42NzhsMy4xNS0yLjU1N2gtMjIuNDJsMy4xNzUgMi41NTdoMTYuMW03LjE5NyAyNC41MjhoLTMwLjUxNHYyLjU1N2gzMC41MTR2LTIuNTU3bS0zLjg0NC01LjA1aC0yMi44MjZ2My4zN2gyMi44MjZ2LTMuMzdtLTQuMjE2LTE3Ljc4OGgtMTQuMzkzdjExLjg2MmgxNC4zOTN2LTExLjg2Mm01LjUwMy01LjkyN3YtNS45MjdoLTMuMzk1djMuMzk1aC03LjY0NXYtMy4zOTVoLTMuMzQ0djMuMzk1aC03LjYydi0zLjM5NWgtMy4zOTV2NS45MjdoMjUuNG0tMS45MTMgMjJsLTIuNTQ4LTIuNTMyaC0xNi40NTFsLTIuNTk5IDIuNTMyaDIxLjU5OCIvPjwvc3ZnPg==');\n}\n.merida .cg-board piece.queen.white {\n  background-image: url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNzcuMTciIGhlaWdodD0iMTc3LjE3IiBzaGFwZS1yZW5kZXJpbmc9Imdlb21ldHJpY1ByZWNpc2lvbiIgaW1hZ2UtcmVuZGVyaW5nPSJvcHRpbWl6ZVF1YWxpdHkiIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiB2aWV3Qm94PSIwIDAgNTAgNTAiPjxkZWZzPjxsaW5lYXJHcmFkaWVudCBpZD0iMCIgeDE9IjIxLjI1MyIgeTE9IjM3LjIyIiB4Mj0iNzcuNjQiIHkyPSIzNy4zNSIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiPjxzdG9wIHN0b3AtY29sb3I9IiNmZmYiLz48c3RvcCBvZmZzZXQ9IjEiIHN0b3AtY29sb3I9IiNmZmYiIHN0b3Atb3BhY2l0eT0iMCIvPjwvbGluZWFyR3JhZGllbnQ+PC9kZWZzPjxnIHN0cm9rZT0iIzFmMWExNyIgc3Ryb2tlLXdpZHRoPSIuMDc2Ij48cGF0aCBmaWxsPSIjMWYxYTE3IiBkPSJtNDQuNTQxIDE0LjcyM2MtLjk0IDAtMS43NDQtLjMzLTIuNDA1LS45ODItLjY2LS42NTItLjk5MS0xLjQ0OC0uOTkxLTIuMzk2IDAtLjkyMy4zMy0xLjcxOS45OTEtMi4zODguNjYtLjY3NyAxLjQ2NS0xLjAxIDIuNDA1LTEuMDEuOTMxIDAgMS43MjcuMzMgMi4zODggMS4wMS42Ni42NjkuOTkxIDEuNDY1Ljk5MSAyLjM4OCAwIC45NDgtLjMzIDEuNzQ0LS45OTEgMi4zOTYtLjY2LjY1Mi0xLjQ1Ni45ODItMi4zODguOTgyem0tNC4zMSAyOS4yMmMtLjgxMy43MTEtMi42MzMgMS4zMDQtNS40NjEgMS43ODYtMi44MjguNDc0LTYuMDg3LjcyLTkuNzcuNzItMy43NTEgMC03LjA1LS4yNTQtOS44OTgtLjc0NS0yLjg0NS0uNDk5LTQuNjQtMS4xMTgtNS4zODUtMS44NjNsMS41NjYtNS45NTItLjY5NC0zLjg5NS0yLjE4NC0zLjc5My0yLjEwOC0xNS40MjYgMS4yMTEtLjQ3NCA2Ljc5OSAxMS40NTUuMTUyLTEzLjY0IDEuNjg1LS4yOTYgNS4xODIgMTMuNzE2IDIuNzc3LTE0Ljc1N2gxLjcxOWwyLjc3NyAxNC43MDcgNS4xMzEtMTMuNjY1IDEuNzEuMjk2LjE1MiAxMy42NCA2LjgyNC0xMS40ODEgMS4xNi41NDItMi4wNTcgMTUuMzU5LTIuMjEgMy43OTMtLjY5NCAzLjk0NiAxLjYxNyA2LjAzem0tMjUuNjk2LTMxLjk1M2MtLjk0OCAwLTEuNzUzLS4zMjItMi40MTMtLjk3NC0uNjYtLjY1Mi0uOTkxLTEuNDU2LS45OTEtMi4zOTYgMC0uOTIzLjMzLTEuNzE5Ljk5MS0yLjM3OS42Ni0uNjYgMS40NjUtLjk5MSAyLjQxMy0uOTkxLjkyMyAwIDEuNzE5LjMzIDIuMzc5Ljk5MS42Ni42Ni45OTEgMS40NTYuOTkxIDIuMzc5IDAgLjk0LS4zMyAxLjc0NC0uOTkxIDIuMzk2LS42Ni42NTItMS40NTYuOTc0LTIuMzc5Ljk3NHptLTkuMTM2IDIuNzM1Yy0uOTQgMC0xLjczNi0uMzMtMi4zODgtLjk4Mi0uNjUyLS42NTItLjk4Mi0xLjQ0OC0uOTgyLTIuMzk2IDAtLjkyMy4zMy0xLjcxOS45ODItMi4zODguNjUyLS42NzcgMS40NDgtMS4wMSAyLjM4OC0xLjAxLjk0OCAwIDEuNzQ0LjMzIDIuNDEzIDEuMDEuNjYuNjY5Ljk5MSAxLjQ2NS45OTEgMi4zODggMCAuOTQ4LS4zMyAxLjc0NC0uOTkxIDIuMzk2LS42NjkuNjUyLTEuNDY1Ljk4Mi0yLjQxMy45ODJ6bTE5LjU1LTMuOTcxYy0uOTQgMC0xLjc0NC0uMzMtMi4zOTYtLjk5MS0uNjUyLS42Ni0uOTc0LTEuNDY1LS45NzQtMi40MDUgMC0uOTMxLjMyMi0xLjcyNy45NzQtMi4zODguNjUyLS42NiAxLjQ1Ni0uOTkxIDIuMzk2LS45OTEuOTIzIDAgMS43MjcuMzMgMi4zOTYuOTkxLjY2OS42Ni45OTkgMS40NTYuOTk5IDIuMzg4IDAgLjk0LS4zMyAxLjc0NC0uOTk5IDIuNDA1LS42NjkuNjYtMS40NzMuOTkxLTIuMzk2Ljk5MXptMTAuNDE0IDEuMjM2Yy0uOTQgMC0xLjczNi0uMzIyLTIuMzg4LS45NzQtLjY1Mi0uNjUyLS45ODItMS40NTYtLjk4Mi0yLjM5NiAwLS45MjMuMzMtMS43MTkuOTgyLTIuMzc5LjY1Mi0uNjYgMS40NDgtLjk5MSAyLjM4OC0uOTkxLjk0OCAwIDEuNzUzLjMzIDIuNDEzLjk5MS42Ni42Ni45OTEgMS40NTYuOTkxIDIuMzc5IDAgLjk0LS4zMyAxLjc0NC0uOTkxIDIuMzk2LS42Ni42NTItMS40NjUuOTc0LTIuNDEzLjk3NHoiLz48cGF0aCBmaWxsPSJ1cmwoIzApIiBkPSJtMzguMjIgNDMuMDRjLTMuMDItMS4yNTMtNy40MTctMS44OC0xMy4xNjYtMS44OC01Ljg3NiAwLTEwLjMxMi42NDMtMTMuMzI3IDEuOTMgMi44OTYgMS4xNDMgNy4zMTUgMS43MSAxMy4yNSAxLjcxIDIuODQ1IDAgNS40NDQtLjE1MiA3Ljc5OC0uNDY2IDIuMzYyLS4zMTMgNC4xNzQtLjc0NSA1LjQ0NC0xLjI5NXptLTEzLjI2Ny0zNC4wM2MxLjEwOSAwIDEuNjYtLjU1OSAxLjY2LTEuNjU5IDAtMS4wOTItLjU1LTEuNjQzLTEuNjYtMS42NDMtMS4wOTIgMC0xLjYzNC41NS0xLjYzNCAxLjY0MyAwIDEuMTAxLjU0MiAxLjY1OSAxLjYzNCAxLjY1OXptMTIuNjI0IDI0Ljk3N2MtMy4xOTItLjgxMy03LjM2Ni0xLjIxMS0xMi41MjItMS4yMTEtNS4yOTIgMC05LjUxNy40MDYtMTIuNjc1IDEuMjM2bC4zNzMgMi4zNzljMy4yMTctLjc2MiA3LjMyNC0xLjE0MyAxMi4zMDItMS4xNDMgNC45NDQgMCA4Ljk3NS4zNzMgMTIuMSAxLjExOGwuNDIzLTIuMzc5em0uNjE4LTEuNDlsMS42MTctMi44NTNjLS43OTYuMzIyLTEuNjA5LjQ3NC0yLjQzLjQ3NC0yLjIxOCAwLTMuOTg4LS44OTctNS4zMDktMi43MDEtLjk5MS44MjEtMi4xIDEuMjM2LTMuMzI3IDEuMjM2LTEuNTgzIDAtMi44NTMtLjYxOC0zLjc5My0xLjg2My0xLjA1OCAxLjE2LTIuMzIgMS43NDQtMy43OTMgMS43NDQtMS4xOTQgMC0yLjI4Ni0uNDA2LTMuMjc3LTEuMjE5LTEuMzg5IDEuNzctMy4xODMgMi42NS01LjM4NSAyLjY1LS44MzggMC0xLjY3Ni0uMTUyLTIuNTA2LS40NjZsMS43MzYgMi45NzJjMy4yMDktLjkyMyA3LjYyLTEuMzg5IDEzLjIyNS0xLjM4OSA1LjcwNiAwIDEwLjExOC40NzQgMTMuMjQyIDEuNDE0em0tMTEuMTEtNS45MjdsLTIuMTA4LTEyLjEzMy0yLjEwOCAxMS45ODljLjA1MS0uMDM0LjE2MS0uMTE5LjM0Ny0uMjU0LjM4MS0uNzQ1Ljk1Ny0xLjExOCAxLjczNi0xLjExOC44NDcgMCAxLjM4OS4zNzIgMS42MzQgMS4xMTguMTAyLjEwMi4yNzEuMjM3LjUuMzk4em02Ljg2Ny40NzR2LTExLjQ4OWwtNC4wODkgMTEuMjYxYy4zMTMtLjExLjU3Ni0uMjYyLjc5Ni0uNDQuMzMtLjQxNS43NzktLjYyNyAxLjMzOC0uNjI3LjY2IDAgMS4xOTQuMjk2IDEuNTkyLjg3Mi4wNDIuMDY4LjEwMi4xMzYuMTY5LjIxMi4wNjguMDc2LjEzNi4xNDQuMTk1LjIxMnptLTEzLjkzNi0uMzQ3bC00LjA2NC0xMS4xNDJ2MTEuMzM3Yy4wNDItLjA2OC4xMTktLjE0NC4yMi0uMjQ1LjMzLS42OTQuODcyLTEuMDQxIDEuNjM0LTEuMDQxLjYyNyAwIDEuMTQzLjI2MiAxLjU0MS43OTYuNDQ5LjE5NS42NjkuMjk2LjY2OS4yOTZ6bS02LjI5OSAxLjM4OWwtNS4zMzQtOS4yMDMgMS4zNjMgOC4zODJjLjk0LjY2IDEuODYzLjk5MSAyLjc1Mi45OTEuMzQ3IDAgLjc1NC0uMDU5IDEuMjE5LS4xNjl6bTIyLjM5NC4xMTljLjM4MS4xMTkuODA0LjE3OCAxLjI3LjE3OCAxLjAxIDAgMS45NDctLjMxMyAyLjgyOC0uOTRsMS4zNjMtOC41ODUtNS40NjEgOS4zNDd6bTEuNDkgMTIuNTU2bC0uNzQ1LTIuODAyYy0zLjI0My0uNzExLTcuMjA1LTEuMDY3LTExLjkwNC0xLjA2Ny00LjY0OCAwLTguNjExLjM1Ni0xMS44NzkgMS4wNjdsLS43NzEgMi44MjhjMy4wNzMtLjkzMSA3LjI5OC0xLjM4OSAxMi42NzUtMS4zODkgNS4yNDEgMCA5LjQ0OS40NDkgMTIuNjI0IDEuMzYzem0tMjMuMDYtMzAuNTE0YzEuMDg0IDAgMS42MzQtLjU0MiAxLjYzNC0xLjYzNCAwLTEuMDkyLS41NS0xLjYzNC0xLjYzNC0xLjYzNC0xLjEwOSAwLTEuNjY4LjU0Mi0xLjY2OCAxLjYzNCAwIDEuMDkyLjU1OSAxLjYzNCAxLjY2OCAxLjYzNHptMjAuODI4IDBjMS4xMDkgMCAxLjY2OC0uNTQyIDEuNjY4LTEuNjM0IDAtMS4wOTItLjU1OS0xLjYzNC0xLjY2OC0xLjYzNC0xLjA4NCAwLTEuNjM0LjU0Mi0xLjYzNCAxLjYzNCAwIDEuMDkyLjU1IDEuNjM0IDEuNjM0IDEuNjM0em0tMjkuOTY0IDIuNzM1YzEuMTA5IDAgMS42NjgtLjU1IDEuNjY4LTEuNjQzIDAtMS4xMDktLjU1OS0xLjY1OS0xLjY2OC0xLjY1OS0xLjA4NCAwLTEuNjM0LjU1LTEuNjM0IDEuNjU5IDAgMS4wOTIuNTUgMS42NDMgMS42MzQgMS42NDN6bTM5LjE0IDBjMS4wOTIgMCAxLjY0Mi0uNTUgMS42NDItMS42NDMgMC0xLjEwOS0uNTUtMS42NTktMS42NDItMS42NTktMS4xMDEgMC0xLjY2LjU1LTEuNjYgMS42NTkgMCAxLjA5Mi41NTkgMS42NDMgMS42NiAxLjY0M3oiLz48L2c+PC9zdmc+');\n}\n.merida .cg-board piece.king.white {\n  background-image: url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNzcuMTciIGhlaWdodD0iMTc3LjE3IiBzaGFwZS1yZW5kZXJpbmc9Imdlb21ldHJpY1ByZWNpc2lvbiIgaW1hZ2UtcmVuZGVyaW5nPSJvcHRpbWl6ZVF1YWxpdHkiIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiB2aWV3Qm94PSIwIDAgNTAgNTAiPjxkZWZzPjxsaW5lYXJHcmFkaWVudCBpZD0iMCIgeDE9IjIxLjM3NiIgeDI9Ijc3LjY0IiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+PHN0b3Agc3RvcC1jb2xvcj0iI2ZmZiIvPjxzdG9wIG9mZnNldD0iMSIgc3RvcC1jb2xvcj0iI2ZmZiIgc3RvcC1vcGFjaXR5PSIwIi8+PC9saW5lYXJHcmFkaWVudD48L2RlZnM+PGcgZmlsbD0iIzFmMWExNyI+PHBhdGggZD0ibTI1LjgyMSAxMi4wMmgtMS43NjF2LTMuMjUxaC0yLjA2NmMtLjU1OSAwLS44MzgtLjI3MS0uODM4LS44MjF2LS4wMjVjMC0uNTQyLjI3OS0uODEzLjgzOC0uODEzaDIuMDY2di0yLjEwOGMwLS41ODQuMjk2LS44NzIuODg5LS44NzIuNTc2IDAgLjg3Mi4yODguODcyLjg3MnYyLjEwOGgyLjEzNGMuNTQyIDAgLjgxMy4yNzEuODEzLjgxM3YuMDI1YzAgLjU1LS4yNzEuODIxLS44MTMuODIxbC0yLjExNy4wMjUtLjAxNyAzLjIyNiIvPjxwYXRoIGQ9Im0xMS4wMyAzNy43NDRsLS44MTMtNC42NGMtLjAxNyAwLS4wNDItLjAzNC0uMDc2LS4xMDItLjA4NS0uMTE4LS4zMjItLjI3MS0uNzExLS40NTctLjM4MS0uMTk1LS44MzgtLjUxNi0xLjM0Ni0uOTgyLS43MjgtLjYxLTEuMjk1LTEuMTA5LTEuNzAyLTEuNDktLjQwNi0uMzczLS43NzEtLjc4Ny0xLjEwMS0xLjIzNi0xLjAxLTEuMzg5LTEuNTc1LTMuMDY1LTEuNjg1LTUuMDQtLjE2OS0xLjg5Ny42MDEtMy43OTMgMi4zMDMtNS42ODEgMS43MTktMS44OCA0LjA0Ny0yLjc2OSA2Ljk2OC0yLjY1IDEuMDkyLjA2OCAyLjM3OS4zMyAzLjg0NC43OTYuNDgzLjE5NS45NzQuMzkgMS40ODIuNTc2LjUuMTk1Ljk5OS4zODkgMS40OTkuNTg0LjI2Mi4xMzUuNS4yNzEuNjk0LjM5OC0uMDg1LS4zNDctLjEyNy0uNjk0LS4xMjctMS4wNDEgMC0xLjI4Ny40NTctMi4zODggMS4zOC0zLjMwMi45MTQtLjkwNiAyLjAyNC0xLjM3MiAzLjMxMS0xLjM4OSAxLjI4NyAwIDIuMzg4LjQ2NiAzLjMwMiAxLjM4LjkwNi45MTQgMS4zNjMgMi4wMiAxLjM2MyAzLjI4NSAwIC4yNjItLjAzNC42MS0uMTAyIDEuMDQxLjIyOS0uMTQ0LjQ1Ny0uMjcxLjY2OS0uMzcyLjc2Mi0uMzMgMS43NjEtLjcyIDMuMDEtMS4xNiAxLjQyMi0uNDgzIDIuNzAxLS43NTQgMy44NDQtLjgyMSAyLjkyMS0uMTM2IDUuMjQxLjc1NCA2Ljk0MyAyLjY1IDEuNjY4IDEuODg4IDIuNDQ3IDMuNzg1IDIuMzI4IDUuNjgxLS4xMjcgMS45NzMtLjcwMyAzLjY0OS0xLjcxIDUuMDQtLjMzLjQ0OS0uNzAzLjg2NC0xLjExOCAxLjI1My0uNDA2LjM5LS45NjUuODgxLTEuNjYgMS40NzMtLjU0Mi40NjYtMS4wMS43OTYtMS4zODkuOTgyLS4zODEuMTg2LS42MDEuMzQ3LS42NjkuNDU3LS4wMTcuMDM0LS4wMzQuMDU5LS4wNTEuMDc2LS4wMTcuMDE3LS4wMjUuMDM0LS4wMjUuMDUxbC0uNzk2IDQuNjY1IDEuNjQzIDYuMTIxYy0uODMuNzQ1LTIuNjg0IDEuMzU1LTUuNTU0IDEuODM3LTIuODc5LjQ4My02LjIwNi43Mi05Ljk3NC43Mi0zLjgzNSAwLTcuMjE0LS4yNTQtMTAuMTE4LS43NTQtMi45MTItLjUwOC00Ljc0MS0xLjE0My01LjQ4Ni0xLjg5N2wxLjYzNC02LjA1Ii8+PC9nPjxwYXRoIGZpbGw9InVybCgjMCkiIGQ9Im0yNS43OTYgMjkuNTMyYzIuODQ1LjAzNCA1LjQ0NC4yMDMgNy44MDYuNTA4IDIuMzcxLjMwNSA0LjIyNS42OTQgNS41NjMgMS4xNTEuNjI3LS40OTEgMS4zMTItMS4wNDEgMi4wNTctMS42NTEuNzQ1LS42MDEgMS4zNjMtMS4yMTkgMS44NjMtMS44NDYuNzg3LTEuMDEgMS4xODUtMi4zMzcgMS4xODUtMy45OTYgMC0xLjQ4Mi0uMzU2LTIuNzI2LTEuMDY3LTMuNzE3LTEuMjctMS44NTQtMy4yMDktMi43NzctNS44LTIuNzc3LTEuNTU4IDAtMy4xNS4zMjItNC43OTIuOTY1LTEuNDM5LjU4NC0yLjUzMiAxLjIyOC0zLjI2OCAxLjkzOS0xLjM4OSAxLjM4OS0yLjQyMSAzLjE3NS0zLjA4MiA1LjM1MS0uMjI5Ljc3OS0uMzY0IDEuNDktLjQwNiAyLjEyNS0uMDQyLjYzNS0uMDU5IDEuMjg3LS4wNTkgMS45NDdtLTEzLjI1IDYuNjk3YzMuMTQxLS43OTYgNy4zMDctMS4xOTQgMTIuNTA1LTEuMTk0IDUuMDg5IDAgOS4yMDMuMzgxIDEyLjMyNyAxLjE0M2wuNjE4LTMuNjQ5Yy0zLjMyNy0uODcyLTcuNjcxLTEuMzEyLTEzLjA1LTEuMzEyLTUuNDEgMC05Ljc0NS40NDktMTMuMDIgMS4zMzhsLjYxOCAzLjY3NW0yNS4yOTggNC40MTFsLS43MzctMi44NDVjLTMuMjc3LS43MjgtNy4zMzItMS4wOTItMTIuMTU4LTEuMDkyLTQuODA5IDAtOC44NTYuMzY0LTEyLjEzMyAxLjA5MmwtLjc4NyAyLjg3YzMuMTU4LS45MjMgNy40NjgtMS4zODkgMTIuOTQ1LTEuMzg5IDUuNDQ0IDAgOS43MjguNDU3IDEyLjg2OSAxLjM2M20uNjUyIDIuMzM3Yy0zLjE5Mi0xLjI4Ny03LjY3OS0xLjkzOS0xMy40NDUtMS45MzktNS45ODYgMC0xMC41MTYuNjYtMTMuNTk4IDEuOTkgMi45MTMgMS4xNTEgNy40MTcgMS43MzYgMTMuNTIxIDEuNzM2IDIuOTEzIDAgNS41NjMtLjE2MSA3Ljk1OS0uNDgzIDIuNDA0LS4zMjIgNC4yNS0uNzYyIDUuNTYzLTEuMzA0bS0xNC40MTktMTMuNDQ1Yy0uMDA4LS42NDMtLjAzNC0xLjI4Ny0uMDY4LTEuOTIyLS4wMzQtLjYzNS0uMTYxLTEuMzQ2LS4zNzItMi4xMjUtLjY3Ny0yLjIxLTEuNzAyLTMuOTk2LTMuMDgyLTUuMzUxLS43MTEtLjY5NC0xLjc5NS0xLjM0Ni0zLjI2OC0xLjkzOS0xLjY4NS0uNjYtMy4yODUtLjk5MS00Ljc5Mi0uOTkxLTIuNjA4IDAtNC41NDcuOTMxLTUuOCAyLjgwMi0uNzExLjk5MS0xLjA2NyAyLjIzNS0xLjA2NyAzLjcxNyAwIDEuNjI2LjM5OCAyLjk1NSAxLjE4NSAzLjk5Ni40ODMuNjEgMS4wOTIgMS4yMjggMS44MzcgMS44MzcuNzQ1LjYxIDEuNDM5IDEuMTY4IDIuMDgzIDEuNjYgMi44OTYtMS4wNDEgNy4zNDEtMS42IDEzLjM0My0xLjY4NW0uODcyLTQuNjE0Yy4xMTktLjQ2Ni4yMTItLjc4Ny4yOTYtLjk2NS4xNjktLjY0My4zNTYtMS4xOTQuNTc2LTEuNjQzLjA5My0uMjc5LjIzNy0uNjAxLjQzMi0uOTc0LjE4Ni0uMzczLjM4OS0uODA0LjYxLTEuMjc5LjEyNy0uMjc5LjI3MS0uNjI3LjQxNS0xLjAzMy4xNTItLjQwNi4zMDUtLjgwNC40NDktMS4yMDIuMTM1LS4zMy4yMDMtLjY4Ni4yMDMtMS4wNjcgMC0uODEzLS4yOTYtMS40OTktLjg3Mi0yLjA2Ni0uNTc2LS41NzYtMS4yNzktLjg2NC0yLjEwOC0uODY0LTEuOTY0IDAtMi45NTUuOTkxLTIuOTU1IDIuOTU1IDAgLjM4MS4wNjguNzM3LjIwMyAxLjA2Ny4zNjQgMS4wNzUuNjQzIDEuODIuODM4IDIuMjM1LjIyLjQ3NC40MTUuOTA2LjYwMSAxLjI3OS4xNzguMzcyLjMzOS42OTQuNDY2Ljk3NC4yMi41NS4zOTggMS4wOTIuNTUgMS42NDMuMDM0LjA5My4xMjcuNDE1LjI5Ni45NCIvPjwvc3ZnPg==');\n}\n.merida .cg-board piece.pawn.black {\n  background-image: url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNzcuMTciIGhlaWdodD0iMTc3LjE3IiBzaGFwZS1yZW5kZXJpbmc9Imdlb21ldHJpY1ByZWNpc2lvbiIgaW1hZ2UtcmVuZGVyaW5nPSJvcHRpbWl6ZVF1YWxpdHkiIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiB2aWV3Qm94PSIwIDAgNTAgNTAiPjxwYXRoIGQ9Im0yNSA0Ni40NWgtMTMuMzk0Yy0uNjYtMS42NTEtLjk5MS0zLjM3OC0uOTkxLTUuMTgyIDAtMy4wNTYuODY0LTUuOCAyLjU5OS04LjIzOCAxLjczNi0yLjQzIDMuOTcxLTQuMTY2IDYuNjk3LTUuMjA3LTEuMTY4LS41NDItMi4xMjUtMS4zNjMtMi44NjItMi40NjQtLjczNy0xLjEwMS0xLjEwMS0yLjM0NS0xLjEwMS0zLjczNCAwLTEuNzM2LjU3Ni0zLjI0MyAxLjczNi00LjUxMyAxLjE1Mi0xLjI3OCAyLjU3NC0yLjAyIDQuMjY3LTIuMjEtMS4zNDYtMS4wMS0yLjAyLTIuMzQ1LTIuMDItMy45OTYgMC0xLjM4OS40OTEtMi41ODIgMS40ODItMy41NzMuOTgyLS45OTEgMi4xNzYtMS40ODIgMy41ODEtMS40ODIgMS4zODkgMCAyLjU4Mi40OTEgMy41NzMgMS40ODIuOTkxLjk5MSAxLjQ5IDIuMTg0IDEuNDkgMy41NzMgMCAxLjY1MS0uNjY5IDIuOTg5LTIuMDIgMy45OTYgMS42OTMuMTk1IDMuMTE2LjkzMSA0LjI2NyAyLjIxIDEuMTYgMS4yNyAxLjczNiAyLjc3NyAxLjczNiA0LjUxMyAwIDEuMzg5LS4zNzMgMi42MzMtMS4xMjYgMy43MzQtLjc1MyAxLjEwMS0xLjcxIDEuOTIyLTIuODYyIDIuNDY0IDIuNzI2IDEuMDQxIDQuOTYxIDIuNzc3IDYuNjk3IDUuMjA3IDEuNzM2IDIuNDM4IDIuNTk5IDUuMTgyIDIuNTk5IDguMjM4IDAgMS43ODYtLjMyMiAzLjUxNC0uOTY1IDUuMTgyaC0xMy4zOTQiIGZpbGw9IiMxZjFhMTciIHRyYW5zZm9ybT0ibWF0cml4KDEgMCAwIC45NzMyNCAwIDEuMjQzKSIvPjwvc3ZnPg==');\n}\n.merida .cg-board piece.bishop.black {\n  background-image: url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNzcuMTciIGhlaWdodD0iMTc3LjE3IiBzaGFwZS1yZW5kZXJpbmc9Imdlb21ldHJpY1ByZWNpc2lvbiIgaW1hZ2UtcmVuZGVyaW5nPSJvcHRpbWl6ZVF1YWxpdHkiIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiB2aWV3Qm94PSIwIDAgNTAgNTAiPjxkZWZzPjxsaW5lYXJHcmFkaWVudCBpZD0iMCIgeDE9IjIxLjA5IiB5MT0iMzcuMSIgeDI9Ijc3LjY3IiB5Mj0iMzcuNDY5IiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+PHN0b3Agc3RvcC1jb2xvcj0iI2ZmZiIvPjxzdG9wIG9mZnNldD0iMSIgc3RvcC1jb2xvcj0iI2ZmZiIgc3RvcC1vcGFjaXR5PSIwIi8+PC9saW5lYXJHcmFkaWVudD48L2RlZnM+PHBhdGggZD0ibTI1IDQyLjE2Yy0uMjI5Ljk0LS41MTcgMS41OTItLjg0NyAxLjk1Ni0uMzMuMzY0LS43NjIuNzQ1LTEuMzEyIDEuMTQzLS41OTMuNDE1LTEuMjk1Ljc2Mi0yLjEwOCAxLjA1LS44MTMuMjg4LTEuNzEuMzY0LTIuNzAxLjIxMmwtNi45NjgtLjk2NWMtLjI4OC0uMDM0LS41MzMtLjAzNC0uNzYyIDAtLjIyLjAzNC0uNDMyLjA1MS0uNjM1LjA1MS0uMzQ3IDAtLjc4Ny4wNzYtMS4zMjEuMjM3LS41NDIuMTUyLS45NTcuMzgxLTEuMjUzLjY3N2wtMi40MDQtMy45NDZjLjI5Ni0uMzMuNTU5LS41NTkuNzg3LS42OTQuMjM3LS4xMjcuNTA4LS4yNzEuODIxLS40MTUuOTU3LS40NDkgMS45ODEtLjcyIDMuMDczLS44MjEuNDY2LS4wMzQuOTIzLS4wNDIgMS4zNjMtLjAyNS40NDkuMDE3LjkxNCAwIDEuMzk3LS4wNTEuODg5LjE1MiAxLjc4Ni4yODggMi42ODQuNDA2LjkwNi4xMjcgMS44MTIuMjU0IDIuNzE4LjM5Ljk5MSAwIDEuNjYtLjEwMiAyLjAxLS4yOTYuMTg2LS4xMDIuNDc0LS4yODguODcyLS41NS4zOTgtLjI2Mi43OTYtLjY1MiAxLjE5NC0xLjE2OC0uODgxLS4wOTMtMS43Ny0uMjYyLTIuNjg0LS41MDgtLjkwNi0uMjM3LTEuNzEtLjQ5MS0yLjQwNC0uNzU0bDIuNTgyLTYuNDAxYy0xLjI5NS0uNzQ1LTIuMTkzLTEuMzM4LTIuNzA5LTEuNzk1LS41MDgtLjQ1Ny0uOTE0LS45ODItMS4yMTEtMS41NzUtLjQzMi0uNzYyLS43MTEtMS40OTktLjgzLTIuMjEtLjEyNy0uNzExLS4xNzgtMS4zNDYtLjE2MS0xLjkxMy4wMTctLjk5MS4yNDUtMi4wODMuNzAzLTMuMjg1LjQ1Ny0xLjE5NCAxLjMxMi0yLjI2OSAyLjU2NS0zLjIwOSAxLjA0MS0uNzk2IDIuMDY2LTEuNjE3IDMuMDU3LTIuNDU1Ljk5MS0uODQ3IDEuOTczLTEuODI5IDIuOTQ2LTIuOTU1LTEuMjE5LS42MjctMS44MjktMS42MjYtMS44MjktMi45OTcgMC0uOTMxLjMyMi0xLjcxOS45NzQtMi4zODguNjUyLS42NiAxLjQ1Ni0uOTkxIDIuMzk2LS45OTEuOTIzIDAgMS43MTkuMzMgMi4zNzkuOTkxLjY2LjY2OS45OTEgMS40NTYuOTkxIDIuMzg4IDAgMS4zNTUtLjYxIDIuMzU0LTEuODI5IDIuOTk3Ljk1NyAxLjEyNiAxLjkzIDIuMTA4IDIuOTEzIDIuOTU1Ljk4Mi44MzggMi4wMiAxLjY1OSAzLjA5IDIuNDU1IDEuMjM2Ljk0IDIuMDgzIDIuMDEgMi41MjMgMy4yMDkuNDQ5IDEuMjAyLjY5NCAyLjI5NS43MiAzLjI4NSAwIC41NjctLjA1MSAxLjIwMi0uMTY5IDEuOTEzLS4xMTguNzExLS4zODEgMS40NDgtLjc5NiAyLjIxLS4zMy41OTMtLjc0NSAxLjExOC0xLjI1MyAxLjU3NS0uNS40NTctMS4zODkgMS4wNS0yLjY2NyAxLjc5NWwyLjU4MiA2LjQwMWMtLjcyOC4yNjMtMS41NDkuNTE3LTIuNDU1Ljc1NC0uOTE0LjI0Ni0xLjc4Ny40MTUtMi42MzMuNTA4LjM4MS41MTcuNzcxLjkwNiAxLjE2OCAxLjE2OC4zOTguMjYzLjY5NC40NDkuODk3LjU1LjM0Ny4xOTUgMS4wMTYuMjk2IDIuMDEuMjk2Ljg4OS0uMTM2IDEuNzg3LS4yNjMgMi42OTItLjM5Ljg5OC0uMTE4IDEuODAzLS4yNTQgMi43MTgtLjQwNi40NC4wNTEuODg5LjA2OCAxLjM0Ni4wNTEuNDU3LS4wMTcuOTIzLS4wMDggMS40MDYuMDI1IDEuMDU4LjEwMiAyLjA4My4zNzMgMy4wNzMuODIxLjI5Ni4xNDQuNTY3LjI4OC44MDQuNDE1LjI0NS4xMzUuNTA4LjM2NC44MDQuNjk0bC0yLjQzIDMuOTQ2Yy0uMjk2LS4yOTYtLjcxMS0uNTI1LTEuMjUzLS42NzctLjUzMy0uMTYxLS45NjUtLjIzNy0xLjI5NS0uMjM3LS4yMiAwLS40NC0uMDE3LS42Ni0uMDUxLS4yMi0uMDM0LS40NzQtLjAzNC0uNzU0IDBsLTYuOTUxLjk2NWMtLjk5MS4xNTItMS45MTMuMDg1LTIuNzYtLjE5NS0uODU1LS4yNzktMS41NTgtLjY1Mi0yLjEtMS4xMTgtLjU0Mi0uNDQ5LS45ODItLjgzLTEuMzA0LTEuMTUxLS4zMjItLjMyMi0uNTkzLS45NTctLjgwNC0xLjg5NyIgZmlsbD0iIzFmMWExNyIvPjxwYXRoIGQ9Im0yNC4wOSAyMy43MDV2Mi4xMDhjMCAuNjEuMzA1LjkxNC45MTQuOTE0LjYxIDAgLjkxNC0uMzA1LjkxNC0uOTE0di0yLjEzNGgyLjIzNWMuNTc2IDAgLjg3Mi0uMjk2Ljg3Mi0uODk3IDAtLjU5My0uMjk2LS44ODktLjg3Mi0uODg5aC0yLjIzNXYtMi4yMzVjMC0uNjEtLjMwNS0uOTE0LS45MTQtLjkxNC0uNjEgMC0uOTE0LjMwNS0uOTE0LjkxNHYyLjIzNWgtMi4xODRjLS41ODQgMC0uODcyLjI5Ni0uODcyLjg4OSAwIC42MDEuMjg4Ljg5Ny44NzIuODk3bDIuMTg0LjAyNW03LjUxIDEzLjc0MWwtMS4wNDEtMi41MzFjLTEuNjg1LS4zNjQtMy41MzktLjU0Mi01LjU1NC0uNTQyLTEuOTk4IDAtMy44MzUuMTc4LTUuNTAzLjU0MmwtMS4wNDEgMi41MDZjMi4wNDktLjUxNiA0LjIzMy0uNzcgNi41NDUtLjc3IDIuMjg2IDAgNC40NzkuMjYyIDYuNTk2Ljc5Nm0tMi4wODMtNS4xMTRsLS43Mi0xLjczNnYtLjY2OWMtMS4yNTMtLjE3OC0yLjUyMy0uMjcxLTMuNzkzLS4yNzEtMS4yMzYgMC0yLjQ5OC4wOTMtMy43NjguMjcxbC0uMDI1LjY2OS0uNjY5IDEuNzM2YzEuNDA1LS4yNDYgMi44ODctLjM3MyA0LjQ2Mi0uMzczIDEuNTkyIDAgMy4wOS4xMjcgNC41MTMuMzczbS0uODY0IDkuMzgxYy0uNjYtLjQ5OS0xLjMyOS0xLjI4Ny0xLjk5LTIuMzYyaC0uNzg3YzAgLjgxMy4xODYgMS42LjU2NyAyLjM2MmgyLjIxbS01LjExNCAwYy4zODEtLjgxMy41NzYtMS42LjU3Ni0yLjM2MmgtLjc5NmMtLjY0MyAxLjA1OC0xLjMxMiAxLjg0Ni0yLjAyIDIuMzYyaDIuMjM1IiBmaWxsPSJ1cmwoIzApIi8+PC9zdmc+');\n}\n.merida .cg-board piece.knight.black {\n  background-image: url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNzcuMTciIGhlaWdodD0iMTc3LjE3IiBzaGFwZS1yZW5kZXJpbmc9Imdlb21ldHJpY1ByZWNpc2lvbiIgaW1hZ2UtcmVuZGVyaW5nPSJvcHRpbWl6ZVF1YWxpdHkiIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiB2aWV3Qm94PSIwIDAgNTAgNTAiPjxkZWZzPjxsaW5lYXJHcmFkaWVudCBpZD0iMCIgeDE9IjIxLjI1MyIgeTE9IjM3LjU5MiIgeDI9Ijc3LjY0IiB5Mj0iMzcuNDY5IiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+PHN0b3Agc3RvcC1jb2xvcj0iI2ZmZiIvPjxzdG9wIG9mZnNldD0iMSIgc3RvcC1jb2xvcj0iI2ZmZiIgc3RvcC1vcGFjaXR5PSIwIi8+PC9saW5lYXJHcmFkaWVudD48L2RlZnM+PHBhdGggZmlsbD0iIzFmMWExNyIgZD0ibTI2LjE4IDkuMzk1YzIuNTk5LjE2OSA1IC44MzggNy4yMjIgMi4wMiAyLjIxIDEuMTY4IDQuMDk4IDIuNjc1IDUuNjU2IDQuNTEzIDEuMDkyIDEuMjg3IDIuMTE3IDIuODQ1IDMuMDgyIDQuNjY1Ljk3NCAxLjgxMiAxLjc0NCAzLjc0MiAyLjMyIDUuNzc0LjY2IDIuMzcxIDEuMDg0IDQuODUxIDEuMjUzIDcuNDU5LjE3OCAyLjU5OS4yNjMgNS4wMS4yNjMgNy4yM3Y1LjQwMmMwIDAtMS4yODcgMC0zLjg2MSAwLTIuNTY1IDAtNS45MDEgMC0xMC4wMSAwaC0xNi42MzdjLS4xNTIgMC0uMjItLjQwNi0uMjEyLTEuMjExLjAwOC0uODEzLjA1OS0xLjQ2NS4xNjEtMS45NjQuMDU5LS4zOTguMjItLjk1Ny40NjYtMS42ODUuMjU0LS43MjguNjYtMS42MDkgMS4yNDUtMi42NS4yNjItLjUzMy44ODktMS4zMDQgMS44OC0yLjMyLjk5OS0xLjAxNiAyLjEzNC0yLjIwMSAzLjQyOS0zLjUzOS43NDUtLjc2MiAxLjMyMS0xLjcxOSAxLjc0NC0yLjg3OS40MjMtMS4xNTEuNjAxLTIuMjAxLjUzMy0zLjE1LS42MS41LTEuMjc5LjkwNi0yLjAxIDEuMjE5LTMuNTA1IDEuMjUzLTYuMDUgMy4wNzMtNy42MTEgNS40NTItLjExOS4xNTItLjQ5MS44MjEtMS4xMTggMi4wMi0uMzMuNjI3LS42MTggMS4wNTgtLjg0NyAxLjI4Ny0uMzEzLjMxMy0uNzcxLjQ5MS0xLjM2My41MjUtLjkyMy4wNDItMS42NDMtLjM5OC0yLjE1OS0xLjM0Ni0uNjk0LjIwMy0xLjMxMi4yODgtMS44NjMuMjU0LS45MjMtLjM0Ny0xLjU5Mi0uNzItMi4wMS0xLjExOC0uODQ3LS44NDctMS4zODktMS42ODUtMS42NTEtMi41MzItLjI1NC0uODQ3LS4zODEtMS43NTMtLjM4MS0yLjcyNiAwLTEuMzg5Ljg1NS0zLjIyNiAyLjU4Mi01LjUxMiAyLjAyLTIuNjI1IDMuMDktNC42MzEgMy4yMTctNiAwLS41OTMuMDU5LTEuMjYyLjE3OC0yLjAxLjEwMi0uNTE3LjMwNS0xLjAxLjYxOC0xLjQ5LjIyLS4zMy4zNjQtLjU1OS40MzItLjY3Ny4wNzYtLjEyNy4yMTItLjMxMy40MTUtLjU1OS4xNDQtLjIwMy4yNzEtLjM1Ni4zNzMtLjQ1Ny4wOTMtLjExLjIyLS4yNTQuMzczLS40NC4xNzgtLjIxMi40MDYtLjQ1Ny42OTQtLjc0NS0uODgtMi40MTMtMS4yMzYtNC45MDItMS4wNjctNy40NTkgMy4yODUgMS4xNjggNi4wNSAzLjAxIDguMjggNS41MjkuNTUtMS44NzEgMS42MjYtMy4zODcgMy4yMjYtNC41MzggMS4zMjEuOTIzIDIuMzcxIDIuMTUxIDMuMTUgMy42NjYiLz48cGF0aCBmaWxsPSJ1cmwoIzApIiBkPSJtMTUuNjg4IDE3Ljc4NmMuMzY0LS4xODYuNTQyLS4yNzkuNTQyLS4yNzkuNDk5LS4xOTUuNjUyLS41NTkuNDc0LTEuMDkyLS4xOTUtLjQ5MS0uNTc2LS42Ni0xLjE0My0uNDkxLTEuOTQ3LjcxMS0zLjI5NCAyLjAyLTQuMDQgMy45Mi0uMTE4LjU0Mi4wNzYuOTE0LjU5MyAxLjExOC41MTYuMTYxLjg2NC0uMDE3IDEuMDQxLS41NS4xMzYtLjI3OS4yMjktLjQ2Ni4yOTYtLjU0Mi4xODYuMTQ0LjQyMy4yNDUuNzIuMjk2IDEuMDEuMTYxIDEuNi0uMjc5IDEuNzYxLTEuMzM4LjA1MS0uMzY0LS4wMzQtLjcxMS0uMjQ2LTEuMDQxbS00LjExNSAxNi43NjRjLjA1OS0uMTUyLjE2OS0uMzczLjMyMi0uNjY5LjI3OS0uNjk0LjQxNS0xLjEwOS40MTUtMS4yNDUtLjAyNS0uNDU3LS4yNzEtLjY5NC0uNzItLjY5NC0uMzMgMC0uNzExLjQ3NC0xLjE2IDEuNDE0LS4wNjguMTM2LS4xNjkuMjU0LS4yOTYuMzQ3LS40NDkuNDY2LS4zODEuODU1LjE5NSAxLjE2OC41MzMuMzEzLjk0LjIxMiAxLjI0NS0uMzIybTE0LjYzLTkuMjAzYzEuMTYtMS41MjQgMS43MjctMy4yMTcgMS43MS01LjA4LS4wNjgtLjU1LS4zODEtLjgyMS0uOTQtLjgyMS0uNzYyIDAtMS4wNTguMjc5LS44OTguODM4LjA1MS45MTQtLjAzNCAxLjY2OC0uMjcxIDIuMjYxLS4zODEuOTQtLjgwNCAxLjY0Mi0xLjI2MSAyLjEwOC0uMjU0LjUtLjEwMi44NjQuNDQ5IDEuMDkyLjUyNS4yNDUuOTMxLjExOSAxLjIxMS0uMzk4bS02LjQ3Ny0xMi4xMWMtLjA3Ni0uNTkzLS4wNTktMS4yMzYuMDUxLTEuOTMtLjk5MS4xOTUtMS45MjIuNjYtMi44MDIgMS4zODktLjUyNS4yNzktLjY1Mi42NjktLjM3MyAxLjE2OC4yNzkuNTA4LjY2OS41OTMgMS4xNjguMjQ2LjM0Ny0uMTg2LjY2OS0uMzU2Ljk1Ny0uNTA4LjI4OC0uMTYxLjYxOC0uMjc5Ljk5OS0uMzY0bTIzLjI1IDMxLjQ1NGMtLjAxNyAwIDAtLjQ0OS4wNDItMS4zNDYuMTMxLTMuMTA3LjA5NS02LjIyMS4wNzYtOS4zMy0uMDE3LTIuMjEtLjMxMy00LjQxMS0uODg5LTYuNjEzLS44NC0zLjMxLTIuMTI0LTYuNDg1LTQuMDcyLTkuMjk2LTIuNjM0LTMuODQ1LTYuODE0LTYuMDMtMTEuMjg2LTYuOTc2LjEyNi43NjYuMDMzIDEuNTQuMDc2IDIuMzExIDEuNi41NDIgMy4xMTYgMS4yMTkgNC41MzggMi4wMzIgNC4yNDEgMi41NTQgNi40MTQgNy4yNzUgNy4xOTcgMTEuOTMgMS4yNzIgNi4xNTQuNDUzIDExLjU1Ny44MTMgMTcuMjg5aDMuNTA1bS0zMy41MzctMTQuNTU0Yy40NzQtLjMzOS41MjUtLjcyOC4xNDQtMS4xOTQtLjM5OC0uMzgxLS44My0uNDE1LTEuMzEyLS4xMDItMS4wMS42Ni0xLjU0OSAxLjUzMi0xLjYxNyAyLjYwOC4wMTcuNTQyLjM0Ny44MDQuOTc0Ljc3MS41OTMtLjA1MS44ODEtLjM1Ni44NjQtLjkyMy4xMzUtLjUyNS40NDktLjkxNC45NDgtMS4xNiIvPjwvc3ZnPg==');\n}\n.merida .cg-board piece.rook.black {\n  background-image: url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNzcuMTciIGhlaWdodD0iMTc3LjE3IiBzaGFwZS1yZW5kZXJpbmc9Imdlb21ldHJpY1ByZWNpc2lvbiIgaW1hZ2UtcmVuZGVyaW5nPSJvcHRpbWl6ZVF1YWxpdHkiIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiB2aWV3Qm94PSIwIDAgNTAgNTAiPjxkZWZzPjxsaW5lYXJHcmFkaWVudCBpZD0iMCIgeDE9IjIxLjE5IiB5MT0iMzcuNTUyIiB4Mj0iNzcuNzQiIHkyPSIzNy40MjkiIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIj48c3RvcCBzdG9wLWNvbG9yPSIjZmZmIi8+PHN0b3Agb2Zmc2V0PSIxIiBzdG9wLWNvbG9yPSIjZmZmIiBzdG9wLW9wYWNpdHk9IjAiLz48L2xpbmVhckdyYWRpZW50PjwvZGVmcz48cGF0aCBmaWxsPSIjMWYxYTE3IiBkPSJtMjguNDA4IDkuMjJoNC4yMTZ2LTMuMzk1aDYuNzk2djkuMjk1bC01LjUgNC4yNDN2MTEuODU3bDQuMjIgNC4yMjF2NS4wOGgzLjc4OXY1LjkyOWgtMzMuODU5di01LjkyOWgzLjc5NHYtNS4wOGw0LjI0Ni00LjIyMXYtMTEuODU3bC01LjUwOC00LjI0M3YtOS4yOTVoNi43NzR2My4zOTVoNC4yNDJ2LTMuMzk1aDYuNzl6Ii8+PHBhdGggZmlsbD0idXJsKCMwKSIgZD0ibTI1LjAxIDM1LjA0aC0xMC4yN2wtMS4xNDMgMS4wNjd2MS40MzloMjIuODI2di0xLjQzOWwtMS4xNDMtMS4wNjdoLTEwLjI3bS0xMS40MTMgNS4wOHYyLjUzMmgyMi44MjZ2LTIuNTMyaC0yMi44MjZtMTEuNDEzLTI3LjA4aC0xMi43djEuMTQzbDEuODEyIDEuMzYzaDIxLjgwMmwxLjc2MS0xLjM2M3YtMS4xNDNoLTEyLjY3NW0wIDQuMTkxaC04LjY3OGwxLjQ4MiAxLjE2OHYxLjQxNGgxNC4zOTN2LTEuNDE0bDEuNDgyLTEuMTY4aC04LjY3OG0wIDEzLjU0N2gtNy4xOTd2MS4xNDNsLTEuNDgyIDEuNDM5aDE3LjM1N2wtMS40ODItMS40Mzl2LTEuMTQzaC03LjE5NyIvPjwvc3ZnPg==');\n}\n.merida .cg-board piece.queen.black {\n  background-image: url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNzcuMTciIGhlaWdodD0iMTc3LjE3IiBzaGFwZS1yZW5kZXJpbmc9Imdlb21ldHJpY1ByZWNpc2lvbiIgaW1hZ2UtcmVuZGVyaW5nPSJvcHRpbWl6ZVF1YWxpdHkiIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiB2aWV3Qm94PSIwIDAgNTAgNTAiPjxkZWZzPjxsaW5lYXJHcmFkaWVudCBpZD0iMCIgeDE9IjIxLjI1MyIgeTE9IjM3LjIyIiB4Mj0iNzcuNzYiIHkyPSIzNy4zNiIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiPjxzdG9wIHN0b3AtY29sb3I9IiNmZmYiLz48c3RvcCBvZmZzZXQ9IjEiIHN0b3AtY29sb3I9IiNmZmYiIHN0b3Atb3BhY2l0eT0iMCIvPjwvbGluZWFyR3JhZGllbnQ+PC9kZWZzPjxnIGZpbGw9IiMxZjFhMTciPjxwYXRoIGQ9Im0yNC45NDkgMTAuNzUyYy0uOTQgMC0xLjc0NC0uMzMtMi4zOTYtLjk5MS0uNjUyLS42Ni0uOTc0LTEuNDY1LS45NzQtMi40MDUgMC0uOTMxLjMyMi0xLjcyNy45NzQtMi4zODguNjUyLS42NiAxLjQ1Ni0uOTkxIDIuMzk2LS45OTEuOTIzIDAgMS43MjcuMzMgMi4zOTYuOTkxLjY2OS42Ni45OTkgMS40NTYuOTk5IDIuMzg4IDAgLjk0LS4zMyAxLjc0NC0uOTk5IDIuNDA1LS42NjkuNjYtMS40NzMuOTkxLTIuMzk2Ljk5MSIvPjxwYXRoIGQ9Im00MC4yMyA0My45NDJjLS44MTMuNzExLTIuNjMzIDEuMzA0LTUuNDYxIDEuNzg2LTIuODI4LjQ3NC02LjA4Ny43Mi05Ljc3LjcyLTMuNzUxIDAtNy4wNS0uMjU0LTkuODk4LS43NDUtMi44NDUtLjQ5OS00LjY0LTEuMTE4LTUuMzg1LTEuODYzbDEuNTY2LTUuOTUyLS42OTQtMy44OTUtMi4xODQtMy43OTMtMi4xMDgtMTUuNDI2IDEuMjExLS40NzQgNi43OTkgMTEuNDU1LjE1Mi0xMy42NCAxLjY4NS0uMjk2IDUuMTgyIDEzLjcxNiAyLjc3Ny0xNC43NTdoMS43MTlsMi43NzcgMTQuNzA3IDUuMTMxLTEzLjY2NSAxLjcxLjI5Ni4xNTIgMTMuNjQgNi44MjQtMTEuNDgxIDEuMTYuNTQyLTIuMDU3IDE1LjM1OS0yLjIxIDMuNzkzLS42OTQgMy45NDYgMS42MTcgNi4wMyIvPjxwYXRoIGQ9Im0xNC41MzUgMTEuOTg5Yy0uOTQ4IDAtMS43NTMtLjMyMi0yLjQxMy0uOTc0LS42Ni0uNjUyLS45OTEtMS40NTYtLjk5MS0yLjM5NiAwLS45MjMuMzMtMS43MTkuOTkxLTIuMzc5LjY2LS42NiAxLjQ2NS0uOTkxIDIuNDEzLS45OTEuOTIzIDAgMS43MTkuMzMgMi4zNzkuOTkxLjY2LjY2Ljk5MSAxLjQ1Ni45OTEgMi4zNzkgMCAuOTQtLjMzIDEuNzQ0LS45OTEgMi4zOTYtLjY2LjY1Mi0xLjQ1Ni45NzQtMi4zNzkuOTc0Ii8+PHBhdGggZD0ibTM1LjM2IDExLjk4OWMtLjk0IDAtMS43MzYtLjMyMi0yLjM4OC0uOTc0LS42NTItLjY1Mi0uOTgyLTEuNDU2LS45ODItMi4zOTYgMC0uOTIzLjMzLTEuNzE5Ljk4Mi0yLjM3OS42NTItLjY2IDEuNDQ4LS45OTEgMi4zODgtLjk5MS45NDggMCAxLjc1My4zMyAyLjQxMy45OTEuNjYuNjYuOTkxIDEuNDU2Ljk5MSAyLjM3OSAwIC45NC0uMzMgMS43NDQtLjk5MSAyLjM5Ni0uNjYuNjUyLTEuNDY1Ljk3NC0yLjQxMy45NzQiLz48cGF0aCBkPSJtNS40IDE0LjcyM2MtLjk0IDAtMS43MzYtLjMzLTIuMzg4LS45ODItLjY1Mi0uNjUyLS45ODItMS40NDgtLjk4Mi0yLjM5NiAwLS45MjMuMzMtMS43MTkuOTgyLTIuMzg4LjY1Mi0uNjc3IDEuNDQ4LTEuMDEgMi4zODgtMS4wMS45NDggMCAxLjc0NC4zMyAyLjQxMyAxLjAxLjY2LjY2OS45OTEgMS40NjUuOTkxIDIuMzg4IDAgLjk0OC0uMzMgMS43NDQtLjk5MSAyLjM5Ni0uNjY5LjY1Mi0xLjQ2NS45ODItMi40MTMuOTgyIi8+PHBhdGggZD0ibTQ0LjU0MSAxNC43MjNjLS45NCAwLTEuNzQ0LS4zMy0yLjQwNS0uOTgyLS42Ni0uNjUyLS45OTEtMS40NDgtLjk5MS0yLjM5NiAwLS45MjMuMzMtMS43MTkuOTkxLTIuMzg4LjY2LS42NzcgMS40NjUtMS4wMSAyLjQwNS0xLjAxLjkzMSAwIDEuNzI3LjMzIDIuMzg4IDEuMDEuNjYuNjY5Ljk5MSAxLjQ2NS45OTEgMi4zODggMCAuOTQ4LS4zMyAxLjc0NC0uOTkxIDIuMzk2LS42Ni42NTItMS40NTYuOTgyLTIuMzg4Ljk4MiIvPjwvZz48cGF0aCBmaWxsPSJ1cmwoIzApIiBkPSJtMzcuMiAzNS43MjljLTMuMDQtLjgzOC03LjA5NS0xLjI2Mi0xMi4xNS0xLjI2Mi01LjA5NyAwLTkuMTk1LjQzMi0xMi4zMDIgMS4yODdsLjM3MyAyLjUwNmMzLjEyNC0uODEzIDcuMDk1LTEuMjE5IDExLjkzLTEuMjE5IDQuODA5IDAgOC43MjkuMzk4IDExLjc1MiAxLjE5NGwuMzk4LTIuNTA2bTEuNzM2LTQuNDM3Yy0xLjM3Mi0uNS0zLjMwMi0uOTA2LTUuNzkxLTEuMjI4LTIuNDg5LS4zMjItNS4yMzItLjQ4My04LjI0Ni0uNDgzLTIuOTQ2IDAtNS42MzkuMTUyLTguMDkuNDU3LTIuNDQ3LjMwNS00LjM3Ny43MDMtNS43ODMgMS4yMDJsMS4yNDUgMi4yNTJjMS4zODktLjQwNiAzLjE5Mi0uNzAzIDUuNDEtLjg4OSAyLjIxLS4xNzggNC42MzEtLjI3MSA3LjI2NC0uMjcxIDIuNjMzIDAgNS4wNjMuMDkzIDcuMjkuMjcxIDIuMjM1LjE4NiA0LjA0Ny40OTEgNS40MzYuOTE0bDEuMjYxLTIuMjI3bS0xLjA5MiAxMS44NTNsLS43MzctMi45MjljLTMuMjI2LS43MzctNy4yODEtMS4xMDktMTIuMTU4LTEuMTA5LTQuODI2IDAtOC44NjUuMzczLTEyLjExIDEuMTA5bC0uNzg3IDIuOTU1YzMuMTQxLS45NTcgNy40NDItMS40MzkgMTIuOTItMS40MzkgMi42MjUgMCA1LjA3Mi4xMzYgNy4zMTUuMzk4IDIuMjUyLjI2MiA0LjEwNi42MDEgNS41NTQgMS4wMTYiLz48L3N2Zz4=');\n}\n.merida .cg-board piece.king.black {\n  background-image: url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNzcuMTciIGhlaWdodD0iMTc3LjE3IiBzaGFwZS1yZW5kZXJpbmc9Imdlb21ldHJpY1ByZWNpc2lvbiIgaW1hZ2UtcmVuZGVyaW5nPSJvcHRpbWl6ZVF1YWxpdHkiIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiB2aWV3Qm94PSIwIDAgNTAgNTAiPjxkZWZzPjxsaW5lYXJHcmFkaWVudCBpZD0iMCIgeDE9IjIxLjEzIiB5MT0iMzcuMjIiIHgyPSI3Ny43NiIgeTI9IjM3LjQ2OSIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiPjxzdG9wIHN0b3AtY29sb3I9IiNmZmYiLz48c3RvcCBvZmZzZXQ9IjEiIHN0b3AtY29sb3I9IiNmZmYiIHN0b3Atb3BhY2l0eT0iMCIvPjwvbGluZWFyR3JhZGllbnQ+PC9kZWZzPjxnIGZpbGw9IiMxZjFhMTciPjxwYXRoIGQ9Im0yNS44MjEgMTIuMDJoLTEuNzYxdi0zLjI1MWgtMi4wNjZjLS41NTkgMC0uODM4LS4yNzEtLjgzOC0uODIxdi0uMDI1YzAtLjU0Mi4yNzktLjgxMy44MzgtLjgxM2gyLjA2NnYtMi4xMDhjMC0uNTg0LjI5Ni0uODcyLjg4OS0uODcyLjU3NiAwIC44NzIuMjg4Ljg3Mi44NzJ2Mi4xMDhoMi4xMzRjLjU0MiAwIC44MTMuMjcxLjgxMy44MTN2LjAyNWMwIC41NS0uMjcxLjgyMS0uODEzLjgyMWwtMi4xMTcuMDI1LS4wMTcgMy4yMjYiLz48cGF0aCBkPSJtMTEuMDMgMzcuNzQ0bC0uODEzLTQuNjRjLS4wMTcgMC0uMDQyLS4wMzQtLjA3Ni0uMTAyLS4wODUtLjExOC0uMzIyLS4yNzEtLjcxMS0uNDU3LS4zODEtLjE5NS0uODM4LS41MTYtMS4zNDYtLjk4Mi0uNzI4LS42MS0xLjI5NS0xLjEwOS0xLjcwMi0xLjQ5LS40MDYtLjM3My0uNzcxLS43ODctMS4xMDEtMS4yMzYtMS4wMS0xLjM4OS0xLjU3NS0zLjA2NS0xLjY4NS01LjA0LS4xNjktMS44OTcuNjAxLTMuNzkzIDIuMzAzLTUuNjgxIDEuNzE5LTEuODggNC4wNDctMi43NjkgNi45NjgtMi42NSAxLjA5Mi4wNjggMi4zNzkuMzMgMy44NDQuNzk2LjQ4My4xOTUuOTc0LjM5IDEuNDgyLjU3Ni41LjE5NS45OTkuMzg5IDEuNDk5LjU4NC4yNjIuMTM1LjUuMjcxLjY5NC4zOTgtLjA4NS0uMzQ3LS4xMjctLjY5NC0uMTI3LTEuMDQxIDAtMS4yODcuNDU3LTIuMzg4IDEuMzgtMy4zMDIuOTE0LS45MDYgMi4wMjQtMS4zNzIgMy4zMTEtMS4zODkgMS4yODcgMCAyLjM4OC40NjYgMy4zMDIgMS4zOC45MDYuOTE0IDEuMzYzIDIuMDIgMS4zNjMgMy4yODUgMCAuMjYyLS4wMzQuNjEtLjEwMiAxLjA0MS4yMjktLjE0NC40NTctLjI3MS42NjktLjM3Mi43NjItLjMzIDEuNzYxLS43MiAzLjAxLTEuMTYgMS40MjItLjQ4MyAyLjcwMS0uNzU0IDMuODQ0LS44MjEgMi45MjEtLjEzNiA1LjI0MS43NTQgNi45NDMgMi42NSAxLjY2OCAxLjg4OCAyLjQ0NyAzLjc4NSAyLjMyOCA1LjY4MS0uMTI3IDEuOTczLS43MDMgMy42NDktMS43MSA1LjA0LS4zMy40NDktLjcwMy44NjQtMS4xMTggMS4yNTMtLjQwNi4zOS0uOTY1Ljg4MS0xLjY2IDEuNDczLS41NDIuNDY2LTEuMDEuNzk2LTEuMzg5Ljk4Mi0uMzgxLjE4Ni0uNjAxLjM0Ny0uNjY5LjQ1Ny0uMDE3LjAzNC0uMDM0LjA1OS0uMDUxLjA3Ni0uMDE3LjAxNy0uMDI1LjAzNC0uMDI1LjA1MWwtLjc5NiA0LjY2NSAxLjY0MyA2LjEyMWMtLjgzLjc0NS0yLjY4NCAxLjM1NS01LjU1NCAxLjgzNy0yLjg3OS40ODMtNi4yMDYuNzItOS45NzQuNzItMy44MzUgMC03LjIxNC0uMjU0LTEwLjExOC0uNzU0LTIuOTEyLS41MDgtNC43NDEtMS4xNDMtNS40ODYtMS44OTdsMS42MzQtNi4wNSIvPjwvZz48cGF0aCBmaWxsPSJ1cmwoIzApIiBkPSJtMjQuOTQ5IDIwLjY3NWMtLjAzNC0uMTYxLS4wNzYtLjMwNS0uMTI3LS40MjMtLjA5My0uMzMtLjE3OC0uNTY3LS4yNDUtLjcyLS4wNTEtLjExLS4xMTktLjI1NC0uMTk1LS40MzItLjA4NS0uMTY5LS4xNjktLjM1Ni0uMjU0LS41NTktLjA1MS0uMTE5LS4xMS0uMjcxLS4xODYtLjQ1Ny0uMDY4LS4xOTUtLjEzNi0uMzczLS4xODYtLjUzMy0uMDQyLS4xNTItLjA2OC0uMzA1LS4wNjgtLjQ3NCAwLS44NzIuNDE1LTEuMzEyIDEuMjYyLTEuMzEyLjg4MSAwIDEuMzEyLjQzMiAxLjMxMiAxLjI4NyAwIC4yMi0uMDM0LjM3My0uMDkzLjQ3NC0uMjM3LjYyNy0uMzU2Ljk2NS0uMzcyIDEuMDE2LS4yNTQuNS0uNDA2LjgyMS0uNDc0Ljk2NS0uMTE5LjI3MS0uMTk1LjUwOC0uMjIuNzItLjA1MS4xMDItLjA4NS4xODYtLjEwMi4yNjItLjAxNy4wNzYtLjAzNC4xMzYtLjA1MS4xODZtLTIuNzc3IDguNTZjLTIuMDY2LjAzNC0zLjk1NC4xMzUtNS42NzMuMzIyLTEuNzEuMTc4LTMuMDMuNDQtMy45NzkuNzctLjQ5MS0uNjE4LTEuMDY3LTEuMjI4LTEuNzE5LTEuODU0LS42Ni0uNjE4LTEuMjI4LTEuMjAyLTEuNzI3LTEuNzQ0LS44My0uODQ3LTEuMjM2LTEuNzctMS4yMzYtMi43NzcgMC0xLjI0NS4yMDMtMi4xNTEuNjE4LTIuNzI2LjQ0LS42NjkgMS4xMzUtMS4xNiAyLjA1Ny0xLjQ4Mi45MjMtLjMyMiAxLjg2My0uNDgzIDIuODAzLS40ODMgMS4xOTQgMCAyLjMyOC4yNjIgMy40Mi43OTYgMS4wNzUuNTU5IDEuNzg3IDEuMDEgMi4xMzQgMS4zMzggMS4xMjYgMS4xNDMgMi4wMSAyLjM3OSAyLjYzMyAzLjcxNy4yMTIuNS4zNzIgMS4xOTQuNDgzIDIuMDc0LjExLjg4OS4xNjkgMS41NjYuMTg2IDIuMDQ5bTIuNzc3LTQuMzE4Yy4xMTktLjQ2Ni4yMTItLjc4Ny4yOTYtLjk2NS4xNjktLjY0My4zNTYtMS4xOTQuNTc2LTEuNjQzLjA5My0uMjc5LjIzNy0uNjAxLjQzMi0uOTc0LjE4Ni0uMzczLjM4OS0uODA0LjYxLTEuMjc5LjEyNy0uMjc5LjI3MS0uNjI3LjQxNS0xLjAzMy4xNTItLjQwNi4zMDUtLjgwNC40NDktMS4yMDIuMTM1LS4zMy4yMDMtLjY4Ni4yMDMtMS4wNjcgMC0uODEzLS4yOTYtMS40OTktLjg3Mi0yLjA2Ni0uNTc2LS41NzYtMS4yNzktLjg2NC0yLjEwOC0uODY0LTEuOTY0IDAtMi45NTUuOTkxLTIuOTU1IDIuOTU1IDAgLjM4MS4wNjguNzM3LjIwMyAxLjA2Ny4zNjQgMS4wNzUuNjQzIDEuODIuODM4IDIuMjM1LjIyLjQ3NC40MTUuOTA2LjYwMSAxLjI3OS4xNzguMzcyLjMzOS42OTQuNDY2Ljk3NC4yMi41NS4zOTggMS4wOTIuNTUgMS42NDMuMDM0LjA5My4xMjcuNDE1LjI5Ni45NG0tLjg4OSA2LjIyM2MwLS42Ni0uMDE3LTEuNTc1LS4wNTEtMi43MzUtLjAzNC0xLjE2OC0uMTYxLTIuMTQyLS4zNzItMi45MjEtLjY3Ny0yLjIxLTEuNzAyLTMuOTk2LTMuMDgyLTUuMzUxLS43MTEtLjY5NC0xLjc5NS0xLjM0Ni0zLjI2OC0xLjkzOS0xLjY4NS0uNjYtMy4yODUtLjk5MS00Ljc5Mi0uOTkxLTIuNjA4IDAtNC41NDcuOTMxLTUuOCAyLjgwMy0uNzExLjk5MS0xLjA2NyAyLjIzNS0xLjA2NyAzLjcxNyAwIDEuNjI2LjM5OCAyLjk1NSAxLjE4NSAzLjk5Ni40MTUuNTkzIDEuMjExIDEuMzI5IDIuMzg4IDIuMjEgMS4xNjguODcyIDIuMTY4IDEuNjg1IDIuOTcyIDIuNDMgMS40MzktLjMxMyAzLjA2NS0uNTg0IDQuODc3LS44MjEgMS44MTItLjIyOSA0LjE0OS0uMzY0IDcuMDEtLjM5OG0xMy43ODQgMTEuNzM1bC0uNzM3LTIuOTI5Yy0zLjIyNi0uNzM3LTcuMjgxLTEuMTA5LTEyLjE1OC0xLjEwOS00LjgyNiAwLTguODY1LjM3My0xMi4xMSAxLjEwOWwtLjc4NyAyLjk1NWMzLjE0MS0uOTU3IDcuNDQyLTEuNDM5IDEyLjkyLTEuNDM5IDIuNjI1IDAgNS4wNzIuMTM2IDcuMzE1LjM5OCAyLjI1Mi4yNjIgNC4xMDYuNjAxIDUuNTU0IDEuMDE2bS0uNjQzLTcuNDE3Yy0zLjA0LS44MzgtNy4wOTUtMS4yNjItMTIuMTUtMS4yNjItNS4wOTcgMC05LjE5NS40MzItMTIuMzAyIDEuMjg3bC4zNzMgMi41MDZjMy4xMjQtLjgxMyA3LjA5NS0xLjIxOSAxMS45My0xLjIxOSA0LjgwOSAwIDguNzI5LjM5OCAxMS43NTIgMS4xOTRsLjM5OC0yLjUwNm0tMTEuMzYyLTQuMjkzYzIuODQ1LjA1MSA1LjE4Mi4xOTUgNyAuNDIzIDEuODEyLjIyOSAzLjQ1NC41MDggNC45MTEuODIxLjkwNi0uODk4IDEuOTEzLTEuNzQ0IDMuMDItMi41NTcgMS4xMDktLjgxMyAxLjg4OC0xLjUwNyAyLjMzNy0yLjA4My43ODctMS4wNzUgMS4xODUtMi40MTMgMS4xODUtNC4wMiAwLTEuNDY1LS4zNTYtMi43MDEtMS4wNjctMy42OTItMS4yNy0xLjg3MS0zLjIxNy0yLjgwMy01LjgyNS0yLjgwMy0xLjUyNCAwLTMuMTA3LjMzLTQuNzY3Ljk5MS0xLjUwNy41OTMtMi41OTEgMS4yMzYtMy4yNzcgMS45My0xLjQwNSAxLjM2My0yLjQzIDMuMTUtMy4wNzMgNS4zNTktLjI0NS43NjItLjM4MSAxLjcyNy0uNDA2IDIuOTA0LS4wMjUgMS4xNzctLjA0MiAyLjA4My0uMDQyIDIuNzI2bTEuODEyLTEuOTNjMC0uNDgzLjA1OS0xLjE2LjE2MS0yLjA0OS4xMS0uODgxLjI3OS0xLjU3NS41MDgtMi4wNzQuNjE4LTEuMzM4IDEuNDktMi41NzQgMi42MzMtMy43MTcuMzMtLjMzIDEuMDQxLS43NzkgMi4xMzQtMS4zMzggMS4wNzUtLjUzMyAyLjIyNy0uNzk2IDMuNDQ2LS43OTYuOTMxIDAgMS44NDYuMTYxIDIuNzY5LjQ4My45MTQuMzIyIDEuNjA5LjgxMyAyLjA2NiAxLjQ4Mi40MTUuNTU5LjYyNyAxLjQ2NS42MjcgMi43MjYgMCAuOTkxLS40MDYgMS45MTMtMS4yMTkgMi43NzctLjUyNS41NDItMS4xMDEgMS4wOTItMS43MSAxLjY1MS0uNjEuNTUtMS4yMDIgMS4yMDItMS43NjEgMS45NDctLjk1Ny0uMzMtMi4yOTQtLjU5My00LS43Ny0xLjcxLS4xODYtMy41OS0uMjg4LTUuNjQ3LS4zMjIiLz48L3N2Zz4=');\n}\n\n.piece.pawn.white {\n  background-image: url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNzcuMTciIGhlaWdodD0iMTc3LjE3IiBzaGFwZS1yZW5kZXJpbmc9Imdlb21ldHJpY1ByZWNpc2lvbiIgaW1hZ2UtcmVuZGVyaW5nPSJvcHRpbWl6ZVF1YWxpdHkiIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiB2aWV3Qm94PSIwIDAgNTAgNTAiPjxkZWZzPjxsaW5lYXJHcmFkaWVudCBpZD0iMCIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiIHgxPSIyMS4xMyIgeTE9IjM3LjM1IiB4Mj0iNzcuNzYiIHkyPSIzNy40NjkiIGdyYWRpZW50VHJhbnNmb3JtPSJtYXRyaXgoMSAwIDAgLjk3MzI0IDAgMS4yNDMpIj48c3RvcCBzdG9wLWNvbG9yPSIjZmZmIi8+PHN0b3Agb2Zmc2V0PSIxIiBzdG9wLWNvbG9yPSIjZmZmIiBzdG9wLW9wYWNpdHk9IjAiLz48L2xpbmVhckdyYWRpZW50PjwvZGVmcz48cGF0aCBkPSJtMjUgNDYuNDVoLTEzLjM5NGMtLjY2LTEuNjA3LS45OTEtMy4yODgtLjk5MS01LjA0IDAtMi45NzUuODY0LTUuNjQ0IDIuNTk5LTguMDIgMS43MzYtMi4zNjUgMy45NzEtNC4wNTQgNi42OTctNS4wNjgtMS4xNjgtLjUyNy0yLjEyNS0xLjMyNy0yLjg2Mi0yLjM5OC0uNzM3LTEuMDcxLTEuMTAxLTIuMjgzLTEuMTAxLTMuNjM0IDAtMS42ODkuNTc2LTMuMTU2IDEuNzM2LTQuMzkyIDEuMTUyLTEuMjQ0IDIuNTc0LTEuOTYxIDQuMjY3LTIuMTUxLTEuMzQ2LS45ODEtMi4wMi0yLjI4Mi0yLjAyLTMuODg5IDAtMS4zNTEuNDkxLTIuNTEzIDEuNDgyLTMuNDc3Ljk4Mi0uOTY0IDIuMTc2LTEuNDQyIDMuNTgxLTEuNDQyIDEuMzg5IDAgMi41ODIuNDc4IDMuNTczIDEuNDQyLjk5MS45NjQgMS40OSAyLjEyNiAxLjQ5IDMuNDc3IDAgMS42MDctLjY2OSAyLjkwOS0yLjAyIDMuODg5IDEuNjkzLjE5IDMuMTE2LjkwNiA0LjI2NyAyLjE1MSAxLjE2IDEuMjM2IDEuNzM2IDIuNzAzIDEuNzM2IDQuMzkyIDAgMS4zNTEtLjM3MyAyLjU2My0xLjEyNiAzLjYzNC0uNzUzIDEuMDcxLTEuNzEgMS44Ny0yLjg2MiAyLjM5OCAyLjcyNiAxLjAxNCA0Ljk2MSAyLjcwMyA2LjY5NyA1LjA2OCAxLjczNiAyLjM3MyAyLjU5OSA1LjA0IDIuNTk5IDguMDIgMCAxLjczOS0uMzIyIDMuNDItLjk2NSA1LjA0aC0xMy4zOTQiIGZpbGw9IiMxZjFhMTciLz48cGF0aCBkPSJtMjUgNDQuODA4aDEyLjE3NWMuMzQ3LTEuMTU0LjUyNS0yLjI5MS41MjUtMy40MDMgMC0yLjUxMy0uNzExLTQuNzg3LTIuMTQyLTYuODMxLTEuNDMxLTIuMDQ0LTMuMjc3LTMuNTUyLTUuNTItNC41MTYtMS41ODQtLjYyLTEuNjQzLS42NTktMS42NDMtMS43MzkgMC0uODQ5LjU1OS0xLjQ3NSAxLjY2OC0xLjg3OSAxLjUzMi0xLjA0NyAyLjMwMy0yLjQzMSAyLjMwMy00LjE1MyAwLTEuMjQ0LS40MzItMi4zMjQtMS4yODctMy4yNjMtLjg2NC0uOTMxLTEuOTA1LTEuNDY3LTMuMTI0LTEuNjE1LS45OTktLjA4Mi0xLjQ5LS42MjYtMS40OS0xLjY0IDAtLjQ1My4xNzgtLjg3My41NDItMS4yNjEuODk4LS42NzYgMS4zNDYtMS41NTcgMS4zNDYtMi42NTMgMC0uODk4LS4zMzktMS42NzMtLjk5OS0yLjMxNi0uNjYtLjY0My0xLjQ0OC0uOTY0LTIuMzU0LS45NjQtLjk0IDAtMS43NDQuMzIxLTIuMzk2Ljk2NC0uNjUyLjY0My0uOTc0IDEuNDE3LS45NzQgMi4zMTYgMCAxLjA3OS40NCAxLjk2MSAxLjMzOCAyLjY1My4zNjQuMzU0LjU0Mi43NzUuNTQyIDEuMjYxIDAgMS4wMTQtLjQ4MyAxLjU1Ny0xLjQ2NSAxLjY0LTEuMjM2LjE0OC0yLjI4Ni42ODQtMy4xMzMgMS42MTUtLjg1NS45MzktMS4yNzkgMi4wMi0xLjI3OSAzLjI2MyAwIDEuNzIyLjc3IDMuMTA2IDIuMzAzIDQuMTUzIDEuMTA5LjQxMiAxLjY2OCAxLjA0NiAxLjY2OCAxLjg3OSAwIDEuMDc5LS4wNjcgMS4xMTgtMS42NjggMS43MzktMi4yNDQuOTY0LTQuMDgxIDIuNDcyLTUuNTAzIDQuNTE2LTEuNDIyIDIuMDQ0LTIuMTM0IDQuMzE4LTIuMTM0IDYuODMxIDAgMS4xOTUuMTc4IDIuMzI0LjUyNSAzLjQwM2gxMi4xNzUiIGZpbGw9InVybCgjMCkiLz48L3N2Zz4=');\n} \n.piece.bishop.white {\n  background-image: url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNzcuMTciIGhlaWdodD0iMTc3LjE3IiBzaGFwZS1yZW5kZXJpbmc9Imdlb21ldHJpY1ByZWNpc2lvbiIgaW1hZ2UtcmVuZGVyaW5nPSJvcHRpbWl6ZVF1YWxpdHkiIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiB2aWV3Qm94PSIwIDAgNTAgNTAiPjxkZWZzPjxsaW5lYXJHcmFkaWVudCBpZD0iMCIgeDE9IjIxLjEzIiB5MT0iMzcuNTkyIiB4Mj0iNzcuNjQiIHkyPSIzNy40NjkiIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIj48c3RvcCBzdG9wLWNvbG9yPSIjZmZmIi8+PHN0b3Agb2Zmc2V0PSIxIiBzdG9wLWNvbG9yPSIjZmZmIiBzdG9wLW9wYWNpdHk9IjAiLz48L2xpbmVhckdyYWRpZW50PjwvZGVmcz48cGF0aCBmaWxsPSIjMWYxYTE3IiBkPSJtMjUuNDQ3IDQyLjAxYy0uMjI5Ljk0LS41MTcgMS41OTItLjg0NyAxLjk1Ni0uMzMuMzY0LS43NjIuNzQ1LTEuMzEyIDEuMTQzLS41OTMuNDE1LTEuMjk1Ljc2Mi0yLjEwOCAxLjA1LS44MTMuMjg4LTEuNzEuMzY0LTIuNzAxLjIxMmwtNi45NjgtLjk2NWMtLjI4OC0uMDM0LS41MzMtLjAzNC0uNzYyIDAtLjIyLjAzNC0uNDMyLjA1MS0uNjM1LjA1MS0uMzQ3IDAtLjc4Ny4wNzYtMS4zMjEuMjM3LS41NDIuMTUyLS45NTcuMzgxLTEuMjUzLjY3N2wtMi40MDUtMy45NDZjLjI5Ni0uMzMuNTU5LS41NTkuNzg3LS42OTQuMjM3LS4xMjcuNTA4LS4yNzEuODIxLS40MTUuOTU3LS40NDkgMS45ODEtLjcyIDMuMDczLS44MjEuNDY2LS4wMzQuOTIzLS4wNDIgMS4zNjMtLjAyNS40NDkuMDE3LjkxNCAwIDEuMzk3LS4wNTEuODg5LjE1MiAxLjc4Ni4yODggMi42ODQuNDA2LjkwNi4xMjcgMS44MTIuMjU0IDIuNzE4LjM4OS45OTEgMCAxLjY2LS4xMDIgMi4wMS0uMjk2LjE4Ni0uMTAyLjQ3NC0uMjg4Ljg3Mi0uNTUuMzk4LS4yNjIuNzk2LS42NTIgMS4xOTQtMS4xNjgtLjg4MS0uMDkzLTEuNzctLjI2Mi0yLjY4NC0uNTA4LS45MDYtLjIzNy0xLjcxLS40OTEtMi40MDQtLjc1NGwyLjU4Mi02LjQwMWMtMS4yOTUtLjc0NS0yLjE5My0xLjMzOC0yLjcwOS0xLjc5NS0uNTA4LS40NTctLjkxNC0uOTgyLTEuMjExLTEuNTc1LS40MzItLjc2Mi0uNzExLTEuNDk5LS44My0yLjIxLS4xMjctLjcxMS0uMTc4LTEuMzQ2LS4xNjEtMS45MTMuMDE3LS45OTEuMjQ1LTIuMDgzLjcwMy0zLjI4NS40NTctMS4xOTQgMS4zMTItMi4yNjkgMi41NjUtMy4yMDkgMS4wNDEtLjc5NiAyLjA2Ni0xLjYxNyAzLjA1Ny0yLjQ1NS45OTEtLjg0NyAxLjk3My0xLjgyOSAyLjk0Ni0yLjk1NS0xLjIxOS0uNjI3LTEuODI5LTEuNjI2LTEuODI5LTIuOTk3IDAtLjkzMS4zMjItMS43MTkuOTc0LTIuMzg4LjY1Mi0uNjYgMS40NTYtLjk5MSAyLjM5Ni0uOTkxLjkyMyAwIDEuNzE5LjMzIDIuMzc5Ljk5MS42Ni42NjkuOTkxIDEuNDU2Ljk5MSAyLjM4OCAwIDEuMzU1LS42MSAyLjM1NC0xLjgyOSAyLjk5Ny45NTcgMS4xMjYgMS45MyAyLjEwOCAyLjkxMyAyLjk1NS45ODIuODM4IDIuMDIgMS42NiAzLjA5IDIuNDU1IDEuMjM2Ljk0IDIuMDgzIDIuMDIgMi41MjMgMy4yMDkuNDQ5IDEuMjAyLjY5NCAyLjI5NC43MiAzLjI4NSAwIC41NjctLjA1MSAxLjIwMi0uMTY5IDEuOTEzLS4xMTguNzExLS4zODEgMS40NDgtLjc5NiAyLjIxLS4zMy41OTMtLjc0NSAxLjExOC0xLjI1MyAxLjU3NS0uNS40NTctMS4zODkgMS4wNS0yLjY2NyAxLjc5NWwyLjU4MiA2LjQwMWMtLjcyOC4yNjMtMS41NDkuNTE3LTIuNDU1Ljc1NC0uOTE0LjI0Ni0xLjc4Ny40MTUtMi42MzMuNTA4LjM4MS41MTcuNzcuOTA2IDEuMTY4IDEuMTY4LjM5OC4yNjMuNjk0LjQ0OS44OTguNTUuMzQ3LjE5NSAxLjAxNi4yOTYgMi4wMS4yOTYuODg5LS4xMzYgMS43ODYtLjI2MyAyLjY5Mi0uMzg5Ljg5OC0uMTE4IDEuODAzLS4yNTQgMi43MTgtLjQwNi40NC4wNTEuODg5LjA2OCAxLjM0Ni4wNTEuNDU3LS4wMTcuOTIzLS4wMDggMS40MDUuMDI1IDEuMDU4LjEwMiAyLjA4My4zNzMgMy4wNzMuODIxLjI5Ni4xNDQuNTY3LjI4OC44MDQuNDE1LjI0NS4xMzUuNTA4LjM2NC44MDQuNjk0bC0yLjQzIDMuOTQ2Yy0uMjk2LS4yOTYtLjcxMS0uNTI1LTEuMjUzLS42NzctLjUzMy0uMTYxLS45NjUtLjIzNy0xLjI5NS0uMjM3LS4yMiAwLS40NC0uMDE3LS42Ni0uMDUxLS4yMi0uMDM0LS40NzQtLjAzNC0uNzU0IDBsLTYuOTUxLjk2NWMtLjk5MS4xNTItMS45MTMuMDg1LTIuNzYtLjE5NS0uODU1LS4yNzktMS41NTgtLjY1Mi0yLjEtMS4xMTgtLjU0Mi0uNDQ5LS45ODItLjgzLTEuMzA0LTEuMTUxLS4zMjItLjMyMi0uNTkzLS45NTctLjgwNC0xLjg5NyIvPjxwYXRoIGZpbGw9InVybCgjMCkiIGQ9Im0yNi4zMiAzOS4yYzAgMS4wOTIuMjQ1IDIuMDI0Ljc1MyAyLjc5NC41Ljc3IDEuMDQxIDEuMzcyIDEuNjI2IDEuNzk1LjkwNi42NjkgMi4yMzUuOTk5IDMuOTg4Ljk5OS40MzIgMCAxLjI3OS0uMDkzIDIuNTMyLS4yNzkgMS4wMjUtLjE2MSAxLjg1NC0uMjc5IDIuNDgxLS4zNTYuNjI3LS4wNzYgMS4wNS0uMTM1IDEuMjctLjE4Ni42MjctLjA4NSAxLjI4Ny0uMDY4IDEuOTgxLjA1MS4yNjIuMDY4LjU1OS4xMjcuODguMTg2LjMyMi4wNTkuNTkzLjE4Ni44MDQuMzgxbDEuMTk0LTEuOTNjLS42NzctLjM0Ny0xLjM5Ny0uNTkzLTIuMTU5LS43Mi0xLjI1My0uMjItMi4zNTQtLjI2My0zLjMwMi0uMTUyLS4yNzkuMDM0LS42NDMuMTE4LTEuMTAxLjI0NS0uNDU3LjEzNi0xLjA2Ny4yNjMtMS44NDYuMzczLTEuNjc2LjI3MS0yLjU1Ny4zOTgtMi42NTkuMzk4LS42NDQgMC0xLjIwMi0uMDc2LTEuNjg1LS4yNDYtLjQ4My0uMTY5LS45MDYtLjM0Ny0xLjI4Ny0uNTQyLS44ODEtLjM5OC0xLjc3LTEuMzM4LTIuNjg0LTIuODExaC0uNzg3bS0xLjc2MSAwaC0uNzk2Yy0uOTMxIDEuNDktMS44MTIgMi40My0yLjY1OSAyLjgxMS0uMzk4LjE5NS0uODMuMzczLTEuMzEyLjU0Mi0uNDgzLjE2OS0xLjAzMy4yNDYtMS42Ni4yNDYtLjExOSAwLS45OTktLjEyNy0yLjY1OS0uMzk4LS43ODctLjExLTEuNDIyLS4yMzctMS44OC0uMzczLS40NjYtLjEyNy0uODMtLjIxMi0xLjA5Mi0uMjQ1LS45NDgtLjExLTIuMDQtLjA2OC0zLjMwMi4xNTItLjc2Mi4xMjctMS40NzMuMzczLTIuMTM0LjcybDEuMTk0IDEuOTNjLjE5NS0uMTk1LjQ1Ny0uMzIyLjc3OS0uMzgxLjMyMi0uMDU5LjYxOC0uMTE4Ljg4LS4xODYuNjk0LS4xMTkgMS4zNTUtLjEzNiAxLjk4MS0uMDUxLjIyLjA1MS42NDMuMTEgMS4yNy4xODYuNjI3LjA3NiAxLjQ2NS4xOTUgMi41MDYuMzU2IDEuMjM2LjE4NiAyLjA4My4yNzkgMi41MzIuMjc5IDEuNzM2IDAgMy4wNjUtLjMzIDMuOTg4LS45OTkuNTY3LS40MjMgMS4xMDEtMS4wMjUgMS42LTEuNzk1LjUwOC0uNzcuNzYyLTEuNzAyLjc2Mi0yLjc5NG0uODg5LTkuMzQ3YzEuNiAwIDMuMTQxLjEyNyA0LjYxNC4zNzMgMS42MTctLjU3NiAyLjc5NC0xLjQ4MiAzLjUyMi0yLjcwMS42MjctMS4wNTguOTQtMi4yMjcuOTQtMy40OTcgMC0uNzYyLS4xODYtMS42LS41NjctMi41MjMtLjM4MS0uOTE0LS45OTktMS43NDQtMS44NjMtMi40ODktLjk3NC0uODEzLTIuMDQtMS43MDItMy4yLTIuNjY3LTEuMTUxLS45NjUtMi4zMDMtMi4xLTMuNDQ2LTMuMzg3LTEuMTYgMS4yODctMi4zMTEgMi40MjItMy40NzEgMy4zODctMS4xNi45NjUtMi4yMTggMS44NTQtMy4xNzUgMi42NjctLjg4MS43NDUtMS40OTkgMS41NzUtMS44NzEgMi40ODktLjM3Mi45MjMtLjU1OSAxLjc2MS0uNTU5IDIuNTIzIDAgMS4yNy4zMDUgMi40MzguOTE0IDMuNDk3LjcxMSAxLjIxOSAxLjg5NyAyLjEyNSAzLjU0OCAyLjcwMSAxLjQ1Ni0uMjQ2IDIuOTk3LS4zNzMgNC42MTQtLjM3M20wIDQuNTEzYzEuOTM5IDAgMy43OTMuMTk1IDUuNTc5LjU3NmwtMS4xODUtMy4wNTdjLTEuNDU2LS4yMjktMi45MjEtLjM0Ny00LjM5NC0uMzQ3LTEuNTA3IDAtMi45OC4xMTktNC40MTEuMzQ3bC0xLjE5NCAzLjA1N2MxLjc3LS4zODEgMy42NDEtLjU3NiA1LjYwNS0uNTc2bTAtMjMuNTM3YzEuMTI2IDAgMS42ODUtLjU1OSAxLjY4NS0xLjY4NSAwLTEuMTI2LS41NTktMS42OTMtMS42ODUtMS42OTMtMS4xMjYgMC0xLjY4NS41NjctMS42ODUgMS42OTMgMCAxLjEyNi41NTkgMS42ODUgMS42ODUgMS42ODVtMCAyNy4wMWMxLjEyNiAwIDIuMjE4LS4wOTMgMy4yODUtLjI3OSAxLjA2Ny0uMTk1IDIuMS0uNDIzIDMuMDktLjY4Ni0xLjkzOS0uNTA4LTQuMDY0LS43Ny02LjM3NS0uNzctMi4zNDUgMC00LjQ3LjI2My02LjM3NS43Ny45NTcuMjYzIDEuOTczLjQ5MSAzLjA0OC42ODYgMS4wNzUuMTg2IDIuMTg0LjI3OSAzLjMyNy4yNzltLS44ODktMTQuMzM0bC0yLjA2Ni0uMDI1Yy0uNTU5IDAtLjgzOC0uMjc5LS44MzgtLjg0NyAwLS41NTkuMjc5LS44MzguODM4LS44MzhoMi4wNjZ2LTIuMTM0YzAtLjU3Ni4yOTYtLjg3Mi44ODktLjg3Mi41NzYgMCAuODcyLjI5Ni44NzIuODcydjIuMTM0aDIuMTM0Yy41NDIgMCAuODEzLjI3OS44MTMuODM4IDAgLjU2Ny0uMjcxLjg0Ny0uODEzLjg0N2gtMi4xMzR2Mi4wMzJjMCAuNjAxLS4yOTYuODk4LS44NzIuODk4LS41OTMgMC0uODg5LS4yOTYtLjg4OS0uODk4di0yLjAxIi8+PC9zdmc+');\n}\n.piece.knight.white {\n  background-image: url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNzcuMTciIGhlaWdodD0iMTc3LjE3IiBzaGFwZS1yZW5kZXJpbmc9Imdlb21ldHJpY1ByZWNpc2lvbiIgaW1hZ2UtcmVuZGVyaW5nPSJvcHRpbWl6ZVF1YWxpdHkiIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiB2aWV3Qm94PSIwIDAgNTAgNTAiPjxkZWZzPjxsaW5lYXJHcmFkaWVudCBpZD0iMCIgeDE9IjIxLjQwNSIgeDI9Ijc3LjY0IiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+PHN0b3Agc3RvcC1jb2xvcj0iI2ZmZiIvPjxzdG9wIG9mZnNldD0iMSIgc3RvcC1jb2xvcj0iI2ZmZiIgc3RvcC1vcGFjaXR5PSIwIi8+PC9saW5lYXJHcmFkaWVudD48L2RlZnM+PHBhdGggZmlsbD0iIzFmMWExNyIgZD0ibTI2LjE4IDkuMzk1YzIuNTk5LjE2OSA1IC44MzggNy4yMjIgMi4wMiAyLjIxIDEuMTY4IDQuMDk4IDIuNjc1IDUuNjU2IDQuNTEzIDEuMDkyIDEuMjg3IDIuMTE3IDIuODQ1IDMuMDgyIDQuNjY1Ljk3NCAxLjgxMiAxLjc0NCAzLjc0MiAyLjMyIDUuNzc0LjY2IDIuMzcxIDEuMDg0IDQuODUxIDEuMjUzIDcuNDU5LjE3OCAyLjU5OS4yNjMgNS4wMS4yNjMgNy4yM3Y1LjQwMmMwIDAtMS4yODcgMC0zLjg2MSAwLTIuNTY1IDAtNS45MDEgMC0xMC4wMSAwaC0xNi42MzdjLS4xNTIgMC0uMjItLjQwNi0uMjEyLTEuMjExLjAwOC0uODEzLjA1OS0xLjQ2NS4xNjEtMS45NjQuMDU5LS4zOTguMjItLjk1Ny40NjYtMS42ODUuMjU0LS43MjguNjYtMS42MDkgMS4yNDUtMi42NS4yNjItLjUzMy44ODktMS4zMDQgMS44OC0yLjMyLjk5OS0xLjAxNiAyLjEzNC0yLjIwMSAzLjQyOS0zLjUzOS43NDUtLjc2MiAxLjMyMS0xLjcxOSAxLjc0NC0yLjg3OS40MjMtMS4xNTEuNjAxLTIuMjAxLjUzMy0zLjE1LS42MS41LTEuMjc5LjkwNi0yLjAxIDEuMjE5LTMuNTA1IDEuMjUzLTYuMDUgMy4wNzMtNy42MTEgNS40NTItLjExOS4xNTItLjQ5MS44MjEtMS4xMTggMi4wMi0uMzMuNjI3LS42MTggMS4wNTgtLjg0NyAxLjI4Ny0uMzEzLjMxMy0uNzcxLjQ5MS0xLjM2My41MjUtLjkyMy4wNDItMS42NDMtLjM5OC0yLjE1OS0xLjM0Ni0uNjk0LjIwMy0xLjMxMi4yODgtMS44NjMuMjU0LS45MjMtLjM0Ny0xLjU5Mi0uNzItMi4wMS0xLjExOC0uODQ3LS44NDctMS4zODktMS42ODUtMS42NTEtMi41MzItLjI1NC0uODQ3LS4zODEtMS43NTMtLjM4MS0yLjcyNiAwLTEuMzg5Ljg1NS0zLjIyNiAyLjU4Mi01LjUxMiAyLjAyLTIuNjI1IDMuMDktNC42MzEgMy4yMTctNiAwLS41OTMuMDU5LTEuMjYyLjE3OC0yLjAxLjEwMi0uNTE3LjMwNS0xLjAxLjYxOC0xLjQ5LjIyLS4zMy4zNjQtLjU1OS40MzItLjY3Ny4wNzYtLjEyNy4yMTItLjMxMy40MTUtLjU1OS4xNDQtLjIwMy4yNzEtLjM1Ni4zNzMtLjQ1Ny4wOTMtLjExLjIyLS4yNTQuMzczLS40NC4xNzgtLjIxMi40MDYtLjQ1Ny42OTQtLjc0NS0uODgtMi40MTMtMS4yMzYtNC45MDItMS4wNjctNy40NTkgMy4yODUgMS4xNjggNi4wNSAzLjAxIDguMjggNS41MjkuNTUtMS44NzEgMS42MjYtMy4zODcgMy4yMjYtNC41MzggMS4zMjEuOTIzIDIuMzcxIDIuMTUxIDMuMTUgMy42NjYiLz48cGF0aCBmaWxsPSJ1cmwoIzApIiBkPSJtNDIuOTc2IDQ0LjY5M2MtLjAxNyAwIDAtLjQ0OS4wNDItMS4zNDYuMDUxLS45MDYuMDc2LTEuODguMDc2LTIuOTIxLjAxNy0yLjA2Ni4wMTctNC4yIDAtNi40MDktLjAxNy0yLjIxLS4zMTMtNC40MTEtLjg4OS02LjYxMy0uNTY3LTIuMTE3LTEuMTg1LTMuOTItMS44NjMtNS40MTktLjY3Ny0xLjQ5OS0xLjQxNC0yLjc4Ni0yLjIxLTMuODc4LTEuMTg1LTEuNzg2LTIuODExLTMuMzAyLTQuODYtNC41MzgtMi4wNDktMS4yNDUtNC4xOTEtMi4wNTctNi40MjYtMi40MzguMTUyLjgxMy4yMiAxLjYwOS4yMDMgMi4zODgtLjAzNC41OTMtLjMxMy44ODktLjg0Ny44ODktLjYxIDAtLjg4MS0uMjk2LS44MjEtLjg4OS4wNTEtMi4xODQtLjcyOC00LjA1Ni0yLjMyOC01LjYwNS0xLjI1MyAxLjMyMS0xLjkzOSAyLjg1My0yLjAzMiA0LjYwNi0uMDM0LjU4NC0uMzMuODM4LS44OTcuNzcxLS41MjUtLjAxNy0uNzg3LS4zMjItLjc4Ny0uOTE0IDAgMCAuMDE3LS4wNjguMDQyLS4yMDMtLjY3Ny4yMi0xLjM4OS41MjUtMi4xMzQuOTIzLS40NzQuMzMtLjg2NC4yNDUtMS4xNi0uMjQ2LS4yOTYtLjQ5OS0uMTY5LS44ODkuMzk4LTEuMTY4LjcxMS0uMzY0IDEuMjQ1LS42MzUgMS42MDktLjgyMS0xLjQyMi0xLjQ1Ni0zLjA0LTIuNjI1LTQuODYtMy41MjIuMTk1IDIuMzAzLjgzIDQuNDcgMS44ODggNi41MjguMjc5LjQyMy4yMTIuODA0LS4yMDMgMS4xMzUtLjQ2Ni4zNjQtLjg1NS4zMTMtMS4xNjgtLjE2OS0uMTEtLjE2OS0uMjc5LS40NjYtLjQ5MS0uODk3LS4zNDcuMzQ3LS41ODQuNjEtLjY5NC43Ny0uMTE4LjE1Mi0uMzIyLjQ4My0uNjEuOTkxLS4yODguNTE2LS40OTkuOTQtLjYzNSAxLjI3LS4xNDQuNDE1LS4yMTIuNzQ1LS4xODYgMS4wMS4wMjUuMjU0LjA1MS41MzMuMDY4Ljg1NS0uMTUyLjk3NC0uNDkxIDEuODg4LTEuMDEgMi43NTItLjUyNS44NTUtMS4xODUgMS45MDUtMS45OTggMy4xNS0uNzc5IDEuMTg1LTEuMzcyIDIuMDgzLTEuNzg2IDIuNjc1LS40MTUuNjAxLS43MjggMS4zNTUtLjk0IDIuMjg2LS4xNTIuNTU5LS4xNTIgMS4yNDUgMCAyLjA0MS4xNDQuODA0LjQ3NCAxLjQzMS45NjUgMS44OC43NjIuNzcgMS40OTkgMS4xMjYgMi4yMSAxLjA2Ny4yMjkgMCAuNTQyLS4wOTMuOTMxLS4yNzkuMzg5LS4xNzguNjg2LS41MjUuOTA2LTEuMDQxLjQyMy0uOTQuNzc5LTEuNDE0IDEuMDY3LTEuNDE0LjQwNiAwIC42MzUuMjM3LjY2OS42OTQgMCAuMTAyLS4xMzYuNTE3LS4zOTggMS4yNDUtLjE1Mi4zMy0uMzQ3LjY3Ny0uNTkzIDEuMDQxLS4zMjIuNDMyLS40NTcuNjEtLjQyMy41NDIuMjYyLjk0OC43MDMgMS4xMDkgMS4zMTIuNDk5LjE3OC0uMTc4LjM4OS0uNTI1LjYxOC0xLjAxNi4yMzctLjQ5OS42MDEtMS4xNjggMS4wOTItMi4wMS41ODQtLjk4MiAxLjIwMi0xLjc3IDEuODYzLTIuMzg4LjY2LS42MSAxLjI0NS0xLjEwOSAxLjc2MS0xLjQ4Mi4yOTYtLjIyLjY2LS40NjYgMS4wOTItLjc0NS40MzItLjI4OCAxLjAxLS41NzYgMS43MzYtLjg3Mi41NzYtLjIyOSAxLjIxOS0uNTE2IDEuOTIyLS44NTUuNzAzLS4zMzkgMS4zMjktLjc3IDEuODcxLTEuMzA0Ljc2Mi0uNzQ1IDEuMzQ2LTEuNjU5IDEuNzYxLTIuNzUyLjIyLS42MS4yOTYtMS4zNjMuMjQ1LTIuMjYxLS4xNDQtLjU1OS4xMzYtLjgzOC44NDctLjgzOC41MzMgMCAuODMuMjcxLjg5OC44MjEgMCAxLjg2My0uNTMzIDMuNTY0LTEuNTkyIDUuMTA1LjM0NyAxLjA1OC40NCAyLjIxOC4yNzEgMy40NzEtLjE0NCAxLjAxLS41IDIuMDkxLTEuMDUgMy4yNDMtLjU1OSAxLjE0My0xLjY3NiAyLjQyMi0zLjM2MSAzLjgyNy0zLjQyOSAyLjg0NS01LjA1IDUuNzc0LTQuODYgOC43OCAwIDAgMS40MDUgMCA0LjIyNSAwIDIuODE5IDAgNS40NyAwIDcuOTUgMGgxMy41NzJtLTMzLjYzOC0xNS4wOGMtLjQ4My4yOTYtLjc3LjY5NC0uODcyIDEuMTk0LjAxNy41NDItLjIzNy44MzgtLjc2Mi44ODktLjU4NC4wNjgtLjg4MS0uMTc4LS44OTgtLjc0NS4wNjgtMS4wOTIuNTUtMS45NTYgMS40NjUtMi41OTkuNDMyLS4zNDcuODMtLjMyMiAxLjE5NC4wOTMuMzY0LjQ0OS4zMjIuODM4LS4xMjcgMS4xNjhtNy4zNjYtMTEuODI4Yy4yMTIuMzMuMjk2LjY3Ny4yNDYgMS4wNDEtLjE2MSAxLjA1OC0uNzU0IDEuNDk5LTEuNzYxIDEuMzM4LS4yOTYtLjA1MS0uNTMzLS4xNTItLjcyLS4yOTYtLjA1OS4wNzYtLjE2MS4yNjItLjI5Ni41NDItLjE3OC41MzMtLjUyNS43MTEtMS4wNDEuNTUtLjUwOC0uMjAzLS43MTEtLjU3Ni0uNTkzLTEuMTE4Ljc0NS0xLjkwNSAyLjA5MS0zLjIwOSA0LjA0LTMuOTIuNTY3LS4xNjkuOTQgMCAxLjExOC40OTEuMjAzLjUzMy4wNTEuODk4LS40NDkgMS4wOTItLjA5My4wNTEtLjE4Ni4xMDItLjI3MS4xMzYtLjA4NS4wNDItLjE2OS4wOTMtLjI3MS4xNDQiLz48L3N2Zz4=');\n}\n.piece.rook.white {\n  background-image: url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNzcuMTciIGhlaWdodD0iMTc3LjE3IiBzaGFwZS1yZW5kZXJpbmc9Imdlb21ldHJpY1ByZWNpc2lvbiIgaW1hZ2UtcmVuZGVyaW5nPSJvcHRpbWl6ZVF1YWxpdHkiIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiB2aWV3Qm94PSIwIDAgNTAgNTAiPjxkZWZzPjxsaW5lYXJHcmFkaWVudCBpZD0iMCIgeDE9IjIxLjM3NiIgeDI9Ijc3LjY0IiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+PHN0b3Agc3RvcC1jb2xvcj0iI2ZmZiIvPjxzdG9wIG9mZnNldD0iMSIgc3RvcC1jb2xvcj0iI2ZmZiIgc3RvcC1vcGFjaXR5PSIwIi8+PC9saW5lYXJHcmFkaWVudD48L2RlZnM+PHBhdGggZmlsbD0iIzFmMWExNyIgZD0ibTI4LjQwOCA5LjIyaDQuMjE2di0zLjM5NWg2Ljc5NnY5LjI5NWwtNS41IDQuMjQzdjExLjg1N2w0LjIyIDQuMjIxdjUuMDhoMy43ODl2NS45MjloLTMzLjg1OXYtNS45MjloMy43OTR2LTUuMDhsNC4yNDYtNC4yMjF2LTExLjg1N2wtNS41MDgtNC4yNDN2LTkuMjk1aDYuNzc0djMuMzk1aDQuMjQydi0zLjM5NWg2Ljc5eiIvPjxwYXRoIGZpbGw9InVybCgjMCkiIGQ9Im0zMy4wNyAxNy42NzhsMy4xNS0yLjU1N2gtMjIuNDJsMy4xNzUgMi41NTdoMTYuMW03LjE5NyAyNC41MjhoLTMwLjUxNHYyLjU1N2gzMC41MTR2LTIuNTU3bS0zLjg0NC01LjA1aC0yMi44MjZ2My4zN2gyMi44MjZ2LTMuMzdtLTQuMjE2LTE3Ljc4OGgtMTQuMzkzdjExLjg2MmgxNC4zOTN2LTExLjg2Mm01LjUwMy01LjkyN3YtNS45MjdoLTMuMzk1djMuMzk1aC03LjY0NXYtMy4zOTVoLTMuMzQ0djMuMzk1aC03LjYydi0zLjM5NWgtMy4zOTV2NS45MjdoMjUuNG0tMS45MTMgMjJsLTIuNTQ4LTIuNTMyaC0xNi40NTFsLTIuNTk5IDIuNTMyaDIxLjU5OCIvPjwvc3ZnPg==');\n}\n.piece.queen.white {\n  background-image: url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNzcuMTciIGhlaWdodD0iMTc3LjE3IiBzaGFwZS1yZW5kZXJpbmc9Imdlb21ldHJpY1ByZWNpc2lvbiIgaW1hZ2UtcmVuZGVyaW5nPSJvcHRpbWl6ZVF1YWxpdHkiIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiB2aWV3Qm94PSIwIDAgNTAgNTAiPjxkZWZzPjxsaW5lYXJHcmFkaWVudCBpZD0iMCIgeDE9IjIxLjI1MyIgeTE9IjM3LjIyIiB4Mj0iNzcuNjQiIHkyPSIzNy4zNSIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiPjxzdG9wIHN0b3AtY29sb3I9IiNmZmYiLz48c3RvcCBvZmZzZXQ9IjEiIHN0b3AtY29sb3I9IiNmZmYiIHN0b3Atb3BhY2l0eT0iMCIvPjwvbGluZWFyR3JhZGllbnQ+PC9kZWZzPjxnIHN0cm9rZT0iIzFmMWExNyIgc3Ryb2tlLXdpZHRoPSIuMDc2Ij48cGF0aCBmaWxsPSIjMWYxYTE3IiBkPSJtNDQuNTQxIDE0LjcyM2MtLjk0IDAtMS43NDQtLjMzLTIuNDA1LS45ODItLjY2LS42NTItLjk5MS0xLjQ0OC0uOTkxLTIuMzk2IDAtLjkyMy4zMy0xLjcxOS45OTEtMi4zODguNjYtLjY3NyAxLjQ2NS0xLjAxIDIuNDA1LTEuMDEuOTMxIDAgMS43MjcuMzMgMi4zODggMS4wMS42Ni42NjkuOTkxIDEuNDY1Ljk5MSAyLjM4OCAwIC45NDgtLjMzIDEuNzQ0LS45OTEgMi4zOTYtLjY2LjY1Mi0xLjQ1Ni45ODItMi4zODguOTgyem0tNC4zMSAyOS4yMmMtLjgxMy43MTEtMi42MzMgMS4zMDQtNS40NjEgMS43ODYtMi44MjguNDc0LTYuMDg3LjcyLTkuNzcuNzItMy43NTEgMC03LjA1LS4yNTQtOS44OTgtLjc0NS0yLjg0NS0uNDk5LTQuNjQtMS4xMTgtNS4zODUtMS44NjNsMS41NjYtNS45NTItLjY5NC0zLjg5NS0yLjE4NC0zLjc5My0yLjEwOC0xNS40MjYgMS4yMTEtLjQ3NCA2Ljc5OSAxMS40NTUuMTUyLTEzLjY0IDEuNjg1LS4yOTYgNS4xODIgMTMuNzE2IDIuNzc3LTE0Ljc1N2gxLjcxOWwyLjc3NyAxNC43MDcgNS4xMzEtMTMuNjY1IDEuNzEuMjk2LjE1MiAxMy42NCA2LjgyNC0xMS40ODEgMS4xNi41NDItMi4wNTcgMTUuMzU5LTIuMjEgMy43OTMtLjY5NCAzLjk0NiAxLjYxNyA2LjAzem0tMjUuNjk2LTMxLjk1M2MtLjk0OCAwLTEuNzUzLS4zMjItMi40MTMtLjk3NC0uNjYtLjY1Mi0uOTkxLTEuNDU2LS45OTEtMi4zOTYgMC0uOTIzLjMzLTEuNzE5Ljk5MS0yLjM3OS42Ni0uNjYgMS40NjUtLjk5MSAyLjQxMy0uOTkxLjkyMyAwIDEuNzE5LjMzIDIuMzc5Ljk5MS42Ni42Ni45OTEgMS40NTYuOTkxIDIuMzc5IDAgLjk0LS4zMyAxLjc0NC0uOTkxIDIuMzk2LS42Ni42NTItMS40NTYuOTc0LTIuMzc5Ljk3NHptLTkuMTM2IDIuNzM1Yy0uOTQgMC0xLjczNi0uMzMtMi4zODgtLjk4Mi0uNjUyLS42NTItLjk4Mi0xLjQ0OC0uOTgyLTIuMzk2IDAtLjkyMy4zMy0xLjcxOS45ODItMi4zODguNjUyLS42NzcgMS40NDgtMS4wMSAyLjM4OC0xLjAxLjk0OCAwIDEuNzQ0LjMzIDIuNDEzIDEuMDEuNjYuNjY5Ljk5MSAxLjQ2NS45OTEgMi4zODggMCAuOTQ4LS4zMyAxLjc0NC0uOTkxIDIuMzk2LS42NjkuNjUyLTEuNDY1Ljk4Mi0yLjQxMy45ODJ6bTE5LjU1LTMuOTcxYy0uOTQgMC0xLjc0NC0uMzMtMi4zOTYtLjk5MS0uNjUyLS42Ni0uOTc0LTEuNDY1LS45NzQtMi40MDUgMC0uOTMxLjMyMi0xLjcyNy45NzQtMi4zODguNjUyLS42NiAxLjQ1Ni0uOTkxIDIuMzk2LS45OTEuOTIzIDAgMS43MjcuMzMgMi4zOTYuOTkxLjY2OS42Ni45OTkgMS40NTYuOTk5IDIuMzg4IDAgLjk0LS4zMyAxLjc0NC0uOTk5IDIuNDA1LS42NjkuNjYtMS40NzMuOTkxLTIuMzk2Ljk5MXptMTAuNDE0IDEuMjM2Yy0uOTQgMC0xLjczNi0uMzIyLTIuMzg4LS45NzQtLjY1Mi0uNjUyLS45ODItMS40NTYtLjk4Mi0yLjM5NiAwLS45MjMuMzMtMS43MTkuOTgyLTIuMzc5LjY1Mi0uNjYgMS40NDgtLjk5MSAyLjM4OC0uOTkxLjk0OCAwIDEuNzUzLjMzIDIuNDEzLjk5MS42Ni42Ni45OTEgMS40NTYuOTkxIDIuMzc5IDAgLjk0LS4zMyAxLjc0NC0uOTkxIDIuMzk2LS42Ni42NTItMS40NjUuOTc0LTIuNDEzLjk3NHoiLz48cGF0aCBmaWxsPSJ1cmwoIzApIiBkPSJtMzguMjIgNDMuMDRjLTMuMDItMS4yNTMtNy40MTctMS44OC0xMy4xNjYtMS44OC01Ljg3NiAwLTEwLjMxMi42NDMtMTMuMzI3IDEuOTMgMi44OTYgMS4xNDMgNy4zMTUgMS43MSAxMy4yNSAxLjcxIDIuODQ1IDAgNS40NDQtLjE1MiA3Ljc5OC0uNDY2IDIuMzYyLS4zMTMgNC4xNzQtLjc0NSA1LjQ0NC0xLjI5NXptLTEzLjI2Ny0zNC4wM2MxLjEwOSAwIDEuNjYtLjU1OSAxLjY2LTEuNjU5IDAtMS4wOTItLjU1LTEuNjQzLTEuNjYtMS42NDMtMS4wOTIgMC0xLjYzNC41NS0xLjYzNCAxLjY0MyAwIDEuMTAxLjU0MiAxLjY1OSAxLjYzNCAxLjY1OXptMTIuNjI0IDI0Ljk3N2MtMy4xOTItLjgxMy03LjM2Ni0xLjIxMS0xMi41MjItMS4yMTEtNS4yOTIgMC05LjUxNy40MDYtMTIuNjc1IDEuMjM2bC4zNzMgMi4zNzljMy4yMTctLjc2MiA3LjMyNC0xLjE0MyAxMi4zMDItMS4xNDMgNC45NDQgMCA4Ljk3NS4zNzMgMTIuMSAxLjExOGwuNDIzLTIuMzc5em0uNjE4LTEuNDlsMS42MTctMi44NTNjLS43OTYuMzIyLTEuNjA5LjQ3NC0yLjQzLjQ3NC0yLjIxOCAwLTMuOTg4LS44OTctNS4zMDktMi43MDEtLjk5MS44MjEtMi4xIDEuMjM2LTMuMzI3IDEuMjM2LTEuNTgzIDAtMi44NTMtLjYxOC0zLjc5My0xLjg2My0xLjA1OCAxLjE2LTIuMzIgMS43NDQtMy43OTMgMS43NDQtMS4xOTQgMC0yLjI4Ni0uNDA2LTMuMjc3LTEuMjE5LTEuMzg5IDEuNzctMy4xODMgMi42NS01LjM4NSAyLjY1LS44MzggMC0xLjY3Ni0uMTUyLTIuNTA2LS40NjZsMS43MzYgMi45NzJjMy4yMDktLjkyMyA3LjYyLTEuMzg5IDEzLjIyNS0xLjM4OSA1LjcwNiAwIDEwLjExOC40NzQgMTMuMjQyIDEuNDE0em0tMTEuMTEtNS45MjdsLTIuMTA4LTEyLjEzMy0yLjEwOCAxMS45ODljLjA1MS0uMDM0LjE2MS0uMTE5LjM0Ny0uMjU0LjM4MS0uNzQ1Ljk1Ny0xLjExOCAxLjczNi0xLjExOC44NDcgMCAxLjM4OS4zNzIgMS42MzQgMS4xMTguMTAyLjEwMi4yNzEuMjM3LjUuMzk4em02Ljg2Ny40NzR2LTExLjQ4OWwtNC4wODkgMTEuMjYxYy4zMTMtLjExLjU3Ni0uMjYyLjc5Ni0uNDQuMzMtLjQxNS43NzktLjYyNyAxLjMzOC0uNjI3LjY2IDAgMS4xOTQuMjk2IDEuNTkyLjg3Mi4wNDIuMDY4LjEwMi4xMzYuMTY5LjIxMi4wNjguMDc2LjEzNi4xNDQuMTk1LjIxMnptLTEzLjkzNi0uMzQ3bC00LjA2NC0xMS4xNDJ2MTEuMzM3Yy4wNDItLjA2OC4xMTktLjE0NC4yMi0uMjQ1LjMzLS42OTQuODcyLTEuMDQxIDEuNjM0LTEuMDQxLjYyNyAwIDEuMTQzLjI2MiAxLjU0MS43OTYuNDQ5LjE5NS42NjkuMjk2LjY2OS4yOTZ6bS02LjI5OSAxLjM4OWwtNS4zMzQtOS4yMDMgMS4zNjMgOC4zODJjLjk0LjY2IDEuODYzLjk5MSAyLjc1Mi45OTEuMzQ3IDAgLjc1NC0uMDU5IDEuMjE5LS4xNjl6bTIyLjM5NC4xMTljLjM4MS4xMTkuODA0LjE3OCAxLjI3LjE3OCAxLjAxIDAgMS45NDctLjMxMyAyLjgyOC0uOTRsMS4zNjMtOC41ODUtNS40NjEgOS4zNDd6bTEuNDkgMTIuNTU2bC0uNzQ1LTIuODAyYy0zLjI0My0uNzExLTcuMjA1LTEuMDY3LTExLjkwNC0xLjA2Ny00LjY0OCAwLTguNjExLjM1Ni0xMS44NzkgMS4wNjdsLS43NzEgMi44MjhjMy4wNzMtLjkzMSA3LjI5OC0xLjM4OSAxMi42NzUtMS4zODkgNS4yNDEgMCA5LjQ0OS40NDkgMTIuNjI0IDEuMzYzem0tMjMuMDYtMzAuNTE0YzEuMDg0IDAgMS42MzQtLjU0MiAxLjYzNC0xLjYzNCAwLTEuMDkyLS41NS0xLjYzNC0xLjYzNC0xLjYzNC0xLjEwOSAwLTEuNjY4LjU0Mi0xLjY2OCAxLjYzNCAwIDEuMDkyLjU1OSAxLjYzNCAxLjY2OCAxLjYzNHptMjAuODI4IDBjMS4xMDkgMCAxLjY2OC0uNTQyIDEuNjY4LTEuNjM0IDAtMS4wOTItLjU1OS0xLjYzNC0xLjY2OC0xLjYzNC0xLjA4NCAwLTEuNjM0LjU0Mi0xLjYzNCAxLjYzNCAwIDEuMDkyLjU1IDEuNjM0IDEuNjM0IDEuNjM0em0tMjkuOTY0IDIuNzM1YzEuMTA5IDAgMS42NjgtLjU1IDEuNjY4LTEuNjQzIDAtMS4xMDktLjU1OS0xLjY1OS0xLjY2OC0xLjY1OS0xLjA4NCAwLTEuNjM0LjU1LTEuNjM0IDEuNjU5IDAgMS4wOTIuNTUgMS42NDMgMS42MzQgMS42NDN6bTM5LjE0IDBjMS4wOTIgMCAxLjY0Mi0uNTUgMS42NDItMS42NDMgMC0xLjEwOS0uNTUtMS42NTktMS42NDItMS42NTktMS4xMDEgMC0xLjY2LjU1LTEuNjYgMS42NTkgMCAxLjA5Mi41NTkgMS42NDMgMS42NiAxLjY0M3oiLz48L2c+PC9zdmc+');\n}\n.piece.king.white {\n  background-image: url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNzcuMTciIGhlaWdodD0iMTc3LjE3IiBzaGFwZS1yZW5kZXJpbmc9Imdlb21ldHJpY1ByZWNpc2lvbiIgaW1hZ2UtcmVuZGVyaW5nPSJvcHRpbWl6ZVF1YWxpdHkiIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiB2aWV3Qm94PSIwIDAgNTAgNTAiPjxkZWZzPjxsaW5lYXJHcmFkaWVudCBpZD0iMCIgeDE9IjIxLjM3NiIgeDI9Ijc3LjY0IiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+PHN0b3Agc3RvcC1jb2xvcj0iI2ZmZiIvPjxzdG9wIG9mZnNldD0iMSIgc3RvcC1jb2xvcj0iI2ZmZiIgc3RvcC1vcGFjaXR5PSIwIi8+PC9saW5lYXJHcmFkaWVudD48L2RlZnM+PGcgZmlsbD0iIzFmMWExNyI+PHBhdGggZD0ibTI1LjgyMSAxMi4wMmgtMS43NjF2LTMuMjUxaC0yLjA2NmMtLjU1OSAwLS44MzgtLjI3MS0uODM4LS44MjF2LS4wMjVjMC0uNTQyLjI3OS0uODEzLjgzOC0uODEzaDIuMDY2di0yLjEwOGMwLS41ODQuMjk2LS44NzIuODg5LS44NzIuNTc2IDAgLjg3Mi4yODguODcyLjg3MnYyLjEwOGgyLjEzNGMuNTQyIDAgLjgxMy4yNzEuODEzLjgxM3YuMDI1YzAgLjU1LS4yNzEuODIxLS44MTMuODIxbC0yLjExNy4wMjUtLjAxNyAzLjIyNiIvPjxwYXRoIGQ9Im0xMS4wMyAzNy43NDRsLS44MTMtNC42NGMtLjAxNyAwLS4wNDItLjAzNC0uMDc2LS4xMDItLjA4NS0uMTE4LS4zMjItLjI3MS0uNzExLS40NTctLjM4MS0uMTk1LS44MzgtLjUxNi0xLjM0Ni0uOTgyLS43MjgtLjYxLTEuMjk1LTEuMTA5LTEuNzAyLTEuNDktLjQwNi0uMzczLS43NzEtLjc4Ny0xLjEwMS0xLjIzNi0xLjAxLTEuMzg5LTEuNTc1LTMuMDY1LTEuNjg1LTUuMDQtLjE2OS0xLjg5Ny42MDEtMy43OTMgMi4zMDMtNS42ODEgMS43MTktMS44OCA0LjA0Ny0yLjc2OSA2Ljk2OC0yLjY1IDEuMDkyLjA2OCAyLjM3OS4zMyAzLjg0NC43OTYuNDgzLjE5NS45NzQuMzkgMS40ODIuNTc2LjUuMTk1Ljk5OS4zODkgMS40OTkuNTg0LjI2Mi4xMzUuNS4yNzEuNjk0LjM5OC0uMDg1LS4zNDctLjEyNy0uNjk0LS4xMjctMS4wNDEgMC0xLjI4Ny40NTctMi4zODggMS4zOC0zLjMwMi45MTQtLjkwNiAyLjAyNC0xLjM3MiAzLjMxMS0xLjM4OSAxLjI4NyAwIDIuMzg4LjQ2NiAzLjMwMiAxLjM4LjkwNi45MTQgMS4zNjMgMi4wMiAxLjM2MyAzLjI4NSAwIC4yNjItLjAzNC42MS0uMTAyIDEuMDQxLjIyOS0uMTQ0LjQ1Ny0uMjcxLjY2OS0uMzcyLjc2Mi0uMzMgMS43NjEtLjcyIDMuMDEtMS4xNiAxLjQyMi0uNDgzIDIuNzAxLS43NTQgMy44NDQtLjgyMSAyLjkyMS0uMTM2IDUuMjQxLjc1NCA2Ljk0MyAyLjY1IDEuNjY4IDEuODg4IDIuNDQ3IDMuNzg1IDIuMzI4IDUuNjgxLS4xMjcgMS45NzMtLjcwMyAzLjY0OS0xLjcxIDUuMDQtLjMzLjQ0OS0uNzAzLjg2NC0xLjExOCAxLjI1My0uNDA2LjM5LS45NjUuODgxLTEuNjYgMS40NzMtLjU0Mi40NjYtMS4wMS43OTYtMS4zODkuOTgyLS4zODEuMTg2LS42MDEuMzQ3LS42NjkuNDU3LS4wMTcuMDM0LS4wMzQuMDU5LS4wNTEuMDc2LS4wMTcuMDE3LS4wMjUuMDM0LS4wMjUuMDUxbC0uNzk2IDQuNjY1IDEuNjQzIDYuMTIxYy0uODMuNzQ1LTIuNjg0IDEuMzU1LTUuNTU0IDEuODM3LTIuODc5LjQ4My02LjIwNi43Mi05Ljk3NC43Mi0zLjgzNSAwLTcuMjE0LS4yNTQtMTAuMTE4LS43NTQtMi45MTItLjUwOC00Ljc0MS0xLjE0My01LjQ4Ni0xLjg5N2wxLjYzNC02LjA1Ii8+PC9nPjxwYXRoIGZpbGw9InVybCgjMCkiIGQ9Im0yNS43OTYgMjkuNTMyYzIuODQ1LjAzNCA1LjQ0NC4yMDMgNy44MDYuNTA4IDIuMzcxLjMwNSA0LjIyNS42OTQgNS41NjMgMS4xNTEuNjI3LS40OTEgMS4zMTItMS4wNDEgMi4wNTctMS42NTEuNzQ1LS42MDEgMS4zNjMtMS4yMTkgMS44NjMtMS44NDYuNzg3LTEuMDEgMS4xODUtMi4zMzcgMS4xODUtMy45OTYgMC0xLjQ4Mi0uMzU2LTIuNzI2LTEuMDY3LTMuNzE3LTEuMjctMS44NTQtMy4yMDktMi43NzctNS44LTIuNzc3LTEuNTU4IDAtMy4xNS4zMjItNC43OTIuOTY1LTEuNDM5LjU4NC0yLjUzMiAxLjIyOC0zLjI2OCAxLjkzOS0xLjM4OSAxLjM4OS0yLjQyMSAzLjE3NS0zLjA4MiA1LjM1MS0uMjI5Ljc3OS0uMzY0IDEuNDktLjQwNiAyLjEyNS0uMDQyLjYzNS0uMDU5IDEuMjg3LS4wNTkgMS45NDdtLTEzLjI1IDYuNjk3YzMuMTQxLS43OTYgNy4zMDctMS4xOTQgMTIuNTA1LTEuMTk0IDUuMDg5IDAgOS4yMDMuMzgxIDEyLjMyNyAxLjE0M2wuNjE4LTMuNjQ5Yy0zLjMyNy0uODcyLTcuNjcxLTEuMzEyLTEzLjA1LTEuMzEyLTUuNDEgMC05Ljc0NS40NDktMTMuMDIgMS4zMzhsLjYxOCAzLjY3NW0yNS4yOTggNC40MTFsLS43MzctMi44NDVjLTMuMjc3LS43MjgtNy4zMzItMS4wOTItMTIuMTU4LTEuMDkyLTQuODA5IDAtOC44NTYuMzY0LTEyLjEzMyAxLjA5MmwtLjc4NyAyLjg3YzMuMTU4LS45MjMgNy40NjgtMS4zODkgMTIuOTQ1LTEuMzg5IDUuNDQ0IDAgOS43MjguNDU3IDEyLjg2OSAxLjM2M20uNjUyIDIuMzM3Yy0zLjE5Mi0xLjI4Ny03LjY3OS0xLjkzOS0xMy40NDUtMS45MzktNS45ODYgMC0xMC41MTYuNjYtMTMuNTk4IDEuOTkgMi45MTMgMS4xNTEgNy40MTcgMS43MzYgMTMuNTIxIDEuNzM2IDIuOTEzIDAgNS41NjMtLjE2MSA3Ljk1OS0uNDgzIDIuNDA0LS4zMjIgNC4yNS0uNzYyIDUuNTYzLTEuMzA0bS0xNC40MTktMTMuNDQ1Yy0uMDA4LS42NDMtLjAzNC0xLjI4Ny0uMDY4LTEuOTIyLS4wMzQtLjYzNS0uMTYxLTEuMzQ2LS4zNzItMi4xMjUtLjY3Ny0yLjIxLTEuNzAyLTMuOTk2LTMuMDgyLTUuMzUxLS43MTEtLjY5NC0xLjc5NS0xLjM0Ni0zLjI2OC0xLjkzOS0xLjY4NS0uNjYtMy4yODUtLjk5MS00Ljc5Mi0uOTkxLTIuNjA4IDAtNC41NDcuOTMxLTUuOCAyLjgwMi0uNzExLjk5MS0xLjA2NyAyLjIzNS0xLjA2NyAzLjcxNyAwIDEuNjI2LjM5OCAyLjk1NSAxLjE4NSAzLjk5Ni40ODMuNjEgMS4wOTIgMS4yMjggMS44MzcgMS44MzcuNzQ1LjYxIDEuNDM5IDEuMTY4IDIuMDgzIDEuNjYgMi44OTYtMS4wNDEgNy4zNDEtMS42IDEzLjM0My0xLjY4NW0uODcyLTQuNjE0Yy4xMTktLjQ2Ni4yMTItLjc4Ny4yOTYtLjk2NS4xNjktLjY0My4zNTYtMS4xOTQuNTc2LTEuNjQzLjA5My0uMjc5LjIzNy0uNjAxLjQzMi0uOTc0LjE4Ni0uMzczLjM4OS0uODA0LjYxLTEuMjc5LjEyNy0uMjc5LjI3MS0uNjI3LjQxNS0xLjAzMy4xNTItLjQwNi4zMDUtLjgwNC40NDktMS4yMDIuMTM1LS4zMy4yMDMtLjY4Ni4yMDMtMS4wNjcgMC0uODEzLS4yOTYtMS40OTktLjg3Mi0yLjA2Ni0uNTc2LS41NzYtMS4yNzktLjg2NC0yLjEwOC0uODY0LTEuOTY0IDAtMi45NTUuOTkxLTIuOTU1IDIuOTU1IDAgLjM4MS4wNjguNzM3LjIwMyAxLjA2Ny4zNjQgMS4wNzUuNjQzIDEuODIuODM4IDIuMjM1LjIyLjQ3NC40MTUuOTA2LjYwMSAxLjI3OS4xNzguMzcyLjMzOS42OTQuNDY2Ljk3NC4yMi41NS4zOTggMS4wOTIuNTUgMS42NDMuMDM0LjA5My4xMjcuNDE1LjI5Ni45NCIvPjwvc3ZnPg==');\n}\n.piece.pawn.black {\n  background-image: url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNzcuMTciIGhlaWdodD0iMTc3LjE3IiBzaGFwZS1yZW5kZXJpbmc9Imdlb21ldHJpY1ByZWNpc2lvbiIgaW1hZ2UtcmVuZGVyaW5nPSJvcHRpbWl6ZVF1YWxpdHkiIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiB2aWV3Qm94PSIwIDAgNTAgNTAiPjxwYXRoIGQ9Im0yNSA0Ni40NWgtMTMuMzk0Yy0uNjYtMS42NTEtLjk5MS0zLjM3OC0uOTkxLTUuMTgyIDAtMy4wNTYuODY0LTUuOCAyLjU5OS04LjIzOCAxLjczNi0yLjQzIDMuOTcxLTQuMTY2IDYuNjk3LTUuMjA3LTEuMTY4LS41NDItMi4xMjUtMS4zNjMtMi44NjItMi40NjQtLjczNy0xLjEwMS0xLjEwMS0yLjM0NS0xLjEwMS0zLjczNCAwLTEuNzM2LjU3Ni0zLjI0MyAxLjczNi00LjUxMyAxLjE1Mi0xLjI3OCAyLjU3NC0yLjAyIDQuMjY3LTIuMjEtMS4zNDYtMS4wMS0yLjAyLTIuMzQ1LTIuMDItMy45OTYgMC0xLjM4OS40OTEtMi41ODIgMS40ODItMy41NzMuOTgyLS45OTEgMi4xNzYtMS40ODIgMy41ODEtMS40ODIgMS4zODkgMCAyLjU4Mi40OTEgMy41NzMgMS40ODIuOTkxLjk5MSAxLjQ5IDIuMTg0IDEuNDkgMy41NzMgMCAxLjY1MS0uNjY5IDIuOTg5LTIuMDIgMy45OTYgMS42OTMuMTk1IDMuMTE2LjkzMSA0LjI2NyAyLjIxIDEuMTYgMS4yNyAxLjczNiAyLjc3NyAxLjczNiA0LjUxMyAwIDEuMzg5LS4zNzMgMi42MzMtMS4xMjYgMy43MzQtLjc1MyAxLjEwMS0xLjcxIDEuOTIyLTIuODYyIDIuNDY0IDIuNzI2IDEuMDQxIDQuOTYxIDIuNzc3IDYuNjk3IDUuMjA3IDEuNzM2IDIuNDM4IDIuNTk5IDUuMTgyIDIuNTk5IDguMjM4IDAgMS43ODYtLjMyMiAzLjUxNC0uOTY1IDUuMTgyaC0xMy4zOTQiIGZpbGw9IiMxZjFhMTciIHRyYW5zZm9ybT0ibWF0cml4KDEgMCAwIC45NzMyNCAwIDEuMjQzKSIvPjwvc3ZnPg==');\n}\n.piece.bishop.black {\n  background-image: url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNzcuMTciIGhlaWdodD0iMTc3LjE3IiBzaGFwZS1yZW5kZXJpbmc9Imdlb21ldHJpY1ByZWNpc2lvbiIgaW1hZ2UtcmVuZGVyaW5nPSJvcHRpbWl6ZVF1YWxpdHkiIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiB2aWV3Qm94PSIwIDAgNTAgNTAiPjxkZWZzPjxsaW5lYXJHcmFkaWVudCBpZD0iMCIgeDE9IjIxLjA5IiB5MT0iMzcuMSIgeDI9Ijc3LjY3IiB5Mj0iMzcuNDY5IiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+PHN0b3Agc3RvcC1jb2xvcj0iI2ZmZiIvPjxzdG9wIG9mZnNldD0iMSIgc3RvcC1jb2xvcj0iI2ZmZiIgc3RvcC1vcGFjaXR5PSIwIi8+PC9saW5lYXJHcmFkaWVudD48L2RlZnM+PHBhdGggZD0ibTI1IDQyLjE2Yy0uMjI5Ljk0LS41MTcgMS41OTItLjg0NyAxLjk1Ni0uMzMuMzY0LS43NjIuNzQ1LTEuMzEyIDEuMTQzLS41OTMuNDE1LTEuMjk1Ljc2Mi0yLjEwOCAxLjA1LS44MTMuMjg4LTEuNzEuMzY0LTIuNzAxLjIxMmwtNi45NjgtLjk2NWMtLjI4OC0uMDM0LS41MzMtLjAzNC0uNzYyIDAtLjIyLjAzNC0uNDMyLjA1MS0uNjM1LjA1MS0uMzQ3IDAtLjc4Ny4wNzYtMS4zMjEuMjM3LS41NDIuMTUyLS45NTcuMzgxLTEuMjUzLjY3N2wtMi40MDQtMy45NDZjLjI5Ni0uMzMuNTU5LS41NTkuNzg3LS42OTQuMjM3LS4xMjcuNTA4LS4yNzEuODIxLS40MTUuOTU3LS40NDkgMS45ODEtLjcyIDMuMDczLS44MjEuNDY2LS4wMzQuOTIzLS4wNDIgMS4zNjMtLjAyNS40NDkuMDE3LjkxNCAwIDEuMzk3LS4wNTEuODg5LjE1MiAxLjc4Ni4yODggMi42ODQuNDA2LjkwNi4xMjcgMS44MTIuMjU0IDIuNzE4LjM5Ljk5MSAwIDEuNjYtLjEwMiAyLjAxLS4yOTYuMTg2LS4xMDIuNDc0LS4yODguODcyLS41NS4zOTgtLjI2Mi43OTYtLjY1MiAxLjE5NC0xLjE2OC0uODgxLS4wOTMtMS43Ny0uMjYyLTIuNjg0LS41MDgtLjkwNi0uMjM3LTEuNzEtLjQ5MS0yLjQwNC0uNzU0bDIuNTgyLTYuNDAxYy0xLjI5NS0uNzQ1LTIuMTkzLTEuMzM4LTIuNzA5LTEuNzk1LS41MDgtLjQ1Ny0uOTE0LS45ODItMS4yMTEtMS41NzUtLjQzMi0uNzYyLS43MTEtMS40OTktLjgzLTIuMjEtLjEyNy0uNzExLS4xNzgtMS4zNDYtLjE2MS0xLjkxMy4wMTctLjk5MS4yNDUtMi4wODMuNzAzLTMuMjg1LjQ1Ny0xLjE5NCAxLjMxMi0yLjI2OSAyLjU2NS0zLjIwOSAxLjA0MS0uNzk2IDIuMDY2LTEuNjE3IDMuMDU3LTIuNDU1Ljk5MS0uODQ3IDEuOTczLTEuODI5IDIuOTQ2LTIuOTU1LTEuMjE5LS42MjctMS44MjktMS42MjYtMS44MjktMi45OTcgMC0uOTMxLjMyMi0xLjcxOS45NzQtMi4zODguNjUyLS42NiAxLjQ1Ni0uOTkxIDIuMzk2LS45OTEuOTIzIDAgMS43MTkuMzMgMi4zNzkuOTkxLjY2LjY2OS45OTEgMS40NTYuOTkxIDIuMzg4IDAgMS4zNTUtLjYxIDIuMzU0LTEuODI5IDIuOTk3Ljk1NyAxLjEyNiAxLjkzIDIuMTA4IDIuOTEzIDIuOTU1Ljk4Mi44MzggMi4wMiAxLjY1OSAzLjA5IDIuNDU1IDEuMjM2Ljk0IDIuMDgzIDIuMDEgMi41MjMgMy4yMDkuNDQ5IDEuMjAyLjY5NCAyLjI5NS43MiAzLjI4NSAwIC41NjctLjA1MSAxLjIwMi0uMTY5IDEuOTEzLS4xMTguNzExLS4zODEgMS40NDgtLjc5NiAyLjIxLS4zMy41OTMtLjc0NSAxLjExOC0xLjI1MyAxLjU3NS0uNS40NTctMS4zODkgMS4wNS0yLjY2NyAxLjc5NWwyLjU4MiA2LjQwMWMtLjcyOC4yNjMtMS41NDkuNTE3LTIuNDU1Ljc1NC0uOTE0LjI0Ni0xLjc4Ny40MTUtMi42MzMuNTA4LjM4MS41MTcuNzcxLjkwNiAxLjE2OCAxLjE2OC4zOTguMjYzLjY5NC40NDkuODk3LjU1LjM0Ny4xOTUgMS4wMTYuMjk2IDIuMDEuMjk2Ljg4OS0uMTM2IDEuNzg3LS4yNjMgMi42OTItLjM5Ljg5OC0uMTE4IDEuODAzLS4yNTQgMi43MTgtLjQwNi40NC4wNTEuODg5LjA2OCAxLjM0Ni4wNTEuNDU3LS4wMTcuOTIzLS4wMDggMS40MDYuMDI1IDEuMDU4LjEwMiAyLjA4My4zNzMgMy4wNzMuODIxLjI5Ni4xNDQuNTY3LjI4OC44MDQuNDE1LjI0NS4xMzUuNTA4LjM2NC44MDQuNjk0bC0yLjQzIDMuOTQ2Yy0uMjk2LS4yOTYtLjcxMS0uNTI1LTEuMjUzLS42NzctLjUzMy0uMTYxLS45NjUtLjIzNy0xLjI5NS0uMjM3LS4yMiAwLS40NC0uMDE3LS42Ni0uMDUxLS4yMi0uMDM0LS40NzQtLjAzNC0uNzU0IDBsLTYuOTUxLjk2NWMtLjk5MS4xNTItMS45MTMuMDg1LTIuNzYtLjE5NS0uODU1LS4yNzktMS41NTgtLjY1Mi0yLjEtMS4xMTgtLjU0Mi0uNDQ5LS45ODItLjgzLTEuMzA0LTEuMTUxLS4zMjItLjMyMi0uNTkzLS45NTctLjgwNC0xLjg5NyIgZmlsbD0iIzFmMWExNyIvPjxwYXRoIGQ9Im0yNC4wOSAyMy43MDV2Mi4xMDhjMCAuNjEuMzA1LjkxNC45MTQuOTE0LjYxIDAgLjkxNC0uMzA1LjkxNC0uOTE0di0yLjEzNGgyLjIzNWMuNTc2IDAgLjg3Mi0uMjk2Ljg3Mi0uODk3IDAtLjU5My0uMjk2LS44ODktLjg3Mi0uODg5aC0yLjIzNXYtMi4yMzVjMC0uNjEtLjMwNS0uOTE0LS45MTQtLjkxNC0uNjEgMC0uOTE0LjMwNS0uOTE0LjkxNHYyLjIzNWgtMi4xODRjLS41ODQgMC0uODcyLjI5Ni0uODcyLjg4OSAwIC42MDEuMjg4Ljg5Ny44NzIuODk3bDIuMTg0LjAyNW03LjUxIDEzLjc0MWwtMS4wNDEtMi41MzFjLTEuNjg1LS4zNjQtMy41MzktLjU0Mi01LjU1NC0uNTQyLTEuOTk4IDAtMy44MzUuMTc4LTUuNTAzLjU0MmwtMS4wNDEgMi41MDZjMi4wNDktLjUxNiA0LjIzMy0uNzcgNi41NDUtLjc3IDIuMjg2IDAgNC40NzkuMjYyIDYuNTk2Ljc5Nm0tMi4wODMtNS4xMTRsLS43Mi0xLjczNnYtLjY2OWMtMS4yNTMtLjE3OC0yLjUyMy0uMjcxLTMuNzkzLS4yNzEtMS4yMzYgMC0yLjQ5OC4wOTMtMy43NjguMjcxbC0uMDI1LjY2OS0uNjY5IDEuNzM2YzEuNDA1LS4yNDYgMi44ODctLjM3MyA0LjQ2Mi0uMzczIDEuNTkyIDAgMy4wOS4xMjcgNC41MTMuMzczbS0uODY0IDkuMzgxYy0uNjYtLjQ5OS0xLjMyOS0xLjI4Ny0xLjk5LTIuMzYyaC0uNzg3YzAgLjgxMy4xODYgMS42LjU2NyAyLjM2MmgyLjIxbS01LjExNCAwYy4zODEtLjgxMy41NzYtMS42LjU3Ni0yLjM2MmgtLjc5NmMtLjY0MyAxLjA1OC0xLjMxMiAxLjg0Ni0yLjAyIDIuMzYyaDIuMjM1IiBmaWxsPSJ1cmwoIzApIi8+PC9zdmc+');\n}\n.piece.knight.black {\n  background-image: url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNzcuMTciIGhlaWdodD0iMTc3LjE3IiBzaGFwZS1yZW5kZXJpbmc9Imdlb21ldHJpY1ByZWNpc2lvbiIgaW1hZ2UtcmVuZGVyaW5nPSJvcHRpbWl6ZVF1YWxpdHkiIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiB2aWV3Qm94PSIwIDAgNTAgNTAiPjxkZWZzPjxsaW5lYXJHcmFkaWVudCBpZD0iMCIgeDE9IjIxLjI1MyIgeTE9IjM3LjU5MiIgeDI9Ijc3LjY0IiB5Mj0iMzcuNDY5IiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+PHN0b3Agc3RvcC1jb2xvcj0iI2ZmZiIvPjxzdG9wIG9mZnNldD0iMSIgc3RvcC1jb2xvcj0iI2ZmZiIgc3RvcC1vcGFjaXR5PSIwIi8+PC9saW5lYXJHcmFkaWVudD48L2RlZnM+PHBhdGggZmlsbD0iIzFmMWExNyIgZD0ibTI2LjE4IDkuMzk1YzIuNTk5LjE2OSA1IC44MzggNy4yMjIgMi4wMiAyLjIxIDEuMTY4IDQuMDk4IDIuNjc1IDUuNjU2IDQuNTEzIDEuMDkyIDEuMjg3IDIuMTE3IDIuODQ1IDMuMDgyIDQuNjY1Ljk3NCAxLjgxMiAxLjc0NCAzLjc0MiAyLjMyIDUuNzc0LjY2IDIuMzcxIDEuMDg0IDQuODUxIDEuMjUzIDcuNDU5LjE3OCAyLjU5OS4yNjMgNS4wMS4yNjMgNy4yM3Y1LjQwMmMwIDAtMS4yODcgMC0zLjg2MSAwLTIuNTY1IDAtNS45MDEgMC0xMC4wMSAwaC0xNi42MzdjLS4xNTIgMC0uMjItLjQwNi0uMjEyLTEuMjExLjAwOC0uODEzLjA1OS0xLjQ2NS4xNjEtMS45NjQuMDU5LS4zOTguMjItLjk1Ny40NjYtMS42ODUuMjU0LS43MjguNjYtMS42MDkgMS4yNDUtMi42NS4yNjItLjUzMy44ODktMS4zMDQgMS44OC0yLjMyLjk5OS0xLjAxNiAyLjEzNC0yLjIwMSAzLjQyOS0zLjUzOS43NDUtLjc2MiAxLjMyMS0xLjcxOSAxLjc0NC0yLjg3OS40MjMtMS4xNTEuNjAxLTIuMjAxLjUzMy0zLjE1LS42MS41LTEuMjc5LjkwNi0yLjAxIDEuMjE5LTMuNTA1IDEuMjUzLTYuMDUgMy4wNzMtNy42MTEgNS40NTItLjExOS4xNTItLjQ5MS44MjEtMS4xMTggMi4wMi0uMzMuNjI3LS42MTggMS4wNTgtLjg0NyAxLjI4Ny0uMzEzLjMxMy0uNzcxLjQ5MS0xLjM2My41MjUtLjkyMy4wNDItMS42NDMtLjM5OC0yLjE1OS0xLjM0Ni0uNjk0LjIwMy0xLjMxMi4yODgtMS44NjMuMjU0LS45MjMtLjM0Ny0xLjU5Mi0uNzItMi4wMS0xLjExOC0uODQ3LS44NDctMS4zODktMS42ODUtMS42NTEtMi41MzItLjI1NC0uODQ3LS4zODEtMS43NTMtLjM4MS0yLjcyNiAwLTEuMzg5Ljg1NS0zLjIyNiAyLjU4Mi01LjUxMiAyLjAyLTIuNjI1IDMuMDktNC42MzEgMy4yMTctNiAwLS41OTMuMDU5LTEuMjYyLjE3OC0yLjAxLjEwMi0uNTE3LjMwNS0xLjAxLjYxOC0xLjQ5LjIyLS4zMy4zNjQtLjU1OS40MzItLjY3Ny4wNzYtLjEyNy4yMTItLjMxMy40MTUtLjU1OS4xNDQtLjIwMy4yNzEtLjM1Ni4zNzMtLjQ1Ny4wOTMtLjExLjIyLS4yNTQuMzczLS40NC4xNzgtLjIxMi40MDYtLjQ1Ny42OTQtLjc0NS0uODgtMi40MTMtMS4yMzYtNC45MDItMS4wNjctNy40NTkgMy4yODUgMS4xNjggNi4wNSAzLjAxIDguMjggNS41MjkuNTUtMS44NzEgMS42MjYtMy4zODcgMy4yMjYtNC41MzggMS4zMjEuOTIzIDIuMzcxIDIuMTUxIDMuMTUgMy42NjYiLz48cGF0aCBmaWxsPSJ1cmwoIzApIiBkPSJtMTUuNjg4IDE3Ljc4NmMuMzY0LS4xODYuNTQyLS4yNzkuNTQyLS4yNzkuNDk5LS4xOTUuNjUyLS41NTkuNDc0LTEuMDkyLS4xOTUtLjQ5MS0uNTc2LS42Ni0xLjE0My0uNDkxLTEuOTQ3LjcxMS0zLjI5NCAyLjAyLTQuMDQgMy45Mi0uMTE4LjU0Mi4wNzYuOTE0LjU5MyAxLjExOC41MTYuMTYxLjg2NC0uMDE3IDEuMDQxLS41NS4xMzYtLjI3OS4yMjktLjQ2Ni4yOTYtLjU0Mi4xODYuMTQ0LjQyMy4yNDUuNzIuMjk2IDEuMDEuMTYxIDEuNi0uMjc5IDEuNzYxLTEuMzM4LjA1MS0uMzY0LS4wMzQtLjcxMS0uMjQ2LTEuMDQxbS00LjExNSAxNi43NjRjLjA1OS0uMTUyLjE2OS0uMzczLjMyMi0uNjY5LjI3OS0uNjk0LjQxNS0xLjEwOS40MTUtMS4yNDUtLjAyNS0uNDU3LS4yNzEtLjY5NC0uNzItLjY5NC0uMzMgMC0uNzExLjQ3NC0xLjE2IDEuNDE0LS4wNjguMTM2LS4xNjkuMjU0LS4yOTYuMzQ3LS40NDkuNDY2LS4zODEuODU1LjE5NSAxLjE2OC41MzMuMzEzLjk0LjIxMiAxLjI0NS0uMzIybTE0LjYzLTkuMjAzYzEuMTYtMS41MjQgMS43MjctMy4yMTcgMS43MS01LjA4LS4wNjgtLjU1LS4zODEtLjgyMS0uOTQtLjgyMS0uNzYyIDAtMS4wNTguMjc5LS44OTguODM4LjA1MS45MTQtLjAzNCAxLjY2OC0uMjcxIDIuMjYxLS4zODEuOTQtLjgwNCAxLjY0Mi0xLjI2MSAyLjEwOC0uMjU0LjUtLjEwMi44NjQuNDQ5IDEuMDkyLjUyNS4yNDUuOTMxLjExOSAxLjIxMS0uMzk4bS02LjQ3Ny0xMi4xMWMtLjA3Ni0uNTkzLS4wNTktMS4yMzYuMDUxLTEuOTMtLjk5MS4xOTUtMS45MjIuNjYtMi44MDIgMS4zODktLjUyNS4yNzktLjY1Mi42NjktLjM3MyAxLjE2OC4yNzkuNTA4LjY2OS41OTMgMS4xNjguMjQ2LjM0Ny0uMTg2LjY2OS0uMzU2Ljk1Ny0uNTA4LjI4OC0uMTYxLjYxOC0uMjc5Ljk5OS0uMzY0bTIzLjI1IDMxLjQ1NGMtLjAxNyAwIDAtLjQ0OS4wNDItMS4zNDYuMTMxLTMuMTA3LjA5NS02LjIyMS4wNzYtOS4zMy0uMDE3LTIuMjEtLjMxMy00LjQxMS0uODg5LTYuNjEzLS44NC0zLjMxLTIuMTI0LTYuNDg1LTQuMDcyLTkuMjk2LTIuNjM0LTMuODQ1LTYuODE0LTYuMDMtMTEuMjg2LTYuOTc2LjEyNi43NjYuMDMzIDEuNTQuMDc2IDIuMzExIDEuNi41NDIgMy4xMTYgMS4yMTkgNC41MzggMi4wMzIgNC4yNDEgMi41NTQgNi40MTQgNy4yNzUgNy4xOTcgMTEuOTMgMS4yNzIgNi4xNTQuNDUzIDExLjU1Ny44MTMgMTcuMjg5aDMuNTA1bS0zMy41MzctMTQuNTU0Yy40NzQtLjMzOS41MjUtLjcyOC4xNDQtMS4xOTQtLjM5OC0uMzgxLS44My0uNDE1LTEuMzEyLS4xMDItMS4wMS42Ni0xLjU0OSAxLjUzMi0xLjYxNyAyLjYwOC4wMTcuNTQyLjM0Ny44MDQuOTc0Ljc3MS41OTMtLjA1MS44ODEtLjM1Ni44NjQtLjkyMy4xMzUtLjUyNS40NDktLjkxNC45NDgtMS4xNiIvPjwvc3ZnPg==');\n}\n.piece.rook.black {\n  background-image: url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNzcuMTciIGhlaWdodD0iMTc3LjE3IiBzaGFwZS1yZW5kZXJpbmc9Imdlb21ldHJpY1ByZWNpc2lvbiIgaW1hZ2UtcmVuZGVyaW5nPSJvcHRpbWl6ZVF1YWxpdHkiIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiB2aWV3Qm94PSIwIDAgNTAgNTAiPjxkZWZzPjxsaW5lYXJHcmFkaWVudCBpZD0iMCIgeDE9IjIxLjE5IiB5MT0iMzcuNTUyIiB4Mj0iNzcuNzQiIHkyPSIzNy40MjkiIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIj48c3RvcCBzdG9wLWNvbG9yPSIjZmZmIi8+PHN0b3Agb2Zmc2V0PSIxIiBzdG9wLWNvbG9yPSIjZmZmIiBzdG9wLW9wYWNpdHk9IjAiLz48L2xpbmVhckdyYWRpZW50PjwvZGVmcz48cGF0aCBmaWxsPSIjMWYxYTE3IiBkPSJtMjguNDA4IDkuMjJoNC4yMTZ2LTMuMzk1aDYuNzk2djkuMjk1bC01LjUgNC4yNDN2MTEuODU3bDQuMjIgNC4yMjF2NS4wOGgzLjc4OXY1LjkyOWgtMzMuODU5di01LjkyOWgzLjc5NHYtNS4wOGw0LjI0Ni00LjIyMXYtMTEuODU3bC01LjUwOC00LjI0M3YtOS4yOTVoNi43NzR2My4zOTVoNC4yNDJ2LTMuMzk1aDYuNzl6Ii8+PHBhdGggZmlsbD0idXJsKCMwKSIgZD0ibTI1LjAxIDM1LjA0aC0xMC4yN2wtMS4xNDMgMS4wNjd2MS40MzloMjIuODI2di0xLjQzOWwtMS4xNDMtMS4wNjdoLTEwLjI3bS0xMS40MTMgNS4wOHYyLjUzMmgyMi44MjZ2LTIuNTMyaC0yMi44MjZtMTEuNDEzLTI3LjA4aC0xMi43djEuMTQzbDEuODEyIDEuMzYzaDIxLjgwMmwxLjc2MS0xLjM2M3YtMS4xNDNoLTEyLjY3NW0wIDQuMTkxaC04LjY3OGwxLjQ4MiAxLjE2OHYxLjQxNGgxNC4zOTN2LTEuNDE0bDEuNDgyLTEuMTY4aC04LjY3OG0wIDEzLjU0N2gtNy4xOTd2MS4xNDNsLTEuNDgyIDEuNDM5aDE3LjM1N2wtMS40ODItMS40Mzl2LTEuMTQzaC03LjE5NyIvPjwvc3ZnPg==');\n}\n.piece.queen.black {\n  background-image: url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNzcuMTciIGhlaWdodD0iMTc3LjE3IiBzaGFwZS1yZW5kZXJpbmc9Imdlb21ldHJpY1ByZWNpc2lvbiIgaW1hZ2UtcmVuZGVyaW5nPSJvcHRpbWl6ZVF1YWxpdHkiIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiB2aWV3Qm94PSIwIDAgNTAgNTAiPjxkZWZzPjxsaW5lYXJHcmFkaWVudCBpZD0iMCIgeDE9IjIxLjI1MyIgeTE9IjM3LjIyIiB4Mj0iNzcuNzYiIHkyPSIzNy4zNiIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiPjxzdG9wIHN0b3AtY29sb3I9IiNmZmYiLz48c3RvcCBvZmZzZXQ9IjEiIHN0b3AtY29sb3I9IiNmZmYiIHN0b3Atb3BhY2l0eT0iMCIvPjwvbGluZWFyR3JhZGllbnQ+PC9kZWZzPjxnIGZpbGw9IiMxZjFhMTciPjxwYXRoIGQ9Im0yNC45NDkgMTAuNzUyYy0uOTQgMC0xLjc0NC0uMzMtMi4zOTYtLjk5MS0uNjUyLS42Ni0uOTc0LTEuNDY1LS45NzQtMi40MDUgMC0uOTMxLjMyMi0xLjcyNy45NzQtMi4zODguNjUyLS42NiAxLjQ1Ni0uOTkxIDIuMzk2LS45OTEuOTIzIDAgMS43MjcuMzMgMi4zOTYuOTkxLjY2OS42Ni45OTkgMS40NTYuOTk5IDIuMzg4IDAgLjk0LS4zMyAxLjc0NC0uOTk5IDIuNDA1LS42NjkuNjYtMS40NzMuOTkxLTIuMzk2Ljk5MSIvPjxwYXRoIGQ9Im00MC4yMyA0My45NDJjLS44MTMuNzExLTIuNjMzIDEuMzA0LTUuNDYxIDEuNzg2LTIuODI4LjQ3NC02LjA4Ny43Mi05Ljc3LjcyLTMuNzUxIDAtNy4wNS0uMjU0LTkuODk4LS43NDUtMi44NDUtLjQ5OS00LjY0LTEuMTE4LTUuMzg1LTEuODYzbDEuNTY2LTUuOTUyLS42OTQtMy44OTUtMi4xODQtMy43OTMtMi4xMDgtMTUuNDI2IDEuMjExLS40NzQgNi43OTkgMTEuNDU1LjE1Mi0xMy42NCAxLjY4NS0uMjk2IDUuMTgyIDEzLjcxNiAyLjc3Ny0xNC43NTdoMS43MTlsMi43NzcgMTQuNzA3IDUuMTMxLTEzLjY2NSAxLjcxLjI5Ni4xNTIgMTMuNjQgNi44MjQtMTEuNDgxIDEuMTYuNTQyLTIuMDU3IDE1LjM1OS0yLjIxIDMuNzkzLS42OTQgMy45NDYgMS42MTcgNi4wMyIvPjxwYXRoIGQ9Im0xNC41MzUgMTEuOTg5Yy0uOTQ4IDAtMS43NTMtLjMyMi0yLjQxMy0uOTc0LS42Ni0uNjUyLS45OTEtMS40NTYtLjk5MS0yLjM5NiAwLS45MjMuMzMtMS43MTkuOTkxLTIuMzc5LjY2LS42NiAxLjQ2NS0uOTkxIDIuNDEzLS45OTEuOTIzIDAgMS43MTkuMzMgMi4zNzkuOTkxLjY2LjY2Ljk5MSAxLjQ1Ni45OTEgMi4zNzkgMCAuOTQtLjMzIDEuNzQ0LS45OTEgMi4zOTYtLjY2LjY1Mi0xLjQ1Ni45NzQtMi4zNzkuOTc0Ii8+PHBhdGggZD0ibTM1LjM2IDExLjk4OWMtLjk0IDAtMS43MzYtLjMyMi0yLjM4OC0uOTc0LS42NTItLjY1Mi0uOTgyLTEuNDU2LS45ODItMi4zOTYgMC0uOTIzLjMzLTEuNzE5Ljk4Mi0yLjM3OS42NTItLjY2IDEuNDQ4LS45OTEgMi4zODgtLjk5MS45NDggMCAxLjc1My4zMyAyLjQxMy45OTEuNjYuNjYuOTkxIDEuNDU2Ljk5MSAyLjM3OSAwIC45NC0uMzMgMS43NDQtLjk5MSAyLjM5Ni0uNjYuNjUyLTEuNDY1Ljk3NC0yLjQxMy45NzQiLz48cGF0aCBkPSJtNS40IDE0LjcyM2MtLjk0IDAtMS43MzYtLjMzLTIuMzg4LS45ODItLjY1Mi0uNjUyLS45ODItMS40NDgtLjk4Mi0yLjM5NiAwLS45MjMuMzMtMS43MTkuOTgyLTIuMzg4LjY1Mi0uNjc3IDEuNDQ4LTEuMDEgMi4zODgtMS4wMS45NDggMCAxLjc0NC4zMyAyLjQxMyAxLjAxLjY2LjY2OS45OTEgMS40NjUuOTkxIDIuMzg4IDAgLjk0OC0uMzMgMS43NDQtLjk5MSAyLjM5Ni0uNjY5LjY1Mi0xLjQ2NS45ODItMi40MTMuOTgyIi8+PHBhdGggZD0ibTQ0LjU0MSAxNC43MjNjLS45NCAwLTEuNzQ0LS4zMy0yLjQwNS0uOTgyLS42Ni0uNjUyLS45OTEtMS40NDgtLjk5MS0yLjM5NiAwLS45MjMuMzMtMS43MTkuOTkxLTIuMzg4LjY2LS42NzcgMS40NjUtMS4wMSAyLjQwNS0xLjAxLjkzMSAwIDEuNzI3LjMzIDIuMzg4IDEuMDEuNjYuNjY5Ljk5MSAxLjQ2NS45OTEgMi4zODggMCAuOTQ4LS4zMyAxLjc0NC0uOTkxIDIuMzk2LS42Ni42NTItMS40NTYuOTgyLTIuMzg4Ljk4MiIvPjwvZz48cGF0aCBmaWxsPSJ1cmwoIzApIiBkPSJtMzcuMiAzNS43MjljLTMuMDQtLjgzOC03LjA5NS0xLjI2Mi0xMi4xNS0xLjI2Mi01LjA5NyAwLTkuMTk1LjQzMi0xMi4zMDIgMS4yODdsLjM3MyAyLjUwNmMzLjEyNC0uODEzIDcuMDk1LTEuMjE5IDExLjkzLTEuMjE5IDQuODA5IDAgOC43MjkuMzk4IDExLjc1MiAxLjE5NGwuMzk4LTIuNTA2bTEuNzM2LTQuNDM3Yy0xLjM3Mi0uNS0zLjMwMi0uOTA2LTUuNzkxLTEuMjI4LTIuNDg5LS4zMjItNS4yMzItLjQ4My04LjI0Ni0uNDgzLTIuOTQ2IDAtNS42MzkuMTUyLTguMDkuNDU3LTIuNDQ3LjMwNS00LjM3Ny43MDMtNS43ODMgMS4yMDJsMS4yNDUgMi4yNTJjMS4zODktLjQwNiAzLjE5Mi0uNzAzIDUuNDEtLjg4OSAyLjIxLS4xNzggNC42MzEtLjI3MSA3LjI2NC0uMjcxIDIuNjMzIDAgNS4wNjMuMDkzIDcuMjkuMjcxIDIuMjM1LjE4NiA0LjA0Ny40OTEgNS40MzYuOTE0bDEuMjYxLTIuMjI3bS0xLjA5MiAxMS44NTNsLS43MzctMi45MjljLTMuMjI2LS43MzctNy4yODEtMS4xMDktMTIuMTU4LTEuMTA5LTQuODI2IDAtOC44NjUuMzczLTEyLjExIDEuMTA5bC0uNzg3IDIuOTU1YzMuMTQxLS45NTcgNy40NDItMS40MzkgMTIuOTItMS40MzkgMi42MjUgMCA1LjA3Mi4xMzYgNy4zMTUuMzk4IDIuMjUyLjI2MiA0LjEwNi42MDEgNS41NTQgMS4wMTYiLz48L3N2Zz4=');\n}\n.piece.king.black {\n  background-image: url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNzcuMTciIGhlaWdodD0iMTc3LjE3IiBzaGFwZS1yZW5kZXJpbmc9Imdlb21ldHJpY1ByZWNpc2lvbiIgaW1hZ2UtcmVuZGVyaW5nPSJvcHRpbWl6ZVF1YWxpdHkiIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiB2aWV3Qm94PSIwIDAgNTAgNTAiPjxkZWZzPjxsaW5lYXJHcmFkaWVudCBpZD0iMCIgeDE9IjIxLjEzIiB5MT0iMzcuMjIiIHgyPSI3Ny43NiIgeTI9IjM3LjQ2OSIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiPjxzdG9wIHN0b3AtY29sb3I9IiNmZmYiLz48c3RvcCBvZmZzZXQ9IjEiIHN0b3AtY29sb3I9IiNmZmYiIHN0b3Atb3BhY2l0eT0iMCIvPjwvbGluZWFyR3JhZGllbnQ+PC9kZWZzPjxnIGZpbGw9IiMxZjFhMTciPjxwYXRoIGQ9Im0yNS44MjEgMTIuMDJoLTEuNzYxdi0zLjI1MWgtMi4wNjZjLS41NTkgMC0uODM4LS4yNzEtLjgzOC0uODIxdi0uMDI1YzAtLjU0Mi4yNzktLjgxMy44MzgtLjgxM2gyLjA2NnYtMi4xMDhjMC0uNTg0LjI5Ni0uODcyLjg4OS0uODcyLjU3NiAwIC44NzIuMjg4Ljg3Mi44NzJ2Mi4xMDhoMi4xMzRjLjU0MiAwIC44MTMuMjcxLjgxMy44MTN2LjAyNWMwIC41NS0uMjcxLjgyMS0uODEzLjgyMWwtMi4xMTcuMDI1LS4wMTcgMy4yMjYiLz48cGF0aCBkPSJtMTEuMDMgMzcuNzQ0bC0uODEzLTQuNjRjLS4wMTcgMC0uMDQyLS4wMzQtLjA3Ni0uMTAyLS4wODUtLjExOC0uMzIyLS4yNzEtLjcxMS0uNDU3LS4zODEtLjE5NS0uODM4LS41MTYtMS4zNDYtLjk4Mi0uNzI4LS42MS0xLjI5NS0xLjEwOS0xLjcwMi0xLjQ5LS40MDYtLjM3My0uNzcxLS43ODctMS4xMDEtMS4yMzYtMS4wMS0xLjM4OS0xLjU3NS0zLjA2NS0xLjY4NS01LjA0LS4xNjktMS44OTcuNjAxLTMuNzkzIDIuMzAzLTUuNjgxIDEuNzE5LTEuODggNC4wNDctMi43NjkgNi45NjgtMi42NSAxLjA5Mi4wNjggMi4zNzkuMzMgMy44NDQuNzk2LjQ4My4xOTUuOTc0LjM5IDEuNDgyLjU3Ni41LjE5NS45OTkuMzg5IDEuNDk5LjU4NC4yNjIuMTM1LjUuMjcxLjY5NC4zOTgtLjA4NS0uMzQ3LS4xMjctLjY5NC0uMTI3LTEuMDQxIDAtMS4yODcuNDU3LTIuMzg4IDEuMzgtMy4zMDIuOTE0LS45MDYgMi4wMjQtMS4zNzIgMy4zMTEtMS4zODkgMS4yODcgMCAyLjM4OC40NjYgMy4zMDIgMS4zOC45MDYuOTE0IDEuMzYzIDIuMDIgMS4zNjMgMy4yODUgMCAuMjYyLS4wMzQuNjEtLjEwMiAxLjA0MS4yMjktLjE0NC40NTctLjI3MS42NjktLjM3Mi43NjItLjMzIDEuNzYxLS43MiAzLjAxLTEuMTYgMS40MjItLjQ4MyAyLjcwMS0uNzU0IDMuODQ0LS44MjEgMi45MjEtLjEzNiA1LjI0MS43NTQgNi45NDMgMi42NSAxLjY2OCAxLjg4OCAyLjQ0NyAzLjc4NSAyLjMyOCA1LjY4MS0uMTI3IDEuOTczLS43MDMgMy42NDktMS43MSA1LjA0LS4zMy40NDktLjcwMy44NjQtMS4xMTggMS4yNTMtLjQwNi4zOS0uOTY1Ljg4MS0xLjY2IDEuNDczLS41NDIuNDY2LTEuMDEuNzk2LTEuMzg5Ljk4Mi0uMzgxLjE4Ni0uNjAxLjM0Ny0uNjY5LjQ1Ny0uMDE3LjAzNC0uMDM0LjA1OS0uMDUxLjA3Ni0uMDE3LjAxNy0uMDI1LjAzNC0uMDI1LjA1MWwtLjc5NiA0LjY2NSAxLjY0MyA2LjEyMWMtLjgzLjc0NS0yLjY4NCAxLjM1NS01LjU1NCAxLjgzNy0yLjg3OS40ODMtNi4yMDYuNzItOS45NzQuNzItMy44MzUgMC03LjIxNC0uMjU0LTEwLjExOC0uNzU0LTIuOTEyLS41MDgtNC43NDEtMS4xNDMtNS40ODYtMS44OTdsMS42MzQtNi4wNSIvPjwvZz48cGF0aCBmaWxsPSJ1cmwoIzApIiBkPSJtMjQuOTQ5IDIwLjY3NWMtLjAzNC0uMTYxLS4wNzYtLjMwNS0uMTI3LS40MjMtLjA5My0uMzMtLjE3OC0uNTY3LS4yNDUtLjcyLS4wNTEtLjExLS4xMTktLjI1NC0uMTk1LS40MzItLjA4NS0uMTY5LS4xNjktLjM1Ni0uMjU0LS41NTktLjA1MS0uMTE5LS4xMS0uMjcxLS4xODYtLjQ1Ny0uMDY4LS4xOTUtLjEzNi0uMzczLS4xODYtLjUzMy0uMDQyLS4xNTItLjA2OC0uMzA1LS4wNjgtLjQ3NCAwLS44NzIuNDE1LTEuMzEyIDEuMjYyLTEuMzEyLjg4MSAwIDEuMzEyLjQzMiAxLjMxMiAxLjI4NyAwIC4yMi0uMDM0LjM3My0uMDkzLjQ3NC0uMjM3LjYyNy0uMzU2Ljk2NS0uMzcyIDEuMDE2LS4yNTQuNS0uNDA2LjgyMS0uNDc0Ljk2NS0uMTE5LjI3MS0uMTk1LjUwOC0uMjIuNzItLjA1MS4xMDItLjA4NS4xODYtLjEwMi4yNjItLjAxNy4wNzYtLjAzNC4xMzYtLjA1MS4xODZtLTIuNzc3IDguNTZjLTIuMDY2LjAzNC0zLjk1NC4xMzUtNS42NzMuMzIyLTEuNzEuMTc4LTMuMDMuNDQtMy45NzkuNzctLjQ5MS0uNjE4LTEuMDY3LTEuMjI4LTEuNzE5LTEuODU0LS42Ni0uNjE4LTEuMjI4LTEuMjAyLTEuNzI3LTEuNzQ0LS44My0uODQ3LTEuMjM2LTEuNzctMS4yMzYtMi43NzcgMC0xLjI0NS4yMDMtMi4xNTEuNjE4LTIuNzI2LjQ0LS42NjkgMS4xMzUtMS4xNiAyLjA1Ny0xLjQ4Mi45MjMtLjMyMiAxLjg2My0uNDgzIDIuODAzLS40ODMgMS4xOTQgMCAyLjMyOC4yNjIgMy40Mi43OTYgMS4wNzUuNTU5IDEuNzg3IDEuMDEgMi4xMzQgMS4zMzggMS4xMjYgMS4xNDMgMi4wMSAyLjM3OSAyLjYzMyAzLjcxNy4yMTIuNS4zNzIgMS4xOTQuNDgzIDIuMDc0LjExLjg4OS4xNjkgMS41NjYuMTg2IDIuMDQ5bTIuNzc3LTQuMzE4Yy4xMTktLjQ2Ni4yMTItLjc4Ny4yOTYtLjk2NS4xNjktLjY0My4zNTYtMS4xOTQuNTc2LTEuNjQzLjA5My0uMjc5LjIzNy0uNjAxLjQzMi0uOTc0LjE4Ni0uMzczLjM4OS0uODA0LjYxLTEuMjc5LjEyNy0uMjc5LjI3MS0uNjI3LjQxNS0xLjAzMy4xNTItLjQwNi4zMDUtLjgwNC40NDktMS4yMDIuMTM1LS4zMy4yMDMtLjY4Ni4yMDMtMS4wNjcgMC0uODEzLS4yOTYtMS40OTktLjg3Mi0yLjA2Ni0uNTc2LS41NzYtMS4yNzktLjg2NC0yLjEwOC0uODY0LTEuOTY0IDAtMi45NTUuOTkxLTIuOTU1IDIuOTU1IDAgLjM4MS4wNjguNzM3LjIwMyAxLjA2Ny4zNjQgMS4wNzUuNjQzIDEuODIuODM4IDIuMjM1LjIyLjQ3NC40MTUuOTA2LjYwMSAxLjI3OS4xNzguMzcyLjMzOS42OTQuNDY2Ljk3NC4yMi41NS4zOTggMS4wOTIuNTUgMS42NDMuMDM0LjA5My4xMjcuNDE1LjI5Ni45NG0tLjg4OSA2LjIyM2MwLS42Ni0uMDE3LTEuNTc1LS4wNTEtMi43MzUtLjAzNC0xLjE2OC0uMTYxLTIuMTQyLS4zNzItMi45MjEtLjY3Ny0yLjIxLTEuNzAyLTMuOTk2LTMuMDgyLTUuMzUxLS43MTEtLjY5NC0xLjc5NS0xLjM0Ni0zLjI2OC0xLjkzOS0xLjY4NS0uNjYtMy4yODUtLjk5MS00Ljc5Mi0uOTkxLTIuNjA4IDAtNC41NDcuOTMxLTUuOCAyLjgwMy0uNzExLjk5MS0xLjA2NyAyLjIzNS0xLjA2NyAzLjcxNyAwIDEuNjI2LjM5OCAyLjk1NSAxLjE4NSAzLjk5Ni40MTUuNTkzIDEuMjExIDEuMzI5IDIuMzg4IDIuMjEgMS4xNjguODcyIDIuMTY4IDEuNjg1IDIuOTcyIDIuNDMgMS40MzktLjMxMyAzLjA2NS0uNTg0IDQuODc3LS44MjEgMS44MTItLjIyOSA0LjE0OS0uMzY0IDcuMDEtLjM5OG0xMy43ODQgMTEuNzM1bC0uNzM3LTIuOTI5Yy0zLjIyNi0uNzM3LTcuMjgxLTEuMTA5LTEyLjE1OC0xLjEwOS00LjgyNiAwLTguODY1LjM3My0xMi4xMSAxLjEwOWwtLjc4NyAyLjk1NWMzLjE0MS0uOTU3IDcuNDQyLTEuNDM5IDEyLjkyLTEuNDM5IDIuNjI1IDAgNS4wNzIuMTM2IDcuMzE1LjM5OCAyLjI1Mi4yNjIgNC4xMDYuNjAxIDUuNTU0IDEuMDE2bS0uNjQzLTcuNDE3Yy0zLjA0LS44MzgtNy4wOTUtMS4yNjItMTIuMTUtMS4yNjItNS4wOTcgMC05LjE5NS40MzItMTIuMzAyIDEuMjg3bC4zNzMgMi41MDZjMy4xMjQtLjgxMyA3LjA5NS0xLjIxOSAxMS45My0xLjIxOSA0LjgwOSAwIDguNzI5LjM5OCAxMS43NTIgMS4xOTRsLjM5OC0yLjUwNm0tMTEuMzYyLTQuMjkzYzIuODQ1LjA1MSA1LjE4Mi4xOTUgNyAuNDIzIDEuODEyLjIyOSAzLjQ1NC41MDggNC45MTEuODIxLjkwNi0uODk4IDEuOTEzLTEuNzQ0IDMuMDItMi41NTcgMS4xMDktLjgxMyAxLjg4OC0xLjUwNyAyLjMzNy0yLjA4My43ODctMS4wNzUgMS4xODUtMi40MTMgMS4xODUtNC4wMiAwLTEuNDY1LS4zNTYtMi43MDEtMS4wNjctMy42OTItMS4yNy0xLjg3MS0zLjIxNy0yLjgwMy01LjgyNS0yLjgwMy0xLjUyNCAwLTMuMTA3LjMzLTQuNzY3Ljk5MS0xLjUwNy41OTMtMi41OTEgMS4yMzYtMy4yNzcgMS45My0xLjQwNSAxLjM2My0yLjQzIDMuMTUtMy4wNzMgNS4zNTktLjI0NS43NjItLjM4MSAxLjcyNy0uNDA2IDIuOTA0LS4wMjUgMS4xNzctLjA0MiAyLjA4My0uMDQyIDIuNzI2bTEuODEyLTEuOTNjMC0uNDgzLjA1OS0xLjE2LjE2MS0yLjA0OS4xMS0uODgxLjI3OS0xLjU3NS41MDgtMi4wNzQuNjE4LTEuMzM4IDEuNDktMi41NzQgMi42MzMtMy43MTcuMzMtLjMzIDEuMDQxLS43NzkgMi4xMzQtMS4zMzggMS4wNzUtLjUzMyAyLjIyNy0uNzk2IDMuNDQ2LS43OTYuOTMxIDAgMS44NDYuMTYxIDIuNzY5LjQ4My45MTQuMzIyIDEuNjA5LjgxMyAyLjA2NiAxLjQ4Mi40MTUuNTU5LjYyNyAxLjQ2NS42MjcgMi43MjYgMCAuOTkxLS40MDYgMS45MTMtMS4yMTkgMi43NzctLjUyNS41NDItMS4xMDEgMS4wOTItMS43MSAxLjY1MS0uNjEuNTUtMS4yMDIgMS4yMDItMS43NjEgMS45NDctLjk1Ny0uMzMtMi4yOTQtLjU5My00LS43Ny0xLjcxLS4xODYtMy41OS0uMjg4LTUuNjQ3LS4zMjIiLz48L3N2Zz4=');\n}\n\n:root {\n  --board-width: 340px;  \n}\n.moveinputdiv {\n  width: var(--board-width);\n  display: flex;\n  align-items: center;\n  justify-content: space-around;\n  padding: 3px;\n}\n.fendiv {\n  padding: 3px;\n  margin-top: 8px;  \n  width: var(--board-width);\n  text-align: center;\n}\n.fentextinput {\n  width: 90%;\n  font-size: 10px;\n}\n.vertcont {\n  display: flex;\n  align-items: center;\n  flex-direction: column;\n}\n.horizcont {\n  display: flex;\n  align-items: center;\n  flex-direction: row;\n}\n.legalsans {\n  height: 400px;\n  width: 110px;\n  overflow-y: scroll;\n  padding: 1px;    \n}\n.legalsan {\n  cursor: pointer;\n  text-decoration: underline;\n  text-align: center;  \n  padding: 1px;\n  margin: 1px;\n  min-width: 30px;\n}\n.historysans {\n  height: 400px;\n  width: 110px;\n  overflow-y: scroll;  \n  margin-left: 5px;\n  padding: 3px;  \n}\n.historysanoutercont {  \n  display: flex;\n  justify-content: space-around;\n  margin: 3px;\n}\n.historysancont {  \n  display: flex;\n  align-items: center;    \n}\n.historysan {  \n  cursor: pointer;\n  text-decoration: underline;  \n  text-align: center;\n  min-width: 30px;\n}\n.movetextinput {\n  width: 90px;\n  margin-top: -2px;\n}\n.prompiecebuttons {\n  display: inline-block;\n}\n.prompiecebutton {\n  margin-left: 2px;\n  margin-right: 2px;\n}\n.histactive {\n  border: solid 2px #000;\n  padding: 2px;\n}\n.histpassive {\n  opacity: 0.7;\n  padding: 2px;\n  border: solid 2px #fff;\n}\n.prompiecediv {\n  display: inline-block;\n  margin-left: 2px;\n  margin-right: 2px;\n  min-width: 20px;\n  min-height: 20px;\n  max-width: 20px;\n  max-height: 20px;\n  padding: 3px;\n  border: solid 1px #777;\n  border-radius: 5px;\n  text-align: center;\n  cursor: pointer; \n  background-color: #ffa;   \n  background-size: cover;\n}\n.vuechessground {\n  padding: 5px;\n  border: solid 1px #777;\n  width: 910px;\n  position: relative;\n  z-index: 10;\n}\n.bookdiv {\n  margin-left: 10px;\n  background-color: #fff;  \n  height: 395px;\n  width: 310px;\n  overflow-y: scroll;\n}\n.bookdiv.running {\n  background-color: #afa;\n}\n.bookmovesan {\n  text-decoration: underline;\n  color: #007;\n  font-size: 20px;\n  cursor: pointer;\n  width: 60px;\n}\n.white {\n  color: #070;\n  font-family: monospace;\n  font-weight: bold;\n  width: 70px;  \n}\n.draw {\n  color: #770;\n  font-family: monospace;\n  font-weight: bold;\n  width: 70px;  \n}\n.black {\n  color: #700;\n  font-family: monospace;\n  font-weight: bold;\n  width: 70px;  \n}\n.greenbutton {\n  background-color: #afa;\n}\n.bluebutton {\n  background-color: #aaf;\n}\n.yellowbutton {\n  background-color: #ffa;\n}\n.redbutton {\n  background-color: #faa;\n}\n#disablediv {\n  position: absolute;\n  width: 0px;\n  height: 0px;\n  background-color: #ddd;\n  opacity: 0.2;  \n  z-index: 100;\n}\n#settingsdiv {\n  position: absolute;  \n  background-color: #f7f7f7;\n  z-index: 100;\n  padding: 15px;\n  margin-left: 4px;\n  height: 351px;\n  border: solid 1px;\n}\n.trainvertcont {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n}\n.traincontrolsdiv {  \n  display: flex;\n  margin-bottom: 5px;\n  border: solid 1px #777;\n  padding: 6px;  \n  align-items: center;\n  height: 65px;\n  min-width: 300px;  \n  justify-content: space-around;  \n}\n.traininfo {\n  display: inline-block;\n  margin-right: 15px;\n  margin-top: -5px;  \n  background-color: #ffa;  \n  font-weight: bold;\n  padding: 5px;\n  padding-left: 10px;\n  padding-right: 10px;\n  box-shadow: 3px 3px #777;\n}\n.trainerror {\n  color: #f00;\n  font-size: 25px;\n}\n.trainok {\n  color: #070;\n}\n.trainrank {\n  font-size: 25px;\n  color: #070;\n  font-weight: bold;\n}\n.trainexps {\n  font-size: 20px;\n  color: #007;\n  font-weight: bold;\n}\n.trainrankdiv {\n  margin-bottom: 5px;\n}\n.trainbutton {\n  font-size: 20px;\n  background-color: #dfd;\n}\n.stoptrainbutton {\n  font-size: 15px;\n  background-color: #fdd;\n}\n.makeyourmove {\n  color: #070;\n  font-size: 22px;\n}\n.settingupopeningpos {\n  color: #777;\n}\n.histsan {\n  animation: blinker 1s linear infinite;\n}\n.sancont {\n  display: flex;\n  align-items: center;  \n}\n.sanbutton {\n  width: 12px;\n  height: 12px;  \n  margin: 1px;\n  margin-left: 1px;  \n  text-align: center;\n  cursor: pointer;\n  opacity: 0.3;\n  padding: 1px;\n}\n.sanbutton.red {\n  background-color: #faa;\n}\n.sanbutton.green {\n  background-color: #afa;\n}\n.unrated {\n  background-color: #fff;\n}\n.forcedloss {\n  background-color: #f00;\n  color: #fff;\n  font-weight: bold;\n}\n.losing {\n  background-color: #d00;  \n  color: #fff;\n  font-weight: bold;\n}\n.troll {\n  background-color: #b00;\n  color: #fff;\n  font-weight: bold;\n}\n.dubious {\n  background-color: #003;  \n  color: #fff;\n  font-weight: bold;\n}\n.experimental {\n  background-color: #00a;\n  color: #fff;\n  font-weight: bold;\n}\n.stable {\n  background-color: #00f;\n  color: #fff;\n  font-weight: bold;\n}\n.promising {\n  background-color: #090;\n  font-weight: bold;\n}\n.good {\n  background-color: #0b0;\n  font-weight: bold;\n}\n.winning {\n  background-color: #0d0;\n  font-weight: bold;\n}\n.forcedwin {\n  background-color: #0f0;\n  font-weight: bold;\n}\n#settingsblob {\n  width: 860px;\n  height: 100px;\n  padding: 5px;\n}\n.svgbutton {\n  display: inline-block;\n  width: 18px;\n  height: 18px;\n  margin: 1px;\n  cursor: pointer;\n}\n.spinner {\n  background-image: url(data:image/svg+xml,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22utf-8%22%3F%3E%0A%3C!--%20Generated%20by%20IcoMoon.io%20--%3E%0A%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%0A%3Csvg%20version%3D%221.1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20width%3D%2216%22%20height%3D%2216%22%20viewBox%3D%220%200%2016%2016%22%3E%0A%3Cpath%20fill%3D%22%23000000%22%20d%3D%22M8%200c-4.355%200-7.898%203.481-7.998%207.812%200.092-3.779%202.966-6.812%206.498-6.812%203.59%200%206.5%203.134%206.5%207%200%200.828%200.672%201.5%201.5%201.5s1.5-0.672%201.5-1.5c0-4.418-3.582-8-8-8zM8%2016c4.355%200%207.898-3.481%207.998-7.812-0.092%203.779-2.966%206.812-6.498%206.812-3.59%200-6.5-3.134-6.5-7%200-0.828-0.672-1.5-1.5-1.5s-1.5%200.672-1.5%201.5c0%204.418%203.582%208%208%208z%22%3E%3C%2Fpath%3E%0A%3C%2Fsvg%3E%0A);\n  background-size: cover;\n}\n.tobegin {\n  background-image: url(data:image/svg+xml,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22utf-8%22%3F%3E%0A%3C!--%20Generated%20by%20IcoMoon.io%20--%3E%0A%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%0A%3Csvg%20version%3D%221.1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20width%3D%2216%22%20height%3D%2216%22%20viewBox%3D%220%200%2016%2016%22%3E%0A%3Cpath%20fill%3D%22%23000000%22%20d%3D%22M4%2014v-12h2v5.5l5-5v11l-5-5v5.5z%22%3E%3C%2Fpath%3E%0A%3C%2Fsvg%3E%0A);\n  background-size: cover;\n}\n.arrowleft {\n  background-image: url(data:image/svg+xml,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22utf-8%22%3F%3E%0A%3C!--%20Generated%20by%20IcoMoon.io%20--%3E%0A%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%0A%3Csvg%20version%3D%221.1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20width%3D%2216%22%20height%3D%2216%22%20viewBox%3D%220%200%2016%2016%22%3E%0A%3Cpath%20fill%3D%22%23000000%22%20d%3D%22M0.5%208l7.5%207.5v-4.5h8v-6h-8v-4.5z%22%3E%3C%2Fpath%3E%0A%3C%2Fsvg%3E%0A);\n  background-size: cover;\n}\n.arrowright {\n  background-image: url(data:image/svg+xml,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22utf-8%22%3F%3E%0A%3C!--%20Generated%20by%20IcoMoon.io%20--%3E%0A%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%0A%3Csvg%20version%3D%221.1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20width%3D%2216%22%20height%3D%2216%22%20viewBox%3D%220%200%2016%2016%22%3E%0A%3Cpath%20fill%3D%22%23000000%22%20d%3D%22M15.5%208l-7.5-7.5v4.5h-8v6h8v4.5z%22%3E%3C%2Fpath%3E%0A%3C%2Fsvg%3E%0A);\n  background-size: cover;\n}\n.toend {\n  background-image: url(data:image/svg+xml,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22utf-8%22%3F%3E%0A%3C!--%20Generated%20by%20IcoMoon.io%20--%3E%0A%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%0A%3Csvg%20version%3D%221.1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20width%3D%2216%22%20height%3D%2216%22%20viewBox%3D%220%200%2016%2016%22%3E%0A%3Cpath%20fill%3D%22%23000000%22%20d%3D%22M12%202v12h-2v-5.5l-5%205v-11l5%205v-5.5z%22%3E%3C%2Fpath%3E%0A%3C%2Fsvg%3E%0A);\n  background-size: cover;\n}\n.cross {\n  background-image: url(data:image/svg+xml,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22utf-8%22%3F%3E%0A%3C!--%20Generated%20by%20IcoMoon.io%20--%3E%0A%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%0A%3Csvg%20version%3D%221.1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20width%3D%2216%22%20height%3D%2216%22%20viewBox%3D%220%200%2016%2016%22%3E%0A%3Cpath%20fill%3D%22%23000000%22%20d%3D%22M15.854%2012.854c-0-0-0-0-0-0l-4.854-4.854%204.854-4.854c0-0%200-0%200-0%200.052-0.052%200.090-0.113%200.114-0.178%200.066-0.178%200.028-0.386-0.114-0.529l-2.293-2.293c-0.143-0.143-0.351-0.181-0.529-0.114-0.065%200.024-0.126%200.062-0.178%200.114%200%200-0%200-0%200l-4.854%204.854-4.854-4.854c-0-0-0-0-0-0-0.052-0.052-0.113-0.090-0.178-0.114-0.178-0.066-0.386-0.029-0.529%200.114l-2.293%202.293c-0.143%200.143-0.181%200.351-0.114%200.529%200.024%200.065%200.062%200.126%200.114%200.178%200%200%200%200%200%200l4.854%204.854-4.854%204.854c-0%200-0%200-0%200-0.052%200.052-0.090%200.113-0.114%200.178-0.066%200.178-0.029%200.386%200.114%200.529l2.293%202.293c0.143%200.143%200.351%200.181%200.529%200.114%200.065-0.024%200.126-0.062%200.178-0.114%200-0%200-0%200-0l4.854-4.854%204.854%204.854c0%200%200%200%200%200%200.052%200.052%200.113%200.090%200.178%200.114%200.178%200.066%200.386%200.029%200.529-0.114l2.293-2.293c0.143-0.143%200.181-0.351%200.114-0.529-0.024-0.065-0.062-0.126-0.114-0.178z%22%3E%3C%2Fpath%3E%0A%3C%2Fsvg%3E%0A);\n  background-size: cover;\n}\n.star {\n  background-image: url(data:image/svg+xml,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22utf-8%22%3F%3E%0A%3C!--%20Generated%20by%20IcoMoon.io%20--%3E%0A%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%0A%3Csvg%20version%3D%221.1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20width%3D%2216%22%20height%3D%2216%22%20viewBox%3D%220%200%2016%2016%22%3E%0A%3Cpath%20fill%3D%22%23000000%22%20d%3D%22M14.5%206.5c-0.444%200-0.843%200.193-1.118%200.5h-2.968l2.099-2.099c0.411%200.023%200.83-0.123%201.144-0.437%200.586-0.586%200.586-1.536%200-2.121s-1.536-0.586-2.121%200c-0.314%200.314-0.46%200.733-0.437%201.144l-2.099%202.099v-2.968c0.307-0.275%200.5-0.674%200.5-1.118%200-0.828-0.672-1.5-1.5-1.5s-1.5%200.672-1.5%201.5c0%200.444%200.193%200.843%200.5%201.118v2.968l-2.099-2.099c0.023-0.411-0.123-0.83-0.437-1.144-0.586-0.586-1.536-0.586-2.121%200s-0.586%201.536%200%202.121c0.314%200.314%200.733%200.46%201.144%200.437l2.099%202.099h-2.968c-0.275-0.307-0.674-0.5-1.118-0.5-0.828%200-1.5%200.672-1.5%201.5s0.672%201.5%201.5%201.5c0.444%200%200.843-0.193%201.118-0.5h2.968l-2.099%202.099c-0.411-0.023-0.83%200.123-1.144%200.437-0.586%200.586-0.586%201.536%200%202.121s1.536%200.586%202.121%200c0.314-0.314%200.46-0.733%200.437-1.144l2.099-2.099v2.968c-0.307%200.275-0.5%200.674-0.5%201.118%200%200.828%200.672%201.5%201.5%201.5s1.5-0.672%201.5-1.5c0-0.444-0.193-0.843-0.5-1.118v-2.968l2.099%202.099c-0.023%200.411%200.123%200.83%200.437%201.144%200.586%200.586%201.536%200.586%202.121%200s0.586-1.536%200-2.121c-0.314-0.314-0.733-0.46-1.144-0.437l-2.099-2.099h2.968c0.275%200.307%200.674%200.5%201.118%200.5%200.828%200%201.5-0.672%201.5-1.5s-0.672-1.5-1.5-1.5z%22%3E%3C%2Fpath%3E%0A%3C%2Fsvg%3E%0A);\n  background-size: cover;\n}\n.questionmark {\n  background-image: url(data:image/svg+xml,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22utf-8%22%3F%3E%0A%3C!--%20Generated%20by%20IcoMoon.io%20--%3E%0A%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%0A%3Csvg%20version%3D%221.1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20width%3D%2216%22%20height%3D%2216%22%20viewBox%3D%220%200%2016%2016%22%3E%0A%3Cpath%20fill%3D%22%23000000%22%20d%3D%22M7%2011h2v2h-2zM11%204c0.552%200%201%200.448%201%201v3l-3%202h-2v-1l3-2v-1h-5v-2h6zM8%201.5c-1.736%200-3.369%200.676-4.596%201.904s-1.904%202.86-1.904%204.596c0%201.736%200.676%203.369%201.904%204.596s2.86%201.904%204.596%201.904c1.736%200%203.369-0.676%204.596-1.904s1.904-2.86%201.904-4.596c0-1.736-0.676-3.369-1.904-4.596s-2.86-1.904-4.596-1.904zM8%200v0c4.418%200%208%203.582%208%208s-3.582%208-8%208c-4.418%200-8-3.582-8-8s3.582-8%208-8z%22%3E%3C%2Fpath%3E%0A%3C%2Fsvg%3E%0A);\n  background-size: cover;\n}\n.openfolder {\n  background-image: url(data:image/svg+xml,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22utf-8%22%3F%3E%0A%3C!--%20Generated%20by%20IcoMoon.io%20--%3E%0A%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%0A%3Csvg%20version%3D%221.1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20width%3D%2216%22%20height%3D%2216%22%20viewBox%3D%220%200%2016%2016%22%3E%0A%3Cpath%20fill%3D%22%23000000%22%20d%3D%22M13%2015l3-8h-13l-3%208zM2%206l-2%209v-13h4.5l2%202h6.5v2z%22%3E%3C%2Fpath%3E%0A%3C%2Fsvg%3E%0A);\n  background-size: cover;\n}\n.controls {  \n  width: var(--board-width);\n  display: flex;\n  align-items: center;\n  justify-content: space-around;\n  margin-top: 3px;\n}\n.tool {\n    background-image: url(data:image/svg+xml,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22utf-8%22%3F%3E%0A%3C!--%20Generated%20by%20IcoMoon.io%20--%3E%0A%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%0A%3Csvg%20version%3D%221.1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20width%3D%2216%22%20height%3D%2216%22%20viewBox%3D%220%200%2016%2016%22%3E%0A%3Cpath%20fill%3D%22%23000000%22%20d%3D%22M15.671%2012.779l-7.196-6.168c0.335-0.63%200.525-1.348%200.525-2.111%200-2.485-2.015-4.5-4.5-4.5-0.455%200-0.893%200.068-1.307%200.193l2.6%202.6c0.389%200.389%200.389%201.025%200%201.414l-1.586%201.586c-0.389%200.389-1.025%200.389-1.414%200l-2.6-2.6c-0.125%200.414-0.193%200.852-0.193%201.307%200%202.485%202.015%204.5%204.5%204.5%200.763%200%201.482-0.19%202.111-0.525l6.168%207.196c0.358%200.418%200.969%200.441%201.358%200.052l1.586-1.586c0.389-0.389%200.365-1-0.052-1.358z%22%3E%3C%2Fpath%3E%0A%3C%2Fsvg%3E%0A);\n    background-size: cover;\n}\n.preferences{\n    background-image: url(data:image/svg+xml,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22utf-8%22%3F%3E%0A%3C!--%20Generated%20by%20IcoMoon.io%20--%3E%0A%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%0A%3Csvg%20version%3D%221.1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20width%3D%2216%22%20height%3D%2216%22%20viewBox%3D%220%200%2016%2016%22%3E%0A%3Cpath%20fill%3D%22%23000000%22%20d%3D%22M14.59%209.535c-0.839-1.454-0.335-3.317%201.127-4.164l-1.572-2.723c-0.449%200.263-0.972%200.414-1.529%200.414-1.68%200-3.042-1.371-3.042-3.062h-3.145c0.004%200.522-0.126%201.051-0.406%201.535-0.839%201.454-2.706%201.948-4.17%201.106l-1.572%202.723c0.453%200.257%200.845%200.634%201.123%201.117%200.838%201.452%200.336%203.311-1.12%204.16l1.572%202.723c0.448-0.261%200.967-0.41%201.522-0.41%201.675%200%203.033%201.362%203.042%203.046h3.145c-0.001-0.517%200.129-1.040%200.406-1.519%200.838-1.452%202.7-1.947%204.163-1.11l1.572-2.723c-0.45-0.257-0.839-0.633-1.116-1.113zM8%2011.24c-1.789%200-3.24-1.45-3.24-3.24s1.45-3.24%203.24-3.24c1.789%200%203.24%201.45%203.24%203.24s-1.45%203.24-3.24%203.24z%22%3E%3C%2Fpath%3E%0A%3C%2Fsvg%3E%0A);\n    background-size: cover;\n}\n.arrowup{\n    background-image: url(data:image/svg+xml,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22utf-8%22%3F%3E%0A%3C!--%20Generated%20by%20IcoMoon.io%20--%3E%0A%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%0A%3Csvg%20version%3D%221.1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20width%3D%2216%22%20height%3D%2216%22%20viewBox%3D%220%200%2016%2016%22%3E%0A%3Cpath%20fill%3D%22%23000000%22%20d%3D%22M13.707%206.293l-5-5c-0.39-0.391-1.024-0.391-1.414%200l-5%205c-0.391%200.391-0.391%201.024%200%201.414s1.024%200.391%201.414%200l3.293-3.293v9.586c0%200.552%200.448%201%201%201s1-0.448%201-1v-9.586l3.293%203.293c0.195%200.195%200.451%200.293%200.707%200.293s0.512-0.098%200.707-0.293c0.391-0.391%200.391-1.024%200-1.414z%22%3E%3C%2Fpath%3E%0A%3C%2Fsvg%3E%0A);\n    background-size: cover;\n}\n.arrowdown{\n    background-image: url(data:image/svg+xml,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22utf-8%22%3F%3E%0A%3C!--%20Generated%20by%20IcoMoon.io%20--%3E%0A%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%0A%3Csvg%20version%3D%221.1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20width%3D%2216%22%20height%3D%2216%22%20viewBox%3D%220%200%2016%2016%22%3E%0A%3Cpath%20fill%3D%22%23000000%22%20d%3D%22M13.707%209.707l-5%205c-0.39%200.391-1.024%200.391-1.414%200l-5-5c-0.391-0.391-0.391-1.024%200-1.414s1.024-0.391%201.414%200l3.293%203.293v-9.586c0-0.552%200.448-1%201-1s1%200.448%201%201v9.586l3.293-3.293c0.195-0.195%200.451-0.293%200.707-0.293s0.512%200.098%200.707%200.293c0.391%200.391%200.391%201.024%200%201.414z%22%3E%3C%2Fpath%3E%0A%3C%2Fsvg%3E%0A);\n    background-size: cover;\n}\n.exclam{\n    background-image: url(data:image/svg+xml,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22utf-8%22%3F%3E%0A%3C!--%20Generated%20by%20IcoMoon.io%20--%3E%0A%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%0A%3Csvg%20version%3D%221.1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20width%3D%2216%22%20height%3D%2216%22%20viewBox%3D%220%200%2016%2016%22%3E%0A%3Cpath%20fill%3D%22%23000000%22%20d%3D%22M8%201.5c-1.736%200-3.369%200.676-4.596%201.904s-1.904%202.86-1.904%204.596c0%201.736%200.676%203.369%201.904%204.596s2.86%201.904%204.596%201.904c1.736%200%203.369-0.676%204.596-1.904s1.904-2.86%201.904-4.596c0-1.736-0.676-3.369-1.904-4.596s-2.86-1.904-4.596-1.904zM8%200v0c4.418%200%208%203.582%208%208s-3.582%208-8%208c-4.418%200-8-3.582-8-8s3.582-8%208-8zM7%2011h2v2h-2zM7%203h2v6h-2z%22%3E%3C%2Fpath%3E%0A%3C%2Fsvg%3E%0A);\n    background-size: cover;\n}\n.checkmark{\n    background-image: url(data:image/svg+xml,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22utf-8%22%3F%3E%0A%3C!--%20Generated%20by%20IcoMoon.io%20--%3E%0A%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%0A%3Csvg%20version%3D%221.1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20width%3D%2216%22%20height%3D%2216%22%20viewBox%3D%220%200%2016%2016%22%3E%0A%3Cpath%20fill%3D%22%23000000%22%20d%3D%22M13.5%202l-7.5%207.5-3.5-3.5-2.5%202.5%206%206%2010-10z%22%3E%3C%2Fpath%3E%0A%3C%2Fsvg%3E%0A);\n    background-size: cover;\n}\n.localstoragecontrols {\n  display: flex;\n  align-items: center;\n  padding: 5px;\n}\n.localstoragecontrols button {\n  margin-right: 5px;\n}\n.label {\n  margin-right: 5px;\n  padding: 2px;\n  background-color: #ddd;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n.floatright {\n  float: right;\n}\n.ratingnum {\n  margin-left: 3px;\n  margin-right: 1px;\n  font-size: 14px;\n  color: #00a;\n}\n.unselectable {\n    -webkit-touch-callout: none;\n    -webkit-user-select: none;\n    -khtml-user-select: none;\n    -moz-user-select: none;\n    -ms-user-select: none;\n    -o-user-select: none;\n    user-select: none;\n}\n.blink_me {\n    animation: blinker 1s linear infinite;\n}  \n@keyframes blinker {\n    50% {\n        opacity: 0.5;        \n    }\n}\n.gamecont {\n  display: flex;\n  align-items: center;  \n}\n.lichessgames {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  margin-left: 10px;  \n  border: solid 1px;\n  max-height: 418px;\n  overflow-y: scroll;\n}\n.lichessgame {\n  padding: 3px;\n  padding-left: 5px;\n  margin: 1px;\n  margin-left: 4px;\n  margin-right: 4px;\n  border: solid 1px;\n  max-width: 300px;  \n  background-color: #eee;\n  color: #005;\n  font-weight: bold;\n  cursor: pointer;\n  border: solid 2px transparent;\n}\n.lichessgame.atomic {\n  background-color: #ffa;\n  color: #070;\n}\n.lost {\n  border: solid 2px #f00;\n}\n.clickedgame{\n  animation: blinker 1s linear infinite;  \n}\n.infotable {\n  margin-top: 20px;\n  font-size: 30px;\n}\n.infosan {\n  color: #070;\n  font-weight: bold;\n  width: 70px;\n  font-family: monospace;\n  cursor: pointer;\n}\n.infosan.next {\n  border: solid 2px #070;\n  background-color: #ffa;\n}\n.infoscore {\n  color: #007;  \n  width: 70px;\n}\n.infodepth {\n  color: #007;  \n  font-size: 18px;\n  color: #700;\n  width: 30px;\n}\n.infomultipv {\n  color: #007;  \n}\n.infoline {\n  font-size: 20px;\n  color: #0aa;\n  font-weight: bold;\n  padding: 2px;  \n  padding-left: 15px;\n}\n</style>","\n// Import vue component\nimport component from './index.vue';\n\n// install function executed by Vue.use()\nfunction install(Vue) {\n  if (install.installed) return;\n  install.installed = true;\n  Vue.component('Vuechessground', component);\n}\n\n// Create module definition for Vue.use()\nconst plugin = {\n  install,\n};\n\n// To auto-install when vue is found\nlet GlobalVue = null;\nif (typeof window !== 'undefined') {\n  GlobalVue = window.Vue;\n} else if (typeof global !== 'undefined') {\n  GlobalVue = global.Vue;\n}\nif (GlobalVue) {\n  GlobalVue.use(plugin);\n}\n\n// Inject install function into component - allows component\n// to be registered via Vue.use() as well as Vue.component()\ncomponent.install = install;\n\n// Export component by default\nexport default component;\n\n// It's possible to expose named exports when writing components that can\n// also be used as directives, etc. - eg. import { RollupDemoDirective } from 'rollup-demo';\n// export const RollupDemoDirective = component;"],"names":["StoreCache","this","clear","prototypeAccessors","empty","size","now","Date","getTime","setItem","key","value","cache","lastWrite","getItem","Object","keys","length","AuthStore","props","prodHost","writeDelay","maxWriteDelay","watchInterval","isRemoteKey","mockDelay","authstoreFuncProt","authstoreFuncPath","vm","authstoreFuncUrl","writeBuffer","setInterval","watch","bind","setInfo","prototypeAccessors$1","isDev","document","location","host","Promise","resolve","const","cached","stored","JSON","parse","localStorage","setTimeout","_","Math","random","fetch","method","body","stringify","ACTION","DOCUMENT_ID","LICHESS_TOKEN","then","response","json","result","console","log","content","shouldWrite","info","let","bulk","entries","map","entry","updateOne","filter","_id","update","$set","upsert","DOCUMENT","strippedfen","fen","split","slice","join","stripsan","san","replace","RegExp","PIECE_DIRECTION_STRINGS","pieceDirectionStringToSquareDelta","pieceDirectionString","squareDelta","SquareDelta","includes","y","x","SquareDelta_","equalto","sd","inverse","angle","pds","toPieceDirectionString","PI","indexOf","buff","normalized","sign","abs","STANDARD_START_FEN","QUEEN_DIRECTIONS","JAILER_DIRECTIONS","getPieceDirection","piece","kind","direction","PAWNDIRS_WHITE","baserank","promrank","pushtwo","pushone","captures","PAWNDIRS_BLACK","PAWNDIRS","color","VARIANT_KEYS","baseRank","NUM_SQUARES","getvariantstartfen","variant","find","Square_","file","rank","Square","adddelta","v","sq","clone","ALL_SQUARES","push","Piece_","Piece","isempty","toString","toUpperCase","tocolor","colorInverse","p","letter","Move_","fromsq","tosq","prompiece","epclsq","epsq","promsq","Move","LANCER_PROMOTION_PIECES","addCancel","lpp","qd","concat","effpromsq","roughlyequalto","move","strictlyEqualTo","ChessBoard_","rep","Array","fill","stack","setfromfen","ChessBoard","parseDrawing","comment","match","ok","drawing","thickness","opacity","squares","sqstr","parts","m","l","w","z","r","n","u","parseInt","name","PROMOTION_PIECES","basicPieces","IS_SCHESS","IS_EIGHTPIECE","maxy","reduce","prev","curr","forEach","status","legalmovesforallpieces","halfmoveclock","terminated","resultReason","iskingincheck","turn","IS_ATOMIC","IS_ANTICHESS","pieceStore","piecestorefen","toLowerCase","PieceL","squareStore","castlefen","rookorigsq","lower","charCodeAt","pieceStoreColor","adjacentsquares","adjDirs","i","j","ADJACENT_DIRECTIONS","dir","squareok","jailerAdjacentSquares","isSquareJailedBy","testsq","pieceatsquare","kingsadjacent","wkw","whereisking","wkb","algebtosquare","algeb","algebtomovesimple","substring","turnVerbal","reverseTurnVerbal","fenopt","variantopt","fenparts","rawfen","rankfens","turnfen","epfen","halfmovefen","fullmovefen","disablefen","rawfenparts","fullmovenumber","rankfen","rfa","from","rfai","c","repcnt","test","squaretoalgeb","String","fromCharCode","movetoalgeb","nochess960","castling","to","delrooksq","placeCastlingPiece","placeCastlingSquare","placePiece","fromp","top","prom","squaretorepindex","setpieaceatsquare","squaresForPieceKind","attacksonsquarebylancer","attacks","plms","pseudolegalmovesforpieceatsquare","plm","attack","attacksonsquarebysentry","attacksonsquarebypieceInner","attacksonsquarebypiece","issquareattackedbycolor","pieceLetters","pl","lancer","capt","searchking","iskingincheckAfterMove","ischeck","pop","wk","deletecastlingrights","deleterightsstr","deleterights","rights","deleteright","right","side","rookorigpiece","castletargetsq","rooktargetsq","squaresbetween","sq1orig","sq2orig","includelimits","sq1","sq2","temp","sqs","currentsq","cancastle","ro","betweensqs","ct","isKingJailed","getstate","pushstate","setstate","state","algebtomove","lms","testmove","pushalgeb","removePlacePieceFromStore","pstore","removeSquareFromStore","fileLetter","placeMove","putrooksq","putrookpiece","newLetter","rosq","capture","pawnmove","rawfenbuff","cumul","psb","reportRawFen","assertMaxPlmsGenDepth","depth","depthOpt","origPiece","acc","pseudolegalmovesforpieceatsquareinner","tsq","psp","psm","pseudolegalmovesforpieceatsquareinnerpartial","pushLancerMoves","ds","dirobj","sentryCaptureAllowed","pushTwoAllowed","moveJailedProhibited","tp","pushedPiece","testPiece","tplms","sentryPushSquares","usedSquares","tplm","usq","testMove","eas","lancerNudgeDirs","nudgeMove","nudge","sps","pdirobj","pushonesq","pushoneempty","pp","pushtwosq","setepsq","ocsqdelta","ocsq","captdir","captsq","captp","epmove","disabledMove","nok","ncurrentsq","np","nmove","keepDirection","normDir","testcurrentsq","pseudolegalmovesforallpieces","movecheckstatus","meincheck","oppincheck","createCastlingMove","passingSquares","mchst","moveK","moveR","ismovecapture","santomove","movetosan","check","fromalgeb","toalgeb","place","qualifier","lancerattacks","lancerattack","files","ranks","samefiles","sameranks","squarefromalgeb","movefromalgeb","Glicko_","fromBlob","propsOpt","rating","rd","serialize","Player_","Player","equalTo","player","id","provider","displayName","username","qualifiedDisplayName","showRating","qdn","glicko","Glicko","seated","seatedAt","index","thinkingTime","startedThinkingAt","offerDraw","setIndex","ChatMessage_","author","msg","createdAt","asText","Chat_","postMessage","chatMessage","messages","unshift","capacity","blob","ChatMessage","message","Players_","func","players","hasPlayer","hasSeatedPlayer","repo","shift","getByIndex","setPlayer","getByColor","Timecontrol_","Timecontrol","initial","increment","GameNode_","GameNode","getMove","parentid","getparent","parentgame","gensan","analysiskey","hasSan","childids","childid","gamenodes","current","stripCommentOfImages","stripCommentOfDelays","addImageToComment","setdelay","fromblob","genalgeb","weights","error","priority","hasEval","eval","parseProps","drawings","pd","parseDrawings","parent","regid","subnodes","siblings","excludethis","childs","sortedchilds","child","geterror","moderror","moderrorrec","node","opptrainweight","metrainweight","sortweight","sortchildids","ida","idb","a","sort","sortedchildsopp","sortedchildsme","revsortedchilds","reverse","OrderedHash_","OrderedHash","blobOpt","getKey","get","setKey","Game_","Game","getRandomMove","board","floor","getForwardMove","scs","getcurrentnode","drawAccepted","terminate","revokeDraw","drawOffered","turnPlayer","oppTurnPlayer","canMakeMove","turnMoveTime","turnTimeLeft","max","checkTurnTimedOut","updateThinkingTime","inProgress","tl","isRepetition","times","mults","sfen","makeSanMoveResult","makeSanMove","timecontrol","startThinking","sanOpt","makemove","mergeGameRecursive","back","mergeGame","game","getrootnode","buildFromPGN","headers","variantOpt","pgnHeaders","pgnBody","pgnVariant","setVariant","setFen","commentLevel","nodeStack","setfromnode","parsePGN","pgn","parseResult","lines","parseHead","parseBody","bodyLines","line","parsePgnPartsFromLines","setHeaders","setDefaultPgnHeaders","nodesForFen","gne","bookForFen","book","weightedAlgebForFen","indices","mult","prototypeAccessors$2","allNodes","forAllNodes","removePriority","merge","g","tobegin","forward","currentnode","fromsans","sans","root","currentnodeid","reset","makemovenode","setTimecontrol","hasAllPlayers","reason","terminatedAt","terminationCallback","resignPlayer","sitPlayer","UNSEAT","elapsed","ms","verbal","h","s","padStart","startGame","playerSeatedAfterTermination","startedAt","chat","startCallback","gamenodesserialized","flip","animations","selectedAnimation","animationDescriptors","Chat","playersVerbal","resultVerbal","variantKey","subtree","nodes","newchildids","childline","subtreeSize","nodeOpt","reduceLine","pgninfo","fromroot","rootnode","pgnMoves","oldcurrentnodeid","initialFen","white","black","date","movewithnumber","force","docomments","reportAsUCI","ignoreNumber","number","comments","analysisinfo","rai","RichAnalysisInfo","hasScorenumerical","scorenumerical","first","mn","multiPGN","params","rootNode","mainChild","variationStart","reportPgnHeaders","rootNodeOpt","domulti","keepBaseLine","tnodecmp","b","transpositions","tnodes","gamenode","del","oldcurrentnode","toend","AbstractEngine","sendanalysisinfo","path","spawn","checkcommand","setcommand","command","payload","play","moves","moveOverHead","P","resolvePlay","go","processstdoutline","bm","bestmove","summary","err","mdepth","mtime","time","mnodes","mnps","nps","mp","pv","analyzedboard","pvsan","pvsans","pvalgebs","highestdepth","scorecp","mscp","scoremate","msmate","pvs","newpvs","sortedpvs","pvsAtDepth","completeddepth","multipv","currentdepth","lastcompleteddepth","uci","minDepth","sendcommandtoengine","issuecommand","threads","analyzedfen","goCommand","wtime","winc","btime","binc","stop","spawnengineprocess","item","detailedmove","prototypeAccessors$3","running","live","isLive","npsInfo","padEnd","min","LocalEngine","super","stockfish","Worker","onmessage","data","module","ENGINE_READY","ENGINE_STOPPING","ENGINE_RUNNING","getLocal","deffault","setLocal","BOOK_MOVE_RATINGS","0","class","1","2","3","4","5","6","7","8","9","10","BookMove","deserialize","BookPosition","fromStored","storeKey","getStoredBlob","storeBlob","fromEntries","getRating","setRating","getClass","LICHESS_BOOK_AVG_RATINGS","LICHESS_BOOK_TIME_CONTROLS","bookCache","requestLichessBook","fenOpt","maxMovesOpt","ratingListOpt","speedListOpt","maxMoves","ratingList","speedList","ratings","opt","speeds","url","LICHESS_BOOK_URL","callback","asForm","asJson","Accept","asVndLichessV3Json","asNdjson","accessToken","Authorization","server","api","text","obj","simpleFetch","makeVariant","display","chessops","explorer","LICHESS_VARIANTS","chessopsToExplorer","search","script","label","active","type","Boolean","default","sticky","multiline","underlined","abbreviation","position","validator","labelText","isActive","isSticky","isMultiline","isUnderlined","isAbbreviation","hasPosition","hasSize","computed","dynamicStyles","--vue-custom-tooltip-color","$vueCustomTooltip","hasOwnProperty","--vue-custom-tooltip-background","background","--vue-custom-tooltip-border-radius","borderRadius","--vue-custom-tooltip-font-weight","fontWeight","handler","immediate","normalizeComponent","template","style","scopeId","isFunctionalTemplate","moduleIdentifier","shadowMode","createInjector","createInjectorSSR","createInjectorShadow","hook","options","render","staticRenderFns","_compiled","functional","_scopeId","context","$vnode","ssrContext","__VUE_SSR_CONTEXT__","call","_registeredComponents","add","_ssrRegister","$root","$options","shadowRoot","originalRender","existing","beforeCreate","HEAD","isOldIE","navigator","userAgent","css","group","media","styles","ids","Set","has","code","source","sources","btoa","unescape","encodeURIComponent","element","createElement","setAttribute","undefined","head","getElementsByTagName","appendChild","styleSheet","cssText","textNode","createTextNode","childNodes","removeChild","insertBefore","addStyle","__vue_component__","_vm","_h","$createElement","_self","_c","tag","vue-custom-tooltip","is-sticky","has-multiline","is-underlined","cursor","attrs","data-label","aria-label","role","_t","inject","defaultOptions","install","Vue","installed","prototype","$isServer","userOptions","assign","hexRegex","component","plugin","GlobalVue","window","global","use","sum","total","draws","rnd","ctotal"],"mappings":"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"}